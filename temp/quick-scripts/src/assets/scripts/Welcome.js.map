{"version":3,"sources":["assets/scripts/Welcome.js"],"names":["cc","Class","Component","properties","loading","ProgressBar","loadLabel","Label","startBut","Button","onLoad","_self","getComponent","interactable","loader","downloader","loadSubpackage","err","console","log","goH5Load","loadResDir","res","director","preloadScene","onProgress","bind","crabNode","node","getChildByName","crabBodyNode","armatureDisplay","dragonBones","ArmatureDisplay","playAnimation","wxlogin","datanode","find","exportJson","sysInfo","window","wx","getSystemInfoSync","width","screenWidth","height","screenHeight","getSetting","success","authSetting","getUserInfo","userInfo","setWxUser","play","button","createUserInfoButton","type","text","style","left","top","backgroundColor","color","fontSize","textAlign","lineHeight","onTap","destroy","start","loadProtobuf","myprotobuf","protobuf","filename","load","root","acMessage","lookupType","testProtobuf","sys","isNative","jsb","fileUtils","addSearchPath","filename1","protobufHere","myAgentsParam","curTime","Date","getTime","onSceneLaunched","gameObj","getScene","gameNode","setBuffDisp","setParam","loadScene","completedCount","totalCount","item","progress","string","Math","floor"],"mappings":"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","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\n//var pp = require(\"acdata\").AcWar;\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //     // ATTRIBUTES:\n        //     default: null,        // The default value will be used only when the component attaching\n        //                           // to a node for the first time\n        //     type: cc.SpriteFrame, // optional, default is typeof default\n        //     serializable: true,   // optional, default is true\n        // },\n        // bar: {\n        //     get () {\n        //         return this._bar;\n        //     },\n        //     set (value) {\n        //         this._bar = value;\n        //     }\n        // },\n\n        loading: cc.ProgressBar,\n        loadLabel: cc.Label,\n        startBut: cc.Button,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        //this.audioMng = this.audioMng.getComponent('AudioMng');\n        //this.audioMng.playMusic();\n        var _self = this;\n\n        this.startBut.getComponent(cc.Button).interactable = false;\n\n        cc.loader.downloader.loadSubpackage(\"resources\", (err)=> {\n            if(err) {\n                console.log(err);\n                _self.goH5Load();\n            } else {\n                cc.loader.loadResDir(\"resources\", (err, res)=> {\n                    console.log(\"you can go now!!!!!!!!!\");\n                    cc.director.preloadScene('menu', _self.onProgress.bind(_self), function() {\n                        cc.director.preloadScene('game', _self.onProgress.bind(_self), function() {\n                            //_self.wxlogin();\n                            _self.startBut.getComponent(cc.Button).interactable = true;\n                        });\n                    });\n                })                \n            }\n        })\n\n        //test dragonbones\n        var crabNode = this.node.getChildByName(\"Crab\");\n        if(crabNode) {\n            var crabBodyNode = crabNode.getChildByName(\"crab_body\");\n            var armatureDisplay = crabBodyNode.getComponent(dragonBones.ArmatureDisplay);\n            armatureDisplay.playAnimation('ske_n_attack', 0);\n        }\n\n    },\n\n    wxlogin: function() {\n        //let exportJson = {};\n        //window.wx.login({\n        //    success: (userRes) => {\n        //        exportJson.code = userRes.code;//向服务端传递code用于获取微信小游戏的用户唯一标识\n        //    },\n        //});\n        let datanode = cc.find('GameData').getComponent('GameData');\n\n        let _self = this;\n        let exportJson = {};\n        let sysInfo = window.wx.getSystemInfoSync();\n        //获取微信界面大小\n        let width = sysInfo.screenWidth;\n        let height = sysInfo.screenHeight;\n        //_self.startBut.getComponent(cc.Button).interactable = false;\n\n        window.wx.getSetting({\n            success (res) {\n                console.log(res.authSetting);\n                if (res.authSetting[\"scope.userInfo\"]) {\n                    console.log(\"用户已授权\");\n                    window.wx.getUserInfo({\n                        success(res){\n                            console.log(res);\n                            exportJson.userInfo = res.userInfo;\n                            datanode.setWxUser(res.userInfo);\n\n                            //此时可进行登录操作\n                            //_self.startBut.getComponent(cc.Button).interactable = true;\n                            _self.play();\n                        }\n                    });\n                } else {\n                    console.log(\"用户未授权\");\n                    _self.startBut.getComponent(cc.Button).interactable = true;\n                    let button = window.wx.createUserInfoButton({\n                        type: 'text',\n                        text: '',\n                        style: {\n                            left: 0,\n                            top: 0,\n                            width: width,\n                            height: height,\n                            backgroundColor: '#00000000',//最后两位为透明度\n                            color: '#ffffff',\n                            fontSize: 20,\n                            textAlign: \"center\",\n                            lineHeight: height,\n                        }\n                    });\n                    button.onTap((res) => {\n                        if (res.userInfo) {\n                            console.log(\"用户授权:\", res);\n                            exportJson.userInfo = res.userInfo;\n                            \n                            //此时可进行登录操作\n                            datanode.setWxUser(res.userInfo);\n                            _self.play();\n\n                            button.destroy();\n                        }else {\n                            console.log(\"用户拒绝授权:\", res);\n                        }\n                    });\n                }\n            }\n        })\n    },\n\n    goH5Load () {\n        var _self = this;\n        cc.director.preloadScene('menu', this.onProgress.bind(this), function() {    \n            cc.director.preloadScene('game', _self.onProgress.bind(_self), function() {    \n                _self.startBut.getComponent(cc.Button).interactable = true;\n            });\n        });\n    },\n\n    start () {\n        //this.loadProtobuf();\n        //this.testProtobuf();\n\n    },\n\n    loadProtobuf: function() {\n        var myprotobuf = protobuf;\n        var filename = \"acdata.proto\";\n        myprotobuf.load(filename, function(err, root) {\n            if(err) {\n                throw err;\n            }\n\n            var acMessage = root.lookupType(\"AcWar.AcwarMessage\");\n            console.log(acMessage);\n        })\n    },\n\n    testProtobuf: function () {\n        if (cc.sys.isNative) {//在native上加载失败，是因为没有找到目录，我们在testProtobuf函数里面添加一个搜索目录:\n            cc.log(\"jsb.fileUtils=\" + jsb.fileUtils);\n\n            //下面这段代码在PC window平台运行没问题，但是在android下面就出问题了\n            //jsb.fileUtils.addSearchPath(\"res\\\\raw-assets\\\\resources\", true);\n            //需要改成这样：\n            jsb.fileUtils.addSearchPath(\"res/raw-assets/resources\", true);//坑太多了。。没办法\n        }\n\n        var filename1 = \"acdata.proto\";\n        // cc.loader.loadRes(filename1, cc.TextAsset, function (error, result) {//指定加载文本资源\n        //     cc.log(\"loadRes error=\" + error + \",result = \" + result + \",type=\" + typeof result);\n        //     // callback(null, result);\n        // });\n\n        var protobufHere = protobuf;//require(\"protobuf\");//导入为插件，直接使用\n        protobufHere.load(filename1, function (err, root) {//Data/PbLobby.proto\n            if (err) {\n                console.log(\"load proto err:\" + err);\n                throw err;\n            }\n\n/*\n            cc.log(\"root=\" + root);\n            for (var i in root) {\n                cc.log(\"root.\" + i + \"=\" + root[i]);\n            }\n            //return;\n*/\n\n            cc.log(\"加载protobuf完毕，开始测试protobuf...\")\n\n/*\n            var cmd = root.lookupEnum(\"PbLobby.Cmd\");\n            cc.log(`cmd = ${JSON.stringify(cmd)}`);\n            cc.log(\"CMD_KEEPALIVED_C2S = \"+cmd.values.CMD_KEEPALIVED_C2S);\n\n            //lookup 等价于 lookupTypeOrEnum \n            //不同的是 lookup找不到返回null,lookupTypeOrEnum找不到则是抛出异常\n            var type1 = root.lookup(\"PbLobby.Cmd1\");\n            cc.log(\"type1 = \"+type1);\n            var type2 = root.lookup(\"PbLobby.Test1\");\n            cc.log(\"type2 = \"+type2);\n*/\n\n/*\n            // Obtain a message type\n            var Test1Message = root.lookupType(\"AcWar.AcwarMessage\");\n            cc.log(\"Test1Message = \"+Test1Message);\n\n            // Exemplary payload\n            var payload = { id: 1,name:\"hello protobuf\" };\n            //var payload = { ids: 1,name:\"hello protobuf\" };\n            cc.log(`payload = ${JSON.stringify(payload)}`);\n            //过滤掉一些message中的不存在的字段\n            // Create a new message\n            var message = Test1Message.create(payload); // or use .fromObject if conversion is necessary\n            cc.log(`message = ${JSON.stringify(message)}`);\n\n\n            // Encode a message to an Uint8Array (browser) or Buffer (node)\n            var buffer = Test1Message.encode(message).finish();\n            cc.log(\"buffer1 = \"+buffer);\n            cc.log(`buffer2 = ${Array.prototype.toString.call(buffer)}`);\n            // ... do something with buffer\n\n            // Decode an Uint8Array (browser) or Buffer (node) to a message\n            var decoded = Test1Message.decode(buffer);\n            cc.log(\"decoded1 = \"+decoded);\n            cc.log(`decoded2 = ${JSON.stringify(decoded)}`);\n            // ... do something with message\n\n            // If the application uses length-delimited buffers, there is also encodeDelimited and decodeDelimited.\n\n            //一般情况下，也不需要下面的转换\n            // Maybe convert the message back to a plain object\n            var object = Test1Message.toObject(decoded, {\n                longs: String,\n                enums: String,\n                bytes: String,\n                // see ConversionOptions\n            });\n            cc.log(\"object = \"+JSON.stringify(object));\n*/\n\n        });\n    },\n\n\n    play: function() {\n        //cc.director.loadScene('menu');\n\n        var myAgentsParam = [\n            {\"seleRole\":'log', \"magicCost\":3, \"roleLevel\":1},\n            {\"seleRole\":'hr', \"magicCost\":4, \"roleLevel\":1},\n            {\"seleRole\":'bee', \"magicCost\":1, \"roleLevel\":1},\n            {\"seleRole\":'ske', \"magicCost\":1, \"roleLevel\":1},\n            {\"seleRole\":'lr', \"magicCost\":1, \"roleLevel\":1},\n            {\"seleRole\":'wiz', \"magicCost\":3, \"roleLevel\":1}\n        ];\n        var curTime = new Date().getTime();\n\n        var onSceneLaunched = function() {\n            console.log(myAgentsParam);\n            var gameObj = cc.director.getScene().getChildByName('Canvas').getChildByName('layout');\n            var gameNode = gameObj.getComponent('Game');\n            gameNode.setBuffDisp(\"heal\");\n            gameNode.setParam(myAgentsParam, curTime);\n        };\n\n        cc.director.loadScene('game', onSceneLaunched);\n    },\n\n    onProgress: function(completedCount, totalCount, item){\n        this.loading.progress = completedCount/totalCount;\n        this.loadLabel.string = Math.floor(completedCount/totalCount * 100) + \"%\";\n    },\n\n    // update (dt) {},\n});\n"]}