
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/SocketProvider.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '04045eoOP5HZaxEvt4Slsa0', 'SocketProvider');
// scripts/SocketProvider.js

"use strict";

// Learn cc.Class:
//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html
//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html
// Learn Attribute:
//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html
//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html
// Learn life-cycle callbacks:
//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html
//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html
var pp = require("acdata1").AcWar;

cc.Class({
  "extends": cc.Component,
  properties: {},
  // LIFE-CYCLE CALLBACKS:
  // onLoad () {},
  // start () {},
  getRandomCharName: function getRandomCharName() {
    var aphabets = ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z"];
    var nick = "";

    for (var i = 0; i < 6; i++) {
      nick += aphabets[Math.floor(Math.random() * aphabets.length)];
    }

    return nick;
  },
  setGameStart: function setGameStart(roomId) {
    //this.gameStartTime = Date.now();
    this.roomId = roomId;
    console.log("my room:" + this.roomId);
    this.node.getChildByName("putWait").active = false;
    this.node.getChildByName("word3").active = true;
  },
  setGameStartTime: function setGameStartTime() {
    this.gameStartTime = Date.now();
  },
  socketHandle: function socketHandle(nick) {
    var _parent = this;

    this.gameTraceStack = []; //MY_SOCKET = window.io.connect('ws://118.25.231.17:4003');
    //MY_SOCKET = window.io.connect('wss://www.asobee.mobi:443');

    MY_SOCKET = window.io.connect('ws://192.168.1.60:4003'); //MY_SOCKET = window.io.connect('ws://13.112.214.196:10088');
    //console.log('check 1', MY_SOCKET.connected);

    MY_SOCKET.on('connect_error', function () {
      console.log('Connection Failed');

      if (!_parent.netErrDisp) {
        _parent.syncTimeout();

        _parent.setConnFailInfo();

        _parent.node.getChildByName("putWait").active = true;
      }
    });
    MY_SOCKET.on('connected', function (data) {
      MY_SOCKET.heartbeatTimeout = 5000;
      MY_SOCKET.json.emit('init', {
        'name': nick,
        'nick': nick,
        'img': '',
        'roomId': ''
      });
    });
    MY_SOCKET.on('disconnect', function (data) {
      console.log("disconnect to server");

      _parent.syncTimeout(); //_parent.resultOp.show();


      _parent.setConnFailInfo();

      _parent.node.getChildByName("putWait").active = true;
    });
    MY_SOCKET.on('otherlogin', function (data) {
      if (_parent.mainPlayer == -1) {
        _parent.mainPlayer = data.userData.length;
      } // 2 players means game start.


      if (data.userData.length == 2) {
        _parent.setGameStart(data.roomId);
      }
    });
    MY_SOCKET.on('heart', function (data) {
      var cdVal = parseInt(data.counter);

      _parent.setTimeCounter(cdVal);
    });
    MY_SOCKET.on('buff', function (data) {
      console.log("----buff data----");
      console.log(data);
      var buff = data;

      if (_parent.mainPlayer == 2) {
        buff = _parent.mirrorBuffData(data);
      }

      _parent.createBuff(buff);
    });
    MY_SOCKET.on('end', function (data) {
      console.log(data);
      console.log(_parent.mainPlayer);

      _parent.gameOverProcessor(_parent.mainPlayer, data);

      _parent.resultOp.setResultValue(_parent.mainPlayer, data);

      _parent.resultOp.show();
    });
    MY_SOCKET.on('proto', function (data) {
      var udata = new Uint8Array(data);
      var message = pp.Info.decode(udata);
      var base = message.base;

      for (var i = 0; i < message.base.length; i++) {
        message.base[i].mypos = {};
        message.base[i].enemypos = {};
        message.base[i].targetpos = {};
        message.base[i].mypos.x = message.base[i].mpy;
        message.base[i].mypos.y = message.base[i].mpx * -1;
        message.base[i].enemypos.x = message.base[i].epy;
        message.base[i].enemypos.y = message.base[i].epx * -1;
        message.base[i].targetpos.x = message.base[i].tpy;
        message.base[i].targetpos.y = message.base[i].tpx * -1;
      }

      for (var i = 0; i < message.fort.length; i++) {
        message.fort[i].mypos = {};
        message.fort[i].enemypos = {};
        message.fort[i].targetpos = {};
        message.fort[i].mypos.x = message.fort[i].mpy;
        message.fort[i].mypos.y = message.fort[i].mpx * -1;
        message.fort[i].enemypos.x = message.fort[i].epy;
        message.fort[i].enemypos.y = message.fort[i].epx * -1;
        message.fort[i].targetpos.x = message.fort[i].tpy;
        message.fort[i].targetpos.y = message.fort[i].tpx * -1;
      }

      for (var i = 0; i < message.agent.length; i++) {
        message.agent[i].mypos = {};
        message.agent[i].enemypos = {};
        message.agent[i].targetpos = {};
        message.agent[i].mypos.x = message.agent[i].mpy;
        message.agent[i].mypos.y = message.agent[i].mpx * -1;
        message.agent[i].enemypos.x = message.agent[i].epy;
        message.agent[i].enemypos.y = message.agent[i].epx * -1;
        message.agent[i].targetpos.x = message.agent[i].tpy;
        message.agent[i].targetpos.y = message.agent[i].tpx * -1;
      }

      for (var i = 0; i < message.bullet.length; i++) {
        message.bullet[i].mypos = {};
        message.bullet[i].enemypos = {};
        message.bullet[i].targetpos = {};
        message.bullet[i].mypos.x = message.bullet[i].mpy;
        message.bullet[i].mypos.y = message.bullet[i].mpx * -1;
        message.bullet[i].enemypos.x = message.bullet[i].epy;
        message.bullet[i].enemypos.y = message.bullet[i].epx * -1;
        message.bullet[i].targetpos.x = message.bullet[i].tpy;
        message.bullet[i].targetpos.y = message.bullet[i].tpx * -1;
      }

      for (var i = 0; i < message.rollLog.length; i++) {
        message.rollLog[i].mypos = {};
        message.rollLog[i].enemypos = {};
        message.rollLog[i].targetpos = {};
        message.rollLog[i].mypos.x = message.rollLog[i].mpy;
        message.rollLog[i].mypos.y = message.rollLog[i].mpx * -1;
        message.rollLog[i].enemypos.x = message.rollLog[i].epy;
        message.rollLog[i].enemypos.y = message.rollLog[i].epx * -1;
        message.rollLog[i].targetpos.x = message.rollLog[i].tpy;
        message.rollLog[i].targetpos.y = message.rollLog[i].tpx * -1;
      }

      var traceData = {};
      var agents = message.agent;
      var bases = message.base;
      var forts = message.fort;
      var bullets = message.bullet;
      var rollLogs = message.rollLog;

      if (_parent.mainPlayer == 2) {
        agents = _parent.mirrorAgentsData(agents);
        bullets = _parent.mirrorAgentsData(bullets);
        bases = _parent.mirrorBasesData(bases);
        forts = _parent.mirrorAgentsData(forts);
        rollLogs = _parent.mirrorAgentsData(rollLogs);
      }

      traceData.agents = agents;
      traceData.bullets = bullets;
      traceData.bases = bases;
      traceData.forts = forts;
      traceData.rollLogs = rollLogs;

      _parent.gameTraceStack.push(traceData);

      if (_parent.gameTraceStack.length > _parent.bufferLen) {
        data = _parent.gameTraceStack[0];

        _parent.createAgents(data.agents);

        _parent.createBullets(data.bullets);

        _parent.createBases(data.bases);

        _parent.createForts(data.forts);

        _parent.createLogs(data.rollLogs); //_parent.setAgentsDir(agents);

      }
    });
    /*
            MY_SOCKET.on('agent', function (data) {
    //            console.log("--------agent---------");
                var traceData = {};
                var agents = data.agents;
                var bases = data.bases;
                var forts = data.forts;
                var bullets = data.bullets;
                var rollLogs = data.rollLogs;
    
                if(_parent.mainPlayer == 2) {
                    agents = _parent.mirrorAgentsData(agents);
                    bullets = _parent.mirrorAgentsData(bullets);
                    bases = _parent.mirrorBasesData(bases);
                    forts = _parent.mirrorAgentsData(forts);
                    rollLogs = _parent.mirrorAgentsData(rollLogs);
                }
    
                traceData.agents = agents;
                traceData.bullets = bullets;
                traceData.bases = bases;
                traceData.forts = forts;
                traceData.rollLogs = rollLogs;
    
                _parent.gameTraceStack.push(traceData);
    
                if(_parent.gameTraceStack.length > _parent.bufferLen) {
                    data = _parent.gameTraceStack[0];
                    _parent.createAgents(data.agents);
                    _parent.createBullets(data.bullets);
                    _parent.createBases(data.bases);
                    _parent.createForts(data.forts);
                    _parent.createLogs(data.rollLogs);
                    //_parent.setAgentsDir(agents);
                }
            });
    */

    this.startTraceTimer();
  },
  mirrorAgentsData_bak: function mirrorAgentsData_bak(agents) {
    //var gwidth = this.node.width/38;
    //var gheight = this.node.height/38;
    //todo
    var gwidth = 16;
    var gheight = 35;

    for (var i = agents.length - 1; i >= 0; i--) {
      agents[i].mypos.x = gwidth - agents[i].mypos.x;
      agents[i].mypos.y = gheight - agents[i].mypos.y;

      if (agents[i].enemypos) {
        agents[i].enemypos.x = gwidth - agents[i].enemypos.x;
        agents[i].enemypos.y = gheight - agents[i].enemypos.y;
      } //for firebomb those which has no specific enmeies, just a target location.


      if (agents[i].targetpos) {
        agents[i].targetpos.x = gwidth - agents[i].targetpos.x;
        agents[i].targetpos.y = gheight - agents[i].targetpos.y;
      } //agents[i].rot += 180;

    }

    ;
    return agents;
  },
  mirrorAgentsData: function mirrorAgentsData(agents) {
    //var gwidth = this.node.width/38;
    //var gheight = this.node.height/38;
    //todo
    var gwidth = 35;
    var gheight = 16;

    for (var i = agents.length - 1; i >= 0; i--) {
      agents[i].mypos.x = gwidth - agents[i].mypos.x;

      if (agents[i].enemypos) {
        agents[i].enemypos.x = gwidth - agents[i].enemypos.x;
      } //for firebomb those which has no specific enmeies, just a target location.


      if (agents[i].targetpos) {
        agents[i].targetpos.x = gwidth - agents[i].targetpos.x;
      } //agents[i].rot += 180;

    }

    ;
    return agents;
  },
  mirrorBuffData: function mirrorBuffData(buff) {
    var gwidth = this.node.width / 30;
    var gheight = this.node.height / 30;
    buff.mypos.x = gwidth - buff.mypos.x;
    buff.mypos.y = gheight - buff.mypos.y;
    return buff;
  },
  mirrorBasesData: function mirrorBasesData(bases) {
    var gwidth = this.node.width / 30;
    var gheight = this.node.height / 30;

    for (var i = bases.length - 1; i >= 0; i--) {
      if (bases[i].objectId == 1) {
        bases[i].objectId = 4;
      } else if (bases[i].objectId == 2) {
        bases[i].objectId = 6;
      } else if (bases[i].objectId == 3) {
        bases[i].objectId = 5;
      } else if (bases[i].objectId == 4) {
        bases[i].objectId = 1;
      } else if (bases[i].objectId == 6) {
        bases[i].objectId = 2;
      } else if (bases[i].objectId == 5) {
        bases[i].objectId = 3;
      } //in mirror mode, x, y should be ajusted.


      bases[i].mypos.x = gwidth - bases[i].mypos.x - 1;
      bases[i].mypos.y = gheight - bases[i].mypos.y;

      if (bases[i].enemypos) {
        bases[i].enemypos.x = gwidth - bases[i].enemypos.x - 1;
        bases[i].enemypos.y = gheight - bases[i].enemypos.y;
      } //for firebomb those which has no specific enmeies, just a target location.


      if (bases[i].targetpos) {
        bases[i].targetpos.x = gwidth - bases[i].targetpos.x - 1;
        bases[i].targetpos.y = gheight - bases[i].targetpos.y;
      }
    }

    ;
    return bases;
  },
  disconnectServer: function disconnectServer() {
    MY_SOCKET.disconnect();
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9zY3JpcHRzL1NvY2tldFByb3ZpZGVyLmpzIl0sIm5hbWVzIjpbInBwIiwicmVxdWlyZSIsIkFjV2FyIiwiY2MiLCJDbGFzcyIsIkNvbXBvbmVudCIsInByb3BlcnRpZXMiLCJnZXRSYW5kb21DaGFyTmFtZSIsImFwaGFiZXRzIiwibmljayIsImkiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJsZW5ndGgiLCJzZXRHYW1lU3RhcnQiLCJyb29tSWQiLCJjb25zb2xlIiwibG9nIiwibm9kZSIsImdldENoaWxkQnlOYW1lIiwiYWN0aXZlIiwic2V0R2FtZVN0YXJ0VGltZSIsImdhbWVTdGFydFRpbWUiLCJEYXRlIiwibm93Iiwic29ja2V0SGFuZGxlIiwiX3BhcmVudCIsImdhbWVUcmFjZVN0YWNrIiwiTVlfU09DS0VUIiwid2luZG93IiwiaW8iLCJjb25uZWN0Iiwib24iLCJuZXRFcnJEaXNwIiwic3luY1RpbWVvdXQiLCJzZXRDb25uRmFpbEluZm8iLCJkYXRhIiwiaGVhcnRiZWF0VGltZW91dCIsImpzb24iLCJlbWl0IiwibWFpblBsYXllciIsInVzZXJEYXRhIiwiY2RWYWwiLCJwYXJzZUludCIsImNvdW50ZXIiLCJzZXRUaW1lQ291bnRlciIsImJ1ZmYiLCJtaXJyb3JCdWZmRGF0YSIsImNyZWF0ZUJ1ZmYiLCJnYW1lT3ZlclByb2Nlc3NvciIsInJlc3VsdE9wIiwic2V0UmVzdWx0VmFsdWUiLCJzaG93IiwidWRhdGEiLCJVaW50OEFycmF5IiwibWVzc2FnZSIsIkluZm8iLCJkZWNvZGUiLCJiYXNlIiwibXlwb3MiLCJlbmVteXBvcyIsInRhcmdldHBvcyIsIngiLCJtcHkiLCJ5IiwibXB4IiwiZXB5IiwiZXB4IiwidHB5IiwidHB4IiwiZm9ydCIsImFnZW50IiwiYnVsbGV0Iiwicm9sbExvZyIsInRyYWNlRGF0YSIsImFnZW50cyIsImJhc2VzIiwiZm9ydHMiLCJidWxsZXRzIiwicm9sbExvZ3MiLCJtaXJyb3JBZ2VudHNEYXRhIiwibWlycm9yQmFzZXNEYXRhIiwicHVzaCIsImJ1ZmZlckxlbiIsImNyZWF0ZUFnZW50cyIsImNyZWF0ZUJ1bGxldHMiLCJjcmVhdGVCYXNlcyIsImNyZWF0ZUZvcnRzIiwiY3JlYXRlTG9ncyIsInN0YXJ0VHJhY2VUaW1lciIsIm1pcnJvckFnZW50c0RhdGFfYmFrIiwiZ3dpZHRoIiwiZ2hlaWdodCIsIndpZHRoIiwiaGVpZ2h0Iiwib2JqZWN0SWQiLCJkaXNjb25uZWN0U2VydmVyIiwiZGlzY29ubmVjdCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQSxJQUFJQSxFQUFFLEdBQUdDLE9BQU8sQ0FBQyxTQUFELENBQVAsQ0FBbUJDLEtBQTVCOztBQUVBQyxFQUFFLENBQUNDLEtBQUgsQ0FBUztBQUNMLGFBQVNELEVBQUUsQ0FBQ0UsU0FEUDtBQUdMQyxFQUFBQSxVQUFVLEVBQUUsRUFIUDtBQU1MO0FBRUE7QUFFQTtBQUVBQyxFQUFBQSxpQkFBaUIsRUFBRSw2QkFBVztBQUMxQixRQUFJQyxRQUFRLEdBQUUsQ0FBQyxHQUFELEVBQUssR0FBTCxFQUFTLEdBQVQsRUFBYSxHQUFiLEVBQWlCLEdBQWpCLEVBQXFCLEdBQXJCLEVBQXlCLEdBQXpCLEVBQTZCLEdBQTdCLEVBQWlDLEdBQWpDLEVBQXFDLEdBQXJDLEVBQXlDLEdBQXpDLEVBQTZDLEdBQTdDLEVBQWlELEdBQWpELEVBQXFELEdBQXJELEVBQXlELEdBQXpELEVBQTZELEdBQTdELEVBQWlFLEdBQWpFLEVBQXFFLEdBQXJFLEVBQXlFLEdBQXpFLEVBQTZFLEdBQTdFLEVBQWlGLEdBQWpGLEVBQXFGLEdBQXJGLEVBQXlGLEdBQXpGLEVBQTZGLEdBQTdGLEVBQWlHLEdBQWpHLEVBQXFHLEdBQXJHLENBQWQ7QUFDQSxRQUFJQyxJQUFJLEdBQUcsRUFBWDs7QUFDQSxTQUFJLElBQUlDLENBQUMsR0FBQyxDQUFWLEVBQVlBLENBQUMsR0FBQyxDQUFkLEVBQWdCQSxD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LEdBQXNCNEIsT0FBTyxHQUFHaEIsS0FBSyxDQUFDbkUsQ0FBRCxDQUFMLENBQVNtRCxRQUFULENBQWtCSSxDQUFsRDtBQUNILE9BNUJ1QyxDQThCeEM7OztBQUNBLFVBQUdZLEtBQUssQ0FBQ25FLENBQUQsQ0FBTCxDQUFTb0QsU0FBWixFQUF1QjtBQUNuQmUsUUFBQUEsS0FBSyxDQUFDbkUsQ0FBRCxDQUFMLENBQVNvRCxTQUFULENBQW1CQyxDQUFuQixHQUF1QjZCLE1BQU0sR0FBR2YsS0FBSyxDQUFDbkUsQ0FBRCxDQUFMLENBQVNvRCxTQUFULENBQW1CQyxDQUE1QixHQUE4QixDQUFyRDtBQUNBYyxRQUFBQSxLQUFLLENBQUNuRSxDQUFELENBQUwsQ0FBU29ELFNBQVQsQ0FBbUJHLENBQW5CLEdBQXVCNEIsT0FBTyxHQUFHaEIsS0FBSyxDQUFDbkUsQ0FBRCxDQUFMLENBQVNvRCxTQUFULENBQW1CRyxDQUFwRDtBQUNIO0FBQ0o7O0FBQUE7QUFDRCxXQUFPWSxLQUFQO0FBQ0gsR0E5Vkk7QUFnV0xvQixFQUFBQSxnQkFBZ0IsRUFBQyw0QkFBVztBQUN4QnBFLElBQUFBLFNBQVMsQ0FBQ3FFLFVBQVY7QUFDSDtBQWxXSSxDQUFUIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyIvLyBMZWFybiBjYy5DbGFzczpcbi8vICAtIFtDaGluZXNlXSBodHRwOi8vZG9jcy5jb2Nvcy5jb20vY3JlYXRvci9tYW51YWwvemgvc2NyaXB0aW5nL2NsYXNzLmh0bWxcbi8vICAtIFtFbmdsaXNoXSBodHRwOi8vd3d3LmNvY29zMmQteC5vcmcvZG9jcy9jcmVhdG9yL2VuL3NjcmlwdGluZy9jbGFzcy5odG1sXG4vLyBMZWFybiBBdHRyaWJ1dGU6XG4vLyAgLSBbQ2hpbmVzZV0gaHR0cDovL2RvY3MuY29jb3MuY29tL2NyZWF0b3IvbWFudWFsL3poL3NjcmlwdGluZy9yZWZlcmVuY2UvYXR0cmlidXRlcy5odG1sXG4vLyAgLSBbRW5nbGlzaF0gaHR0cDovL3d3dy5jb2NvczJkLXgub3JnL2RvY3MvY3JlYXRvci9lbi9zY3JpcHRpbmcvcmVmZXJlbmNlL2F0dHJpYnV0ZXMuaHRtbFxuLy8gTGVhcm4gbGlmZS1jeWNsZSBjYWxsYmFja3M6XG4vLyAgLSBbQ2hpbmVzZV0gaHR0cDovL2RvY3MuY29jb3MuY29tL2NyZWF0b3IvbWFudWFsL3poL3NjcmlwdGluZy9saWZlLWN5Y2xlLWNhbGxiYWNrcy5odG1sXG4vLyAgLSBbRW5nbGlzaF0gaHR0cDovL3d3dy5jb2NvczJkLXgub3JnL2RvY3MvY3JlYXRvci9lbi9zY3JpcHRpbmcvbGlmZS1jeWNsZS1jYWxsYmFja3MuaHRtbFxuXG52YXIgcHAgPSByZXF1aXJlKFwiYWNkYXRhMVwiKS5BY1dhcjtcblxuY2MuQ2xhc3Moe1xuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcblxuICAgIHByb3BlcnRpZXM6IHtcbiAgICB9LFxuXG4gICAgLy8gTElGRS1DWUNMRSBDQUxMQkFDS1M6XG5cbiAgICAvLyBvbkxvYWQgKCkge30sXG5cbiAgICAvLyBzdGFydCAoKSB7fSxcblxuICAgIGdldFJhbmRvbUNoYXJOYW1lOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGFwaGFiZXRzID1bXCJhXCIsXCJiXCIsXCJjXCIsXCJkXCIsXCJlXCIsXCJmXCIsXCJnXCIsXCJoXCIsXCJpXCIsXCJqXCIsXCJrXCIsXCJsXCIsXCJtXCIsXCJuXCIsXCJvXCIsXCJwXCIsXCJxXCIsXCJyXCIsXCJzXCIsXCJ0XCIsXCJ1XCIsXCJ2XCIsXCJ3XCIsXCJ4XCIsXCJ5XCIsXCJ6XCJdO1xuICAgICAgICB2YXIgbmljayA9IFwiXCI7XG4gICAgICAgIGZvcih2YXIgaT0wO2k8NjtpKyspIHtcbiAgICAgICAgICAgIG5pY2sgKz0gYXBoYWJldHNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKmFwaGFiZXRzLmxlbmd0aCldO1xuICAgICAgICB9IFxuICAgICAgICByZXR1cm4gbmljaztcbiAgICB9LFxuXG4gICAgc2V0R2FtZVN0YXJ0OmZ1bmN0aW9uKHJvb21JZCkge1xuICAgICAgICAvL3RoaXMuZ2FtZVN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIHRoaXMucm9vbUlkID0gcm9vbUlkO1xuICAgICAgICBjb25zb2xlLmxvZyhcIm15IHJvb206XCIgKyB0aGlzLnJvb21JZCk7XG5cbiAgICAgICAgdGhpcy5ub2RlLmdldENoaWxkQnlOYW1lKFwicHV0V2FpdFwiKS5hY3RpdmU9ZmFsc2U7XG4gICAgICAgIHRoaXMubm9kZS5nZXRDaGlsZEJ5TmFtZShcIndvcmQzXCIpLmFjdGl2ZT10cnVlO1xuICAgIH0sXG5cbiAgICBzZXRHYW1lU3RhcnRUaW1lOmZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLmdhbWVTdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgIH0sXG5cbiAgICBzb2NrZXRIYW5kbGU6ZnVuY3Rpb24obmljaykge1xuICAgICAgICB2YXIgX3BhcmVudCA9IHRoaXM7XG5cbiAgICAgICAgdGhpcy5nYW1lVHJhY2VTdGFjayA9IFtdO1xuXG4gICAgICAgIC8vTVlfU09DS0VUID0gd2luZG93LmlvLmNvbm5lY3QoJ3dzOi8vMTE4LjI1LjIzMS4xNzo0MDAzJyk7XG4gICAgICAgIC8vTVlfU09DS0VUID0gd2luZG93LmlvLmNvbm5lY3QoJ3dzczovL3d3dy5hc29iZWUubW9iaTo0NDMnKTtcbiAgICAgICAgTVlfU09DS0VUID0gd2luZG93LmlvLmNvbm5lY3QoJ3dzOi8vMTkyLjE2OC4xLjYwOjQwMDMnKTtcbiAgICAgICAgLy9NWV9TT0NLRVQgPSB3aW5kb3cuaW8uY29ubmVjdCgnd3M6Ly8xMy4xMTIuMjE0LjE5NjoxMDA4OCcpO1xuXG4gICAgICAgIC8vY29uc29sZS5sb2coJ2NoZWNrIDEnLCBNWV9TT0NLRVQuY29ubmVjdGVkKTtcbiAgICAgICAgTVlfU09DS0VULm9uKCdjb25uZWN0X2Vycm9yJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDb25uZWN0aW9uIEZhaWxlZCcpO1xuICAgICAgICAgICAgaWYoIV9wYXJlbnQubmV0RXJyRGlzcCkge1xuICAgICAgICAgICAgICAgIF9wYXJlbnQuc3luY1RpbWVvdXQoKTtcbiAgICAgICAgICAgICAgICBfcGFyZW50LnNldENvbm5GYWlsSW5mbygpO1xuICAgICAgICAgICAgICAgIF9wYXJlbnQubm9kZS5nZXRDaGlsZEJ5TmFtZShcInB1dFdhaXRcIikuYWN0aXZlPXRydWU7ICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBNWV9TT0NLRVQub24oJ2Nvbm5lY3RlZCcsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgIE1ZX1NPQ0tFVC5oZWFydGJlYXRUaW1lb3V0ID0gNTAwMDtcbiAgICAgICAgICAgIE1ZX1NPQ0tFVC5qc29uLmVtaXQoJ2luaXQnLCB7J25hbWUnOiBuaWNrLCAnbmljayc6IG5pY2ssICdpbWcnOicnLCAncm9vbUlkJzogJyd9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgTVlfU09DS0VULm9uKCdkaXNjb25uZWN0JywgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJkaXNjb25uZWN0IHRvIHNlcnZlclwiKTtcbiAgICAgICAgICAgIF9wYXJlbnQuc3luY1RpbWVvdXQoKTtcbiAgICAgICAgICAgIC8vX3BhcmVudC5yZXN1bHRPcC5zaG93KCk7XG4gICAgICAgICAgICBfcGFyZW50LnNldENvbm5GYWlsSW5mbygpO1xuICAgICAgICAgICAgX3BhcmVudC5ub2RlLmdldENoaWxkQnlOYW1lKFwicHV0V2FpdFwiKS5hY3RpdmU9dHJ1ZTsgICAgIFxuICAgICAgICB9KTtcblxuICAgICAgICBNWV9TT0NLRVQub24oJ290aGVybG9naW4nLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgaWYoX3BhcmVudC5tYWluUGxheWVyID09IC0xKSB7XG4gICAgICAgICAgICAgICAgX3BhcmVudC5tYWluUGxheWVyID0gZGF0YS51c2VyRGF0YS5sZW5ndGg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIDIgcGxheWVycyBtZWFucyBnYW1lIHN0YXJ0LlxuICAgICAgICAgICAgaWYoZGF0YS51c2VyRGF0YS5sZW5ndGggPT0gMikge1xuICAgICAgICAgICAgICAgIF9wYXJlbnQuc2V0R2FtZVN0YXJ0KGRhdGEucm9vbUlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgTVlfU09DS0VULm9uKCdoZWFydCcsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICB2YXIgY2RWYWwgPSBwYXJzZUludChkYXRhLmNvdW50ZXIpO1xuICAgICAgICAgICAgX3BhcmVudC5zZXRUaW1lQ291bnRlcihjZFZhbCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIE1ZX1NPQ0tFVC5vbignYnVmZicsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIi0tLS1idWZmIGRhdGEtLS0tXCIpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICAgICB2YXIgYnVmZiA9IGRhdGE7XG4gICAgICAgICAgICBpZihfcGFyZW50Lm1haW5QbGF5ZXIgPT0gMikge1xuICAgICAgICAgICAgICAgIGJ1ZmYgPSBfcGFyZW50Lm1pcnJvckJ1ZmZEYXRhKGRhdGEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBfcGFyZW50LmNyZWF0ZUJ1ZmYoYnVmZik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIE1ZX1NPQ0tFVC5vbignZW5kJywgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coX3BhcmVudC5tYWluUGxheWVyKTtcbiAgICAgICAgICAgIF9wYXJlbnQuZ2FtZU92ZXJQcm9jZXNzb3IoX3BhcmVudC5tYWluUGxheWVyLCBkYXRhKTtcbiAgICAgICAgICAgIF9wYXJlbnQucmVzdWx0T3Auc2V0UmVzdWx0VmFsdWUoX3BhcmVudC5tYWluUGxheWVyLCBkYXRhKTtcbiAgICAgICAgICAgIF9wYXJlbnQucmVzdWx0T3Auc2hvdygpO1xuICAgICAgICB9KTtcblxuICAgICAgICBNWV9TT0NLRVQub24oJ3Byb3RvJywgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgbGV0IHVkYXRhID0gbmV3IFVpbnQ4QXJyYXkoZGF0YSk7XG4gICAgICAgICAgICB2YXIgbWVzc2FnZSA9IHBwLkluZm8uZGVjb2RlKHVkYXRhKTtcbiAgICAgICAgICAgIHZhciBiYXNlID0gbWVzc2FnZS5iYXNlO1xuXG4gICAgICAgICAgICBmb3IodmFyIGk9MDtpPG1lc3NhZ2UuYmFzZS5sZW5ndGg7aSsrKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5iYXNlW2ldLm15cG9zID0ge307XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5iYXNlW2ldLmVuZW15cG9zID0ge307XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5iYXNlW2ldLnRhcmdldHBvcyA9IHt9O1xuXG4gICAgICAgICAgICAgICAgbWVzc2FnZS5iYXNlW2ldLm15cG9zLnggPSBtZXNzYWdlLmJhc2VbaV0ubXB5O1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UuYmFzZVtpXS5teXBvcy55ID0gbWVzc2FnZS5iYXNlW2ldLm1weCotMTtcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmJhc2VbaV0uZW5lbXlwb3MueCA9IG1lc3NhZ2UuYmFzZVtpXS5lcHk7XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5iYXNlW2ldLmVuZW15cG9zLnkgPSBtZXNzYWdlLmJhc2VbaV0uZXB4Ki0xO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UuYmFzZVtpXS50YXJnZXRwb3MueCA9IG1lc3NhZ2UuYmFzZVtpXS50cHk7XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5iYXNlW2ldLnRhcmdldHBvcy55ID0gbWVzc2FnZS5iYXNlW2ldLnRweCotMTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yKHZhciBpPTA7aTxtZXNzYWdlLmZvcnQubGVuZ3RoO2krKykge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UuZm9ydFtpXS5teXBvcyA9IHt9O1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UuZm9ydFtpXS5lbmVteXBvcyA9IHt9O1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UuZm9ydFtpXS50YXJnZXRwb3MgPSB7fTtcblxuICAgICAgICAgICAgICAgIG1lc3NhZ2UuZm9ydFtpXS5teXBvcy54ID0gbWVzc2FnZS5mb3J0W2ldLm1weTtcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmZvcnRbaV0ubXlwb3MueSA9IG1lc3NhZ2UuZm9ydFtpXS5tcHgqLTE7XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5mb3J0W2ldLmVuZW15cG9zLnggPSBtZXNzYWdlLmZvcnRbaV0uZXB5O1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UuZm9ydFtpXS5lbmVteXBvcy55ID0gbWVzc2FnZS5mb3J0W2ldLmVweCotMTtcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmZvcnRbaV0udGFyZ2V0cG9zLnggPSBtZXNzYWdlLmZvcnRbaV0udHB5O1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UuZm9ydFtpXS50YXJnZXRwb3MueSA9IG1lc3NhZ2UuZm9ydFtpXS50cHgqLTE7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvcih2YXIgaT0wO2k8bWVzc2FnZS5hZ2VudC5sZW5ndGg7aSsrKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5hZ2VudFtpXS5teXBvcyA9IHt9O1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UuYWdlbnRbaV0uZW5lbXlwb3MgPSB7fTtcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmFnZW50W2ldLnRhcmdldHBvcyA9IHt9O1xuXG4gICAgICAgICAgICAgICAgbWVzc2FnZS5hZ2VudFtpXS5teXBvcy54ID0gbWVzc2FnZS5hZ2VudFtpXS5tcHk7XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5hZ2VudFtpXS5teXBvcy55ID0gbWVzc2FnZS5hZ2VudFtpXS5tcHgqLTE7XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5hZ2VudFtpXS5lbmVteXBvcy54ID0gbWVzc2FnZS5hZ2VudFtpXS5lcHk7XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5hZ2VudFtpXS5lbmVteXBvcy55ID0gbWVzc2FnZS5hZ2VudFtpXS5lcHgqLTE7XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5hZ2VudFtpXS50YXJnZXRwb3MueCA9IG1lc3NhZ2UuYWdlbnRbaV0udHB5O1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UuYWdlbnRbaV0udGFyZ2V0cG9zLnkgPSBtZXNzYWdlLmFnZW50W2ldLnRweCotMTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yKHZhciBpPTA7aTxtZXNzYWdlLmJ1bGxldC5sZW5ndGg7aSsrKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5idWxsZXRbaV0ubXlwb3MgPSB7fTtcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmJ1bGxldFtpXS5lbmVteXBvcyA9IHt9O1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UuYnVsbGV0W2ldLnRhcmdldHBvcyA9IHt9O1xuXG4gICAgICAgICAgICAgICAgbWVzc2FnZS5idWxsZXRbaV0ubXlwb3MueCA9IG1lc3NhZ2UuYnVsbGV0W2ldLm1weTtcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmJ1bGxldFtpXS5teXBvcy55ID0gbWVzc2FnZS5idWxsZXRbaV0ubXB4Ki0xO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UuYnVsbGV0W2ldLmVuZW15cG9zLnggPSBtZXNzYWdlLmJ1bGxldFtpXS5lcHk7XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5idWxsZXRbaV0uZW5lbXlwb3MueSA9IG1lc3NhZ2UuYnVsbGV0W2ldLmVweCotMTtcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmJ1bGxldFtpXS50YXJnZXRwb3MueCA9IG1lc3NhZ2UuYnVsbGV0W2ldLnRweTtcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmJ1bGxldFtpXS50YXJnZXRwb3MueSA9IG1lc3NhZ2UuYnVsbGV0W2ldLnRweCotMTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yKHZhciBpPTA7aTxtZXNzYWdlLnJvbGxMb2cubGVuZ3RoO2krKykge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2Uucm9sbExvZ1tpXS5teXBvcyA9IHt9O1xuICAgICAgICAgICAgICAgIG1lc3NhZ2Uucm9sbExvZ1tpXS5lbmVteXBvcyA9IHt9O1xuICAgICAgICAgICAgICAgIG1lc3NhZ2Uucm9sbExvZ1tpXS50YXJnZXRwb3MgPSB7fTtcblxuICAgICAgICAgICAgICAgIG1lc3NhZ2Uucm9sbExvZ1tpXS5teXBvcy54ID0gbWVzc2FnZS5yb2xsTG9nW2ldLm1weTtcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnJvbGxMb2dbaV0ubXlwb3MueSA9IG1lc3NhZ2Uucm9sbExvZ1tpXS5tcHgqLTE7XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5yb2xsTG9nW2ldLmVuZW15cG9zLnggPSBtZXNzYWdlLnJvbGxMb2dbaV0uZXB5O1xuICAgICAgICAgICAgICAgIG1lc3NhZ2Uucm9sbExvZ1tpXS5lbmVteXBvcy55ID0gbWVzc2FnZS5yb2xsTG9nW2ldLmVweCotMTtcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnJvbGxMb2dbaV0udGFyZ2V0cG9zLnggPSBtZXNzYWdlLnJvbGxMb2dbaV0udHB5O1xuICAgICAgICAgICAgICAgIG1lc3NhZ2Uucm9sbExvZ1tpXS50YXJnZXRwb3MueSA9IG1lc3NhZ2Uucm9sbExvZ1tpXS50cHgqLTE7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciB0cmFjZURhdGEgPSB7fTtcbiAgICAgICAgICAgIHZhciBhZ2VudHMgPSBtZXNzYWdlLmFnZW50O1xuICAgICAgICAgICAgdmFyIGJhc2VzID0gbWVzc2FnZS5iYXNlO1xuICAgICAgICAgICAgdmFyIGZvcnRzID0gbWVzc2FnZS5mb3J0O1xuICAgICAgICAgICAgdmFyIGJ1bGxldHMgPSBtZXNzYWdlLmJ1bGxldDtcbiAgICAgICAgICAgIHZhciByb2xsTG9ncyA9IG1lc3NhZ2Uucm9sbExvZztcblxuICAgICAgICAgICAgaWYoX3BhcmVudC5tYWluUGxheWVyID09IDIpIHtcbiAgICAgICAgICAgICAgICBhZ2VudHMgPSBfcGFyZW50Lm1pcnJvckFnZW50c0RhdGEoYWdlbnRzKTtcbiAgICAgICAgICAgICAgICBidWxsZXRzID0gX3BhcmVudC5taXJyb3JBZ2VudHNEYXRhKGJ1bGxldHMpO1xuICAgICAgICAgICAgICAgIGJhc2VzID0gX3BhcmVudC5taXJyb3JCYXNlc0RhdGEoYmFzZXMpO1xuICAgICAgICAgICAgICAgIGZvcnRzID0gX3BhcmVudC5taXJyb3JBZ2VudHNEYXRhKGZvcnRzKTtcbiAgICAgICAgICAgICAgICByb2xsTG9ncyA9IF9wYXJlbnQubWlycm9yQWdlbnRzRGF0YShyb2xsTG9ncyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRyYWNlRGF0YS5hZ2VudHMgPSBhZ2VudHM7XG4gICAgICAgICAgICB0cmFjZURhdGEuYnVsbGV0cyA9IGJ1bGxldHM7XG4gICAgICAgICAgICB0cmFjZURhdGEuYmFzZXMgPSBiYXNlcztcbiAgICAgICAgICAgIHRyYWNlRGF0YS5mb3J0cyA9IGZvcnRzO1xuICAgICAgICAgICAgdHJhY2VEYXRhLnJvbGxMb2dzID0gcm9sbExvZ3M7XG5cbiAgICAgICAgICAgIF9wYXJlbnQuZ2FtZVRyYWNlU3RhY2sucHVzaCh0cmFjZURhdGEpO1xuXG4gICAgICAgICAgICBpZihfcGFyZW50LmdhbWVUcmFjZVN0YWNrLmxlbmd0aCA+IF9wYXJlbnQuYnVmZmVyTGVuKSB7XG4gICAgICAgICAgICAgICAgZGF0YSA9IF9wYXJlbnQuZ2FtZVRyYWNlU3RhY2tbMF07XG4gICAgICAgICAgICAgICAgX3BhcmVudC5jcmVhdGVBZ2VudHMoZGF0YS5hZ2VudHMpO1xuICAgICAgICAgICAgICAgIF9wYXJlbnQuY3JlYXRlQnVsbGV0cyhkYXRhLmJ1bGxldHMpO1xuICAgICAgICAgICAgICAgIF9wYXJlbnQuY3JlYXRlQmFzZXMoZGF0YS5iYXNlcyk7XG4gICAgICAgICAgICAgICAgX3BhcmVudC5jcmVhdGVGb3J0cyhkYXRhLmZvcnRzKTtcbiAgICAgICAgICAgICAgICBfcGFyZW50LmNyZWF0ZUxvZ3MoZGF0YS5yb2xsTG9ncyk7XG4gICAgICAgICAgICAgICAgLy9fcGFyZW50LnNldEFnZW50c0RpcihhZ2VudHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuLypcbiAgICAgICAgTVlfU09DS0VULm9uKCdhZ2VudCcsIGZ1bmN0aW9uIChkYXRhKSB7XG4vLyAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiLS0tLS0tLS1hZ2VudC0tLS0tLS0tLVwiKTtcbiAgICAgICAgICAgIHZhciB0cmFjZURhdGEgPSB7fTtcbiAgICAgICAgICAgIHZhciBhZ2VudHMgPSBkYXRhLmFnZW50cztcbiAgICAgICAgICAgIHZhciBiYXNlcyA9IGRhdGEuYmFzZXM7XG4gICAgICAgICAgICB2YXIgZm9ydHMgPSBkYXRhLmZvcnRzO1xuICAgICAgICAgICAgdmFyIGJ1bGxldHMgPSBkYXRhLmJ1bGxldHM7XG4gICAgICAgICAgICB2YXIgcm9sbExvZ3MgPSBkYXRhLnJvbGxMb2dzO1xuXG4gICAgICAgICAgICBpZihfcGFyZW50Lm1haW5QbGF5ZXIgPT0gMikge1xuICAgICAgICAgICAgICAgIGFnZW50cyA9IF9wYXJlbnQubWlycm9yQWdlbnRzRGF0YShhZ2VudHMpO1xuICAgICAgICAgICAgICAgIGJ1bGxldHMgPSBfcGFyZW50Lm1pcnJvckFnZW50c0RhdGEoYnVsbGV0cyk7XG4gICAgICAgICAgICAgICAgYmFzZXMgPSBfcGFyZW50Lm1pcnJvckJhc2VzRGF0YShiYXNlcyk7XG4gICAgICAgICAgICAgICAgZm9ydHMgPSBfcGFyZW50Lm1pcnJvckFnZW50c0RhdGEoZm9ydHMpO1xuICAgICAgICAgICAgICAgIHJvbGxMb2dzID0gX3BhcmVudC5taXJyb3JBZ2VudHNEYXRhKHJvbGxMb2dzKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdHJhY2VEYXRhLmFnZW50cyA9IGFnZW50cztcbiAgICAgICAgICAgIHRyYWNlRGF0YS5idWxsZXRzID0gYnVsbGV0cztcbiAgICAgICAgICAgIHRyYWNlRGF0YS5iYXNlcyA9IGJhc2VzO1xuICAgICAgICAgICAgdHJhY2VEYXRhLmZvcnRzID0gZm9ydHM7XG4gICAgICAgICAgICB0cmFjZURhdGEucm9sbExvZ3MgPSByb2xsTG9ncztcblxuICAgICAgICAgICAgX3BhcmVudC5nYW1lVHJhY2VTdGFjay5wdXNoKHRyYWNlRGF0YSk7XG5cbiAgICAgICAgICAgIGlmKF9wYXJlbnQuZ2FtZVRyYWNlU3RhY2subGVuZ3RoID4gX3BhcmVudC5idWZmZXJMZW4pIHtcbiAgICAgICAgICAgICAgICBkYXRhID0gX3BhcmVudC5nYW1lVHJhY2VTdGFja1swXTtcbiAgICAgICAgICAgICAgICBfcGFyZW50LmNyZWF0ZUFnZW50cyhkYXRhLmFnZW50cyk7XG4gICAgICAgICAgICAgICAgX3BhcmVudC5jcmVhdGVCdWxsZXRzKGRhdGEuYnVsbGV0cyk7XG4gICAgICAgICAgICAgICAgX3BhcmVudC5jcmVhdGVCYXNlcyhkYXRhLmJhc2VzKTtcbiAgICAgICAgICAgICAgICBfcGFyZW50LmNyZWF0ZUZvcnRzKGRhdGEuZm9ydHMpO1xuICAgICAgICAgICAgICAgIF9wYXJlbnQuY3JlYXRlTG9ncyhkYXRhLnJvbGxMb2dzKTtcbiAgICAgICAgICAgICAgICAvL19wYXJlbnQuc2V0QWdlbnRzRGlyKGFnZW50cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuKi9cbiAgICAgICAgdGhpcy5zdGFydFRyYWNlVGltZXIoKTtcbiAgICB9LFxuXG4gICAgbWlycm9yQWdlbnRzRGF0YV9iYWs6ZnVuY3Rpb24oYWdlbnRzKSB7XG4gICAgICAgIC8vdmFyIGd3aWR0aCA9IHRoaXMubm9kZS53aWR0aC8zODtcbiAgICAgICAgLy92YXIgZ2hlaWdodCA9IHRoaXMubm9kZS5oZWlnaHQvMzg7XG5cbiAgICAgICAgLy90b2RvXG4gICAgICAgIHZhciBnd2lkdGggPSAxNjtcbiAgICAgICAgdmFyIGdoZWlnaHQgPSAzNTtcblxuICAgICAgICBmb3IgKHZhciBpID0gYWdlbnRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICBhZ2VudHNbaV0ubXlwb3MueCA9IGd3aWR0aCAtIGFnZW50c1tpXS5teXBvcy54O1xuICAgICAgICAgICAgYWdlbnRzW2ldLm15cG9zLnkgPSBnaGVpZ2h0IC0gYWdlbnRzW2ldLm15cG9zLnk7XG5cbiAgICAgICAgICAgIGlmKGFnZW50c1tpXS5lbmVteXBvcykge1xuICAgICAgICAgICAgICAgIGFnZW50c1tpXS5lbmVteXBvcy54ID0gZ3dpZHRoIC0gYWdlbnRzW2ldLmVuZW15cG9zLng7XG4gICAgICAgICAgICAgICAgYWdlbnRzW2ldLmVuZW15cG9zLnkgPSBnaGVpZ2h0IC0gYWdlbnRzW2ldLmVuZW15cG9zLnk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vZm9yIGZpcmVib21iIHRob3NlIHdoaWNoIGhhcyBubyBzcGVjaWZpYyBlbm1laWVzLCBqdXN0IGEgdGFyZ2V0IGxvY2F0aW9uLlxuICAgICAgICAgICAgaWYoYWdlbnRzW2ldLnRhcmdldHBvcykge1xuICAgICAgICAgICAgICAgIGFnZW50c1tpXS50YXJnZXRwb3MueCA9IGd3aWR0aCAtIGFnZW50c1tpXS50YXJnZXRwb3MueDtcbiAgICAgICAgICAgICAgICBhZ2VudHNbaV0udGFyZ2V0cG9zLnkgPSBnaGVpZ2h0IC0gYWdlbnRzW2ldLnRhcmdldHBvcy55O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL2FnZW50c1tpXS5yb3QgKz0gMTgwO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gYWdlbnRzO1xuICAgIH0sXG5cbiAgICBtaXJyb3JBZ2VudHNEYXRhOmZ1bmN0aW9uKGFnZW50cykge1xuICAgICAgICAvL3ZhciBnd2lkdGggPSB0aGlzLm5vZGUud2lkdGgvMzg7XG4gICAgICAgIC8vdmFyIGdoZWlnaHQgPSB0aGlzLm5vZGUuaGVpZ2h0LzM4O1xuXG4gICAgICAgIC8vdG9kb1xuICAgICAgICB2YXIgZ3dpZHRoID0gMzU7XG4gICAgICAgIHZhciBnaGVpZ2h0ID0gMTY7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IGFnZW50cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgYWdlbnRzW2ldLm15cG9zLnggPSBnd2lkdGggLSBhZ2VudHNbaV0ubXlwb3MueDtcblxuICAgICAgICAgICAgaWYoYWdlbnRzW2ldLmVuZW15cG9zKSB7XG4gICAgICAgICAgICAgICAgYWdlbnRzW2ldLmVuZW15cG9zLnggPSBnd2lkdGggLSBhZ2VudHNbaV0uZW5lbXlwb3MueDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9mb3IgZmlyZWJvbWIgdGhvc2Ugd2hpY2ggaGFzIG5vIHNwZWNpZmljIGVubWVpZXMsIGp1c3QgYSB0YXJnZXQgbG9jYXRpb24uXG4gICAgICAgICAgICBpZihhZ2VudHNbaV0udGFyZ2V0cG9zKSB7XG4gICAgICAgICAgICAgICAgYWdlbnRzW2ldLnRhcmdldHBvcy54ID0gZ3dpZHRoIC0gYWdlbnRzW2ldLnRhcmdldHBvcy54O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL2FnZW50c1tpXS5yb3QgKz0gMTgwO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gYWdlbnRzO1xuICAgIH0sXG5cbiAgICBtaXJyb3JCdWZmRGF0YTpmdW5jdGlvbihidWZmKSB7XG4gICAgICAgIHZhciBnd2lkdGggPSB0aGlzLm5vZGUud2lkdGgvMzA7XG4gICAgICAgIHZhciBnaGVpZ2h0ID0gdGhpcy5ub2RlLmhlaWdodC8zMDtcblxuICAgICAgICBidWZmLm15cG9zLnggPSBnd2lkdGggLSBidWZmLm15cG9zLng7XG4gICAgICAgIGJ1ZmYubXlwb3MueSA9IGdoZWlnaHQgLSBidWZmLm15cG9zLnk7XG5cbiAgICAgICAgcmV0dXJuIGJ1ZmY7XG4gICAgfSxcblxuICAgIG1pcnJvckJhc2VzRGF0YTpmdW5jdGlvbihiYXNlcykge1xuICAgICAgICB2YXIgZ3dpZHRoID0gdGhpcy5ub2RlLndpZHRoLzMwO1xuICAgICAgICB2YXIgZ2hlaWdodCA9IHRoaXMubm9kZS5oZWlnaHQvMzA7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IGJhc2VzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICBpZihiYXNlc1tpXS5vYmplY3RJZCA9PSAxKSB7XG4gICAgICAgICAgICAgICAgYmFzZXNbaV0ub2JqZWN0SWQgPSA0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZihiYXNlc1tpXS5vYmplY3RJZCA9PSAyKSB7XG4gICAgICAgICAgICAgICAgYmFzZXNbaV0ub2JqZWN0SWQgPSA2O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZihiYXNlc1tpXS5vYmplY3RJZCA9PSAzKSB7XG4gICAgICAgICAgICAgICAgYmFzZXNbaV0ub2JqZWN0SWQgPSA1O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBlbHNlIGlmKGJhc2VzW2ldLm9iamVjdElkID09IDQpIHtcbiAgICAgICAgICAgICAgICBiYXNlc1tpXS5vYmplY3RJZCA9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmKGJhc2VzW2ldLm9iamVjdElkID09IDYpIHtcbiAgICAgICAgICAgICAgICBiYXNlc1tpXS5vYmplY3RJZCA9IDI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmKGJhc2VzW2ldLm9iamVjdElkID09IDUpIHtcbiAgICAgICAgICAgICAgICBiYXNlc1tpXS5vYmplY3RJZCA9IDM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vaW4gbWlycm9yIG1vZGUsIHgsIHkgc2hvdWxkIGJlIGFqdXN0ZWQuXG4gICAgICAgICAgICBiYXNlc1tpXS5teXBvcy54ID0gZ3dpZHRoIC0gYmFzZXNbaV0ubXlwb3MueC0xO1xuICAgICAgICAgICAgYmFzZXNbaV0ubXlwb3MueSA9IGdoZWlnaHQgLSBiYXNlc1tpXS5teXBvcy55O1xuXG4gICAgICAgICAgICBpZihiYXNlc1tpXS5lbmVteXBvcykge1xuICAgICAgICAgICAgICAgIGJhc2VzW2ldLmVuZW15cG9zLnggPSBnd2lkdGggLSBiYXNlc1tpXS5lbmVteXBvcy54LTE7XG4gICAgICAgICAgICAgICAgYmFzZXNbaV0uZW5lbXlwb3MueSA9IGdoZWlnaHQgLSBiYXNlc1tpXS5lbmVteXBvcy55O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL2ZvciBmaXJlYm9tYiB0aG9zZSB3aGljaCBoYXMgbm8gc3BlY2lmaWMgZW5tZWllcywganVzdCBhIHRhcmdldCBsb2NhdGlvbi5cbiAgICAgICAgICAgIGlmKGJhc2VzW2ldLnRhcmdldHBvcykge1xuICAgICAgICAgICAgICAgIGJhc2VzW2ldLnRhcmdldHBvcy54ID0gZ3dpZHRoIC0gYmFzZXNbaV0udGFyZ2V0cG9zLngtMTtcbiAgICAgICAgICAgICAgICBiYXNlc1tpXS50YXJnZXRwb3MueSA9IGdoZWlnaHQgLSBiYXNlc1tpXS50YXJnZXRwb3MueTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGJhc2VzO1xuICAgIH0sXG5cbiAgICBkaXNjb25uZWN0U2VydmVyOmZ1bmN0aW9uKCkge1xuICAgICAgICBNWV9TT0NLRVQuZGlzY29ubmVjdCgpOyAgICAgXG4gICAgfSxcblxufSk7XG4iXX0=