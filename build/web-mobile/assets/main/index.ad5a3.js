window.__require=function e(t,n,o){function i(s,a){if(!n[s]){if(!t[s]){var l=s.split("/");if(l=l[l.length-1],!t[l]){var c="function"==typeof __require&&__require;if(!a&&c)return c(l,!0);if(r)return r(l,!0);throw new Error("Cannot find module '"+s+"'")}s=l}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){return i(t[s][1][e]||e)},u,u.exports,e,t,n,o)}return n[s].exports}for(var r="function"==typeof __require&&__require,s=0;s<o.length;s++)i(o[s]);return i}({AgentObj:[function(e,t){"use strict";cc._RF.push(t,"de37fFOB2lBv76OrGfwhKh/","AgentObj"),cc.Class({extends:cc.Component,properties:{},start:function(){},setTotalLife:function(e){this.totalLife=e},setLife:function(e){this.life=e,this.blood.getComponent("BloodBar").setBloodBar(this.life,this.totalLife)},setGroupKill:function(e){this.groupKill=e},setBloodLevel:function(){},setBlood:function(e){this.blood=e,this.blood.active=!0}}),cc._RF.pop()},{}],AllCard:[function(e,t){"use strict";cc._RF.push(t,"9b622jQnM9HZLCxDURFLjs8","AllCard"),cc.Class({extends:cc.Component,properties:{seleRole:"ske",magicCost:1,level:1,disp:""},onLoad:function(){},start:function(){this.isMoving=!1,this.seleInnerId="",this.setInitImgByRole(),this.setRoleCost(),this.setRoleDisp()},setCardStatus:function(e){var t=this.node.getChildByName("useButton"),n=this.node.getChildByName("click");t.getChildByName("disp").getComponent("cc.Label"),e?(t.getComponent(cc.Button).interactable=!1,n.getComponent(cc.Button).interactable=!1):(t.getComponent(cc.Button).interactable=!0,n.getComponent(cc.Button).interactable=!0)},grey:function(e){this.node.getChildByName("useButton"),this.node.opacity=e?100:255},userButClick:function(){this.node.parent.getComponent("SelLayout").seleOneCard(this.seleRole)},setRole:function(e,t,n){this.seleRole=e,this.magicCost=t,this.disp=n},getLayoutNode:function(){return this.node.parent.getChildByName("layout")},setRoleCost:function(){this.node.getChildByName("ringMark").getChildByName("cost").getComponent("cc.Label").string=this.magicCost},setRoleDisp:function(){this.node.getChildByName("useButton").getChildByName("disp").getComponent("cc.Label").string=this.disp},setSelImg:function(e){var t=this.node.getChildByName("icon");cc.loader.loadRes(e,cc.SpriteFrame,function(e,n){t.active=!0,t.getComponent(cc.Sprite).spriteFrame=n})},setInitImgByRole:function(){"ske"==this.seleRole?this.setSelImg("sel_cards/ske"):"lr"==this.seleRole?this.setSelImg("sel_cards/lieren"):"gi"==this.seleRole?this.setSelImg("sel_cards/rockman"):"log"==this.seleRole?this.setSelImg("sel_cards/log"):"bomb"==this.seleRole?this.setSelImg("sel_cards/bomb"):"bee"==this.seleRole?this.setSelImg("sel_cards/bee"):"wiz"==this.seleRole?this.setSelImg("sel_cards/wiz"):"hr"==this.seleRole?this.setSelImg("sel_cards/hero"):"lm"==this.seleRole?this.setSelImg("sel_cards/lightman"):"fa"==this.seleRole?this.setSelImg("sel_cards/fortA"):"ir"==this.seleRole&&this.setSelImg("sel_cards/ironman")}}),cc._RF.pop()},{}],ArcSprite:[function(e,t){"use strict";cc._RF.push(t,"58c5bfG9UVBHrbtlPel5W/y","ArcSprite");var n=e("MySprite"),o=e("Common");cc.Class({extends:n,properties:{role:"lr"},start:function(){this._animation=this.getComponent(cc.Animation),this._animation.WrapMode=cc.WrapMode.Loop,null==this.layoutOp&&(this.layoutOp=this.node.parent.parent.getComponent("Game"))},remove:function(){this._animation.play("dieoff2"),this.shadow.destroy(),this.blood.destroy()},dieStart:function(){console.log("die start")},dieEnd:function(){console.log("die end"),this._animation.play("footprint")},footStart:function(){console.log("foot start")},footEnd:function(){console.log("foot end"),this.node.destroy()},footPrint:function(){this.node.zIndex=-1,this.node.scaleX=1,this.node.scaleY=1},beforeKill:function(){},afterKill:function(){console.log("--remove archer node--"),this.node.destroy()},frame1Evt:function(){this.dispShadow(1)},frame2Evt:function(){this.dispShadow(2)},frame3Evt:function(){this.dispShadow(3)},frame4Evt:function(){this.dispShadow(4)},frame5Evt:function(){this.dispShadow(5)},frame6Evt:function(){this.dispShadow(6)},frame7Evt:function(){this.dispShadow(7)},aFrame1Evt:function(){this.layoutOp.playSnd("lr")},aFrame2Evt:function(){},aFrame3Evt:function(){},aFrame4Evt:function(){},aFrame5Evt:function(){},playAni:function(e,t,n){this.playAngleAnimationRemote(e,t,n)},isEnemyBase:function(e){return 1==e||2==e||3==e},isEnemyFort:function(e,t){return!(!e||2!=t)||!e&&1==t},playBaseWarriorAnimationDefault:function(e,t){var n;if(n=this.isEnemyBase(t)?"lr_s_walk":"lr_n_walk","move"!=e||this.lastAct!=n){var o=Math.ceil(125*Math.random())/100;this._animation.play(n,o),this.lastAct=n}},playFortWarriorAnimationDefault:function(e,t,n){var o;if(o=this.isEnemyFort(t,n)?"lr_s_walk":"lr_n_walk","move"!=e||this.lastAct!=o){var i=Math.ceil(125*Math.random())/100;this._animation.play(o,i),this.lastAct=o}},playBaseWarriorAnimation:function(e,t,n){var i,r,s,a,l,c,u,f=o.attackTargetYOffset,h=e.mypos.x,p=e.mypos.y,d=Math.ceil(125*Math.random())/100,y="",m=1;if(1==t?m=1:2==t&&(m=-1),i=e.enemypos.x,r=e.enemypos.y,a=cc.v2(30*h,30*p),l=cc.v2(30*i,30*r+f*m),0!=(c=a.sub(l)).x||0!=c.y){if(0==c.x&&(c.x=.1),0==c.y&&(c.y=.1),0!=c.x&&0!=c.y){var g=180/Math.PI*Math.atan(c.x/c.y);s=g,c.y>=0&&(s=g+180)}this._animation&&(y=(u=this.getActnameByAngle(s,n)).actName,this.node.scaleX=u.scaleX,this.lastAct==y&&"sa"!=n||("sa"==n?(this._animation.stop(),this._animation.play(y)):this._animation.play(y,d),this.angle=s,this.lastAct=y,this.lastScaleX=u.scaleX))}}}),cc._RF.pop()},{Common:"Common",MySprite:"MySprite"}],Arrow:[function(e,t){"use strict";cc._RF.push(t,"fdf0cPTnAZOpoVbhBQTF5fi","Arrow"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this._animation=this.getComponent(cc.Animation),this._animation.WrapMode=cc.WrapMode.Default},start:function(){},onend:function(){}}),cc._RF.pop()},{}],BaseSprite:[function(e,t){"use strict";cc._RF.push(t,"22a8a7Kh7NNgJLrjEdbIjIr","BaseSprite"),cc.Class({extends:cc.Component,properties:{basePosY:28},onLoad:function(){this.isBase()&&(this.node.zIndex=1e3+parseInt(32-this.basePosY-2)),this._animation=this.getComponent(cc.Animation)},isBase:function(){return!!this.node._name.startWith("base")},setZIndex:function(e){this.node.zIndex=e},setTotalLife:function(e){this.totalLife=e},setLife:function(e){this.life=e,this.blood.getComponent("BloodBar").setBloodBar(this.life,this.totalLife)},setBloodLevel:function(){},setBloodBar:function(e){var t=this.blood.getChildByName("bar"),n=this.blood.width;t.width=e/this.totalLife*n},setBlood:function(e){this.blood=e,this.blood.active=!0},remove:function(){},frameStartEvt:function(){console.log("first.")},frameEndEvt:function(){console.log("last.")}}),cc._RF.pop()},{}],BeeSprite:[function(e,t){"use strict";cc._RF.push(t,"b3c5ccJhe1KRrAvyoLJxi+i","BeeSprite");var n=e("MySprite");cc.Class({extends:n,properties:{role:"bee"},start:function(){},shootArrow:function(){},getAttackDistance:function(e){return.6*(e.size+e.esize)},playAni:function(e,t,n){this.node.zIndex=9999,this.playAngleAnimationNear(e,t,n)},remove:function(){this._animation.play("dieoff2"),this.shadow.destroy(),this.blood.destroy()},dieStart:function(){this.node.scaleX=.8,this.node.scaleY=.8},dieEnd:function(){this._animation.play("footprint")},footStart:function(){this.node.zIndex=-1},footEnd:function(){this.node.destroy()},beforeKill:function(){},afterKill:function(){this.node.destroy()},frame1Evt:function(){},frame2Evt:function(){},frame3Evt:function(){},frame4Evt:function(){},frame5Evt:function(){},frame6Evt:function(){},frame7Evt:function(){}}),cc._RF.pop()},{MySprite:"MySprite"}],BloodBar:[function(e,t){"use strict";cc._RF.push(t,"9d601PjDUNLg5RyV8ikyzg8","BloodBar"),String.prototype.startWith=function(e){return new RegExp("^"+e).test(this)},cc.Class({extends:cc.Component,properties:{hp:-1,barWidth:50,upToHead:30,level:1,role:""},onLoad:function(){this.node.active=!1,this.setBarWidth(),this.isBase()?this.setLoc(0,this.node.parent.height/2+20):this.isFort1()?this.setLoc(0,this.node.parent.height/2+60):this.setLoc(0,this.node.parent.height)},setBarWidth:function(){var e=this.node.getChildByName("bar"),t=this.node.getChildByName("level");this.isBase()?this.node.width=80:this.isFort1()?this.node.width=50:this.node.width=30,e.x=this.node.width/2*-1,t.x=e.x-5},isBase:function(){return!!this.node.parent._name.startWith("base")},isFort1:function(){return"FortASprite"==this.node.parent.spName},setLoc:function(e,t){var n=cc.v2(e,t);this.node.setPosition(n)},setBarLevel:function(e){void 0===e&&(e=1),this.node.getChildByName("level").getComponent(cc.Label).string=e},setBloodBar:function(e,t){e<t&&(this.node.active=!0);var n=this.node.getChildByName("bar"),o=this.node.width;n.width=e/t*o,n.color=e<.35*t?new cc.Color(250,0,0):new cc.Color(50,250,0)}}),cc._RF.pop()},{}],BombScript:[function(e,t){"use strict";cc._RF.push(t,"ecfc8GKFiNJi73X5NyLqJ8C","BombScript"),cc.Class({extends:cc.Component,properties:{},init:function(){},start:function(){},footPrint:function(){},playBombEffect:function(){},beforeKill:function(){},afterKill:function(){console.log("--remove bomb node--"),this.node.destroy()}}),cc._RF.pop()},{}],Bomb:[function(e,t){"use strict";cc._RF.push(t,"064984QJhNOW5zJ+swcipxH","Bomb"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.getComponent(cc.Animation).play("small")},start:function(){}}),cc._RF.pop()},{}],BuffProcess:[function(e,t){"use strict";cc._RF.push(t,"02042YX8NVNK4tzeVlz3Yt6","BuffProcess"),cc.Class({extends:cc.Component,properties:{},start:function(){this.node.zIndex=9999},thunder_end:function(){this.node.destroy()},heal_end:function(){this.node.destroy()}}),cc._RF.pop()},{}],Common:[function(e,t){"use strict";cc._RF.push(t,"af885xQixFGPovNcyyj+R7f","Common"),t.exports={attackTargetYOffset:45},cc._RF.pop()},{}],Dictionary:[function(e,t){"use strict";cc._RF.push(t,"979d5olSJND5q06NI+w9ly+","Dictionary"),cc.Class({_keyMapTb:null,_valueMapTb:null,__currId:0,ctor:function(){this._keyMapTb={},this._valueMapTb={},this.__currId=2<<(0|10*Math.random())},__getKey:function(){return this.__currId++,"key_"+this.__currId},setObject:function(e,t){if(null!=t){var n=this.__getKey();this._keyMapTb[n]=t,this._valueMapTb[n]=e}},objectForKey:function(e){if(null==e)return null;var t=this._keyMapTb;for(var n in t)if(t[n]===e)return this._valueMapTb[n];return null},valueForKey:function(e){return this.objectForKey(e)},removeObjectForKey:function(e){if(null!=e){var t=this._keyMapTb;for(var n in t)if(t[n]===e)return delete this._valueMapTb[n],void delete t[n]}},removeObjectsForKeys:function(e){if(null!=e)for(var t=0;t<e.length;t++)this.removeObjectForKey(e[t])},allKeys:function(){var e=[],t=this._keyMapTb;for(var n in t)e.push(t[n]);return e},removeAllObjects:function(){this._keyMapTb={},this._valueMapTb={}},count:function(){return this.allKeys().length}}),cc._RF.pop()},{}],EffectSprite:[function(e,t){"use strict";var n;function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cc._RF.push(t,"6172fstN/ZA5rLXNIqCyFp/","EffectSprite"),cc.Class((o(n={extends:cc.Component,properties:{role:""},start:function(){"fd"==this.role?this.node.zIndex=9999:"firecircle"==this.role?this.node.zIndex=9999:"light"==this.role?this.node.zIndex=9999:"doubleMagic"==this.role&&(this.node.zIndex=9999)},spinEffectEndEvt:function(){this.node.destroy()},wizfireEffectEndEvt:function(){this.node.destroy()},lightEffectEndEvt:function(){this.node.destroy()},fd_frame5Evt:function(){this.node.zIndex=9999}},"fd_frame5Evt",function(){this.node.zIndex=-1}),o(n,"fd_EffectEndEvt",function(){this.node.destroy()}),o(n,"doubleMagic_dispEnd",function(){this.node.destroy()}),n)),cc._RF.pop()},{}],GameData:[function(e,t){"use strict";cc._RF.push(t,"8204dK680RKmLHLtijslCkm","GameData"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.game.addPersistRootNode(this.node),this.name=this.getRandomCharName(),this.nick=this.name,this.isUpgrade=!1,this.agentsDef={name:"test01",level:1,myscore:2300,nextscore:3500,basescore:15,allList:["log","bomb","ske","ir","hr","bee","gi","lm","lr","wiz"],myList:["log","hr","bee","ske"],log:{level:1,cost:3},bomb:{level:1,cost:4},ske:{level:1,cost:1},ir:{level:1,cost:3},hr:{level:1,cost:4},bee:{level:1,cost:1},gi:{level:1,cost:4},lm:{level:1,cost:3},lr:{level:1,cost:2},wiz:{level:1,cost:5}}},start:function(){},getRandomCharName:function(){for(var e=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t="",n=0;n<6;n++)t+=e[Math.floor(Math.random()*e.length)];return t},httpPost:function(e,t,n,o){var i="https://www.asobee.mobi/fftower/ffinfo.php?uid="+e;return n&&o&&(i+="&fd="+n+"&file="+o),new Promise(function(e,n){var o=cc.loader.getXMLHttpRequest();o.onreadystatechange=function(){if(cc.log("xhr.readyState="+o.readyState+"  xhr.status="+o.status),4===o.readyState&&o.status>=200&&o.status<300){var t=o.responseText;e(t)}else 4===o.readyState&&401==o.status?n("err"):4===o.readyState&&0==o.status&&n("err")},o.open("GET",i,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send(t)})},winScore:function(e){this.agentsDef.myscore+=e,this.setMyScore(this.agentsDef.myscore)},setWxUser:function(e){var t=e.avatarUrl.split("/"),n=t[t.length-2],o=n.substring(0,6),i=n.substring(n.length-6);this.name=o+i,this.nick=e.nickName},setData:function(e){this.agentsDef=e},getName:function(){return this.name},getNick:function(){return this.nick},getData:function(){return this.agentsDef},setMyList:function(e){this.agentsDef.myList=e,this.httpPost(this.name,"","list",e).then(function(e){console.log("------------setMyList------------------"),console.log(e)},function(e){console.log(e)})},setUpgrade:function(){this.isUpgrade=!1},setMyScore:function(e){var t=this;this.agentsDef.myscore=e,this.httpPost(this.name,"","score",e).then(function(e){console.log("------------setMyScore------------------"),console.log(e),"uped"==e&&(t.isUpgrade=!0)},function(e){console.log(e)})}}),cc._RF.pop()},{}],GameProvider:[function(e,t){"use strict";function n(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=o(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r,s=!0,a=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return s=e.done,e},e:function(e){a=!0,r=e},f:function(){try{s||null==i.return||i.return()}finally{if(a)throw r}}}}function o(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}cc._RF.push(t,"fbdd5ReyFxHioXVNcTwoYt5","GameProvider"),String.prototype.inArray=function(e){e||console.log("ERR(in_array):Input is not an array");for(var t=0,n=e.length;t<n;t++)if(this==e[t])return!0;return!1},Array.prototype.removeByValue=function(e){for(var t=0;t<this.length;t++)if(this[t]==e){this.splice(t,1);break}},Array.prototype.minus=function(e){for(var t=new Array,n={},o=0;o<e.length;o++)n[e[o]]=1;for(var i=0;i<this.length;i++)n[this[i]]||(n[this[i]]=1,t.push(this[i]));return t};var r=e("SocketProvider");cc.Class({extends:r,properties:{},hideDragItem:function(e){this.putSele[e]&&(this.putSele[e].destroy(),this.putSele[e]=null)},createBuff:function(e){var t,n,o;this.node.parent,1==e.typeId?(this.playSnd("thunder"),t=cc.instantiate(this.playerPrefab[23])):2==e.typeId&&(this.playSnd("heal"),t=cc.instantiate(this.playerPrefab[24])),this.dispCharSele(),this.putSele[e.innerId]&&this.putSele[e.innerId].parent.destroy(),this.clickSele={},n=30*e.mypos.x,o=30*e.mypos.y;var i=cc.v2(n,o);t.setPosition(i),this.node.addChild(t)},createAgents:function(e){for(var t,n,o,i,r,s,a=0;a<e.length;a++)if(t=(o=e[a]).aid,n=this.npcInfo.objectForKey(t),r=30*o.mypos.x,s=30*o.mypos.y,null==n){if(this.hideDragItem(o.innerId),"ske"==o.role)n=cc.instantiate(this.playerPrefab[0]);else if("ir"==o.role)n=cc.instantiate(this.playerPrefab[20]);else if("bee"==o.role)n=cc.instantiate(this.playerPrefab[16]);else if("wiz"==o.role)n=cc.instantiate(this.playerPrefab[17]);else if("hr"==o.role)n=cc.instantiate(this.playerPrefab[12]);else if("lm"==o.role)n=cc.instantiate(this.playerPrefab[14]);else if("lr"==o.role)n=cc.instantiate(this.playerPrefab[3]);else{if("gi"!=o.role)continue;n=cc.instantiate(this.playerPrefab[4])}n.name=t,n.type="agent",n.active=!0,n.role=o.role,n.size=o.size,n.level=o.level,(i=this.getComponentByRole(n)).init(),i.setId(t),i.setShadow(this.shadowForAgent()),i.setTotalLife(o.life),i.setBlood(this.bloodForAgent(n)),1==this.mainPlayer?o.rot=180:2==this.mainPlayer&&(o.rot=0),r=30*o.mypos.x,s=30*o.mypos.y,i.updatePos(r,s),this.node.addChild(n),this.npcInfo.setObject(n,t)}},createBullets:function(e){for(var t,n,o,i,r=0;r<e.length;r++)if(t=(o=e[r]).aid,null==(n=this.npcInfo.objectForKey(t))){"bullet"==o.role?((n=cc.instantiate(this.playerPrefab[1])).startPos=o.mypos,n.active=!1):"bomb"==o.role?(console.log("bomb created"),this.playSnd("fireSend"),this.hideDragItem(o.innerId),n=cc.instantiate(this.playerPrefab[5]),i=this.enemeyDistance(o.mypos.x,o.mypos.y,o.targetpos.x,o.targetpos.y),n.startPos=o.mypos,n.targetDis=i):"tama"==o.role?(this.playSnd("gun"),(n=cc.instantiate(this.playerPrefab[9])).startPos=o.mypos,n.active=!1):"wizfire"==o.role?((n=cc.instantiate(this.playerPrefab[18])).startPos=o.mypos,n.active=!1):console.log("error, no bullet type."),n.name=t,n.type="bullet",n.role=o.role,n.updown=o.updown,n.zIndex=9999,this.getComponentByRole(n),this.node.addChild(n);var s=cc.v2(-1e3,-1e3),a=o.rot;1==this.mainPlayer&&(a+=180),n.angle=-1*a,n.setPosition(s),this.npcInfo.setObject(n,t)}},createBases:function(e){for(var t,n,o,i,r,s=0;s<e.length;s++)t=(o=e[s]).aid,null==(n=this.npcInfo.objectForKey(t))&&((n={}).name=t,n.type="base",n.active=!0,n.role=o.role,n.mypos=o.mypos,n.size=o.size,i="base"+o.objectId,n.baseObj=this.node.getChildByName(i),(r=n.baseObj.getComponent("BaseSprite")).setTotalLife(o.life),r.setBlood(this.bloodForAgent(n.baseObj)),r.setLife(o.life),this.npcInfo.setObject(n,t))},createLogs:function(e){for(var t,n,o,i,r,s,a=0;a<e.length;a++)if(t=(o=e[a]).aid,n=this.npcInfo.objectForKey(t),r=30*o.mypos.x,s=30*o.mypos.y,null==n){this.hideDragItem(o.innerId),(n=cc.instantiate(this.playerPrefab[8])).name=t,n.type="log",n.active=!0,n.role=o.role,(i=this.getComponentByRole(n)).setId(t),i.setShadow(this.shadowForLog());var l=cc.v2(r,s);i.move(l),this.node.addChild(n),this.playSnd("log"),this.npcInfo.setObject(n,t)}},createForts:function(e){for(var t,n,o,i,r,s,a,l=0;l<e.length;l++)if(t=(o=e[l]).aid,n=this.npcInfo.objectForKey(t),r=30*o.mypos.x,s=30*o.mypos.y,null==n){this.hideDragItem(o.innerId),(n=cc.instantiate(this.playerPrefab[7])).name=t,n.type="fa",n.spName="FortASprite",n.active=!0,n.role=o.role,n.size=o.size,1==this.mainPlayer?a=1001+parseInt(32-o.mypos.y-1):2==this.mainPlayer&&(a=1001+parseInt(32-o.mypos.y-1)),n.zIndex=a,(i=this.getComponentByRole(n)).setZIndex(a),i.setTotalLife(o.life),i.setBlood(this.bloodForAgent(n)),1==this.mainPlayer?o.rot=180:2==this.mainPlayer&&(o.rot=0);var c=cc.v2(r,s);n.setPosition(c),this.node.addChild(n),this.npcInfo.setObject(n,t)}},agentProcess:function(e){for(var t,o,i=[],r=0;r<e.length;r++)i.push(e[r].aid);var s,a=n(this.npcInfo.allKeys().minus(i));try{for(a.s();!(s=a.n()).done;)o=s.value,"agent"==(t=this.npcInfo.objectForKey(o)).type&&(this.getComponentByRole(t).remove(),this.removedNpcInfo.setObject(t,o),this.npcInfo.removeObjectForKey(o))}catch(l){a.e(l)}finally{a.f()}},baseProcess:function(e){for(var t,o,i=[],r=[],s=0;s<e.length;s++)o="base"+e[s].objectId,i.push(o),r.push(o);var a,l=n(this._defaultBases.minus(i));try{for(l.s();!(a=l.n()).done;)o=a.value,this.dispLayoutMask(r,o),this._defaultBases.removeByValue(o),t=this.node.getChildByName(o),this.node.removeChild(t),this.playEffect("base",t.x,t.y)}catch(c){l.e(c)}finally{l.f()}},plusBaseKillNum:function(e){var t=this.node.getChildByName("upFlag").getChildByName("ringMark").getChildByName("killnum").getComponent("cc.Label"),n=this.node.getChildByName("downFlag").getChildByName("ringMark").getChildByName("killnum").getComponent("cc.Label");e.inArray(["base1","base2","base3"])?t.string=parseInt(t.string)+1:n.string=parseInt(t.string)+1},killBases:function(e){var t,o,i,r=n("up"==e?["base1","base2","base3"]:["base4","base5","base6"]);try{for(r.s();!(i=r.n()).done;)o=i.value,(t=this.node.getChildByName(o))&&(this.playEffect("base",t.x,t.y),this.node.removeChild(t))}catch(s){r.e(s)}finally{r.f()}},undisplayMask:function(e){console.log(e),this.node.getChildByName(e).active=!1},dispLayoutMask:function(e,t){"base4"!=t&&"base5"!=t&&"base6"!=t&&("base1".inArray(e)&&"base2".inArray(e)?this.showMask("seleMask12",2):"base1".inArray(e)&&"base3".inArray(e)?this.showMask("seleMask13",2):"base1".inArray(e)&&this.showMask("seleMask1",2))},showDragMask:function(e){this.ifNotMaskRole(e)||(this.node.getChildByName(this.maskType).active=!0)},unshowDragMask:function(){this.node.getChildByName(this.maskType).active=!1},showMask:function(e,t){var n=this;this.maskType=e,this.node.getChildByName(e).active=!0,this.scheduleOnce(function(){n.undisplayMask(e)},t)},putErrorMsg:function(){var e=this;this.node.getChildByName("putError").active=!0,this.scheduleOnce(function(){e.undisplayPutErr()},1)},undisplayPutErr:function(){this.node.getChildByName("putError").active=!1},fortProcess:function(e){for(var t,o,i=[],r=0;r<e.length;r++)i.push(e[r].aid);var s,a=n(this.npcInfo.allKeys().minus(i));try{for(a.s();!(s=a.n()).done;)o=s.value,"fa"==(t=this.npcInfo.objectForKey(o)).type&&(this.playEffect("fort",t.x,t.y),this.node.removeChild(t),this.removedNpcInfo.setObject(t,o),this.npcInfo.removeObjectForKey(o),this.playEffect("base",t.x,t.y))}catch(l){a.e(l)}finally{a.f()}},logProcess:function(e){for(var t,o,i=[],r=0;r<e.length;r++)i.push(e[r].aid);var s,a=n(this.npcInfo.allKeys().minus(i));try{for(a.s();!(s=a.n()).done;)o=s.value,"log"==(t=this.npcInfo.objectForKey(o)).role&&(this.playEffect("log",t.x,t.y),this.getComponentByRole(t).remove(),this.removedNpcInfo.setObject(t,o),this.npcInfo.removeObjectForKey(o))}catch(l){a.e(l)}finally{a.f()}},bulletProcess:function(e){for(var t,o,i=[],r=0;r<e.length;r++)i.push(e[r].aid);var s,a=n(this.npcInfo.allKeys().minus(i));try{for(a.s();!(s=a.n()).done;)o=s.value,"bomb"==(t=this.npcInfo.objectForKey(o)).role&&(this.getComponentByRole(t),t.destroy(),this.removedNpcInfo.setObject(t,o),this.npcInfo.removeObjectForKey(o),this.playEffect("bomb",t.x,t.y)),"wizfire"==t.role?(this.getComponentByRole(t),t.destroy(),this.removedNpcInfo.setObject(t,o),this.npcInfo.removeObjectForKey(o),t.x&&t.y&&this.playEffect("wizfire",t.x,t.y)):"bullet"!=t.role&&"tama"!=t.role||(this.getComponentByRole(t),t.destroy(),this.removedNpcInfo.setObject(t,o),this.npcInfo.removeObjectForKey(o))}catch(l){a.e(l)}finally{a.f()}},startSceneJitter:function(){var e=this.node,t=e.x,n=e.y,o=0,i=this.node,r=cc.delayTime(1/30),s=cc.callFunc(function(){o++;var i=Math.floor(8*Math.random())+-4,r=Math.floor(8*Math.random())+-4;e.x+=i,e.y+=r,o>=10&&(e.stopAllActions(),e.x=t,e.y=n)}),a=cc.sequence(r,s);i.runAction(cc.repeatForever(a))},playBases:function(e){for(var t,n,o,i,r,s=[],a={},l=0;l<e.length;l++)o="base"+(n=e[l]).objectId,n.attackDura,t=this.npcInfo.objectForKey(n.aid).baseObj,a[n.aid]=o,s.push(o),n.actType,t&&(t.getComponent("BaseSprite").setLife(n.life),(r=t.getChildByName("warrior"))&&(r.role="lr",i=this.getComponentByRole(r),t&&"wait"==n.actType?i.playBaseWarriorAnimationDefault("move",n.objectId):t&&"sa"==n.actType&&i.playBaseWarriorAnimation(n,this.mainPlayer,"sa")),(r=t.getChildByName("gun"))&&(r.role="gun",i=this.getComponentByRole(r),t&&"wait"==n.actType||t&&"sa"==n.actType&&i.playBaseWarriorAnimation(n,this.mainPlayer,"sa")))},playAgents:function(e,t){for(var n,o,i,r,s,a=0;a<e.length;a++)s=e[a],(n=this.npcInfo.objectForKey(s.aid))&&"agent"==n.type&&((r=this.getComponentByRole(n)).playAni(s,this.getFutureAgent(s.aid,t),this.mainPlayer),r.setLife(s.life),r.setGroupKill(s.groupKill),o=Math.round(30*s.mypos.x),i=Math.round(30*s.mypos.y),r.updatePos(o,i))},playForts:function(e){for(var t,n,o,i=null,r=0;r<e.length;r++)o=e[r],(t=this.npcInfo.objectForKey(o.aid))&&(t.role="fa",(n=this.getComponentByRole(t)).setLife(o.life),(i=t.getChildByName("warrior")).role="lr",n=this.getComponentByRole(i),t&&"move"==o.actType?n.playFortWarriorAnimationDefault("move",o.isHero,this.mainPlayer):t&&"sa"==o.actType&&n.playBaseWarriorAnimation(o,this.mainPlayer,"sa"))},playLogs:function(e){for(var t,n,o=0;o<e.length;o++)t=e[o],(n=this.npcInfo.objectForKey(t.aid))&&this.getComponentByRole(n).move(t.mypos)},playBullets:function(e){for(var t,n,o,i,r,s,a,l=0;l<e.length;l++)if(i=e[l],t=this.npcInfo.objectForKey(i.aid)){if(t.active=!0,this.getComponentByRole(t),"bomb"==t.role&&(r=this.getFireBombScale(i.mypos,i.targetpos,t.targetDis,t.startPos),t.scaleX=r,t.scaleY=r),"up"==i.updown&&2==this.mainPlayer)continue;if("down"==i.updown&&1==this.mainPlayer)continue;n=30*i.mypos.x,o=30*i.mypos.y,s=cc.v2(n,o),a=i.rot,1==this.mainPlayer&&(a+=180),t.zIndex=1e3+parseInt(32-i.mypos.y),"bomb"!=t.role&&"wizfire"!=t.role||(t.zIndex=9999),t.angle=-1*a,t.setPosition(s)}},getFireBombScale:function(e,t,n,o){var i={};i.x=o.x+(t.x-o.x)/2,i.y=o.y+(t.y-o.y)/2;var r=e.x-i.x,s=e.y-i.y;return.7*((n*=.5)-Math.sqrt(r*r+s*s))/n+.5},enemeyDistance:function(e,t,n,o){var i,r;return i=e-n,r=t-o,Math.sqrt(i*i+r*r)},getComponentByRole:function(e){var t=e.role;return"ske"==t?e.getComponent("SkeSprite"):"ir"==t?e.getComponent("SkeSprite"):"bee"==t?e.getComponent("BeeSprite"):"wiz"==t?e.getComponent("WizSprite"):"hr"==t?e.getComponent("HeroSprite"):"lm"==t?e.getComponent("LightmanSprite"):"lr"==t?e.getComponent("ArcSprite"):"gi"==t?e.getComponent("GiantSprite"):"bullet"==t?e.getComponent("Arrow"):"bomb"==t?e.getComponent("BombScript"):"log"==t?e.getComponent("LogSprite"):"gun"==t?e.getComponent("GunSprite"):"base"==t?e.getComponent("BaseSprite"):"fa"==t?e.getComponent("BaseSprite"):void 0},getKilledEnemies:function(){for(var e,t=this.removedNpcInfo.allKeys(),n=[],o=0;o<t.length;o++)e=t[o],n.push(this.removedNpcInfo.objectForKey(e));return n},getFutureAgent:function(e,t){for(var n=0;n<t.length;n++)if(t[n].aid==e)return t[n];return null},bloodForAgent:function(e){var t=cc.instantiate(this.playerPrefab[11]);return t.getComponent("BloodBar").setBarLevel(e.level),t.active=!1,e.addChild(t),t},shadowForAgent:function(){var e=cc.instantiate(this.playerPrefab[2]);return e.active=!1,this.node.addChild(e),e},shadowForLog:function(){var e=cc.instantiate(this.playerPrefab[2]);return e.scaleX=1,e.sacleY=1,e.active=!1,this.node.addChild(e),e},setClickItem:function(e){this.clickSele=e},putClickItem:function(e,t,n){var o=cc.instantiate(t),i=this.nick+"_"+Number(new Date);return o.x=n.x,o.y=n.y,o.name=i,o.active=!0,e.addChild(o),this.putSele[i]=o,i},setDragItem:function(e,t){var n=e.target,o=cc.instantiate(t),i=this.nick+"_"+Number(new Date);return t.x=0,t.y=0,o.name=i,o.actvie=!0,n.addChild(o),this.putSele[i]=o,this.draggingItem=i,i},unsetDragItem:function(e){this.unshowDragMask(),this.draggingItem="",this.putSele[e].destroy(),this.putSele[e]=null},moveDragItem:function(e,t){this.putSele[this.draggingItem]&&(this.putSele[this.draggingItem].x+=t.x,this.putSele[this.draggingItem].y+=t.y,this.putSele[this.draggingItem].y)},clearDragItem:function(e,t){var n,o,i=e.target,r=(i._name,{}),s=this.node.position,a=t.magicCost,l=t.level,c=t.role;if(console.log("role:"+c),this.unshowDragMask(),o=1==this.mainPlayer?-50:20,this.putSele[this.draggingItem]){if(n=this.putSele[this.draggingItem].name,r.x=(this.putSele[this.draggingItem].x+i.x-s.x)/this.node.scaleX,r.y=(this.putSele[this.draggingItem].y+i.y-s.y+o)/this.node.scaleY,!this.isValidPutPoint(r)&&!this.ifNotMaskRole(c))return console.log("invalid postion."),this.putSele[n].destroy(),this.putSele[n]=null,void this.putErrorMsg();this.sendSodier(a,c,r,n,l),this.draggingItem=""}},sendSodier:function(e,t,n,o,i){var r=1==this.mainPlayer,s=this.canvasNode.getChildByName("magicBar").getChildByName("juice"),a=this.useMagic(e);this.playSnd("put1"),a?(s.width=a,MY_SOCKET.json.emit("cmd",{isHero:r,roomId:this.roomId,innerId:o,role:t,pt:n,level:i})):(this.putSele[o].destroy(),this.putSele[o]=null)},setMagicBar:function(){var e=this.canvasNode.getChildByName("magicBar").getChildByName("juice");e.width<600&&(e.width+=this.addJuice),e.width%50==0&&(this.magicAmount=e.width/50,this.updateCardStatus())},useMagic:function(e){var t=this.canvasNode.getChildByName("magicBar").getChildByName("juice").width-50*e;return t>=0&&t},updateCardStatus:function(){for(var e,t,n=null,o=1;o<=7;o++)e="sel"+o,(t=this.canvasNode.getChildByName(e))&&(n=t.getComponent("SelCard"))&&(n.magicCost<=this.magicAmount?t.color=new cc.Color(255,255,255):t.color=new cc.Color(127,127,127))}}),cc._RF.pop()},{SocketProvider:"SocketProvider"}],Game:[function(e,t){"use strict";cc._RF.push(t,"f3bc9CQlNRD6plaPVQ+7BK9","Game"),e("Common");var n=e("GameProvider");cc._Dictionary=e("Dictionary"),cc.Class({extends:n,properties:{playerPrefab:{default:[],type:cc.Prefab},audios:{default:[],type:cc.AudioClip}},ctor:function(){console.log("-----ctor----"),this.bufferLen=30},goback:function(){this.syncTimeout(),cc.director.loadScene("menu")},onLoad:function(){console.log("---------onLoad--------");var e=this;this.netErrDisp=!1,cc.visibleRect;var t=this.getRandomCharName();this.nick=t,this.canvasNode=this.node.parent,this.resultOp=this.node.getChildByName("Result").getComponent("Result"),this.gameCountDown=150,this.mainPlayer=-1,this.roomId="",this.baseAttackDuraRec=[],this.agentMoveStepRec=[],this._defaultBases=["base1","base2","base3","base4","base5","base6"],this.gameStartTime=0,this.gameCycleTime=90,this.gameOver=!1,this.addJuice=10,this.npcInfo=new cc._Dictionary,this.removedNpcInfo=new cc._Dictionary,this.setUser(this.getPersistantData()),console.log("name:"+t),this.socketHandle(this.nick),this.putSele=[],this.dragingItem="",this.clickSele={},this.magicAmount=0,this.maskType="seleMask3",this.node._parent.getPosition(),this.node.getPosition(),this.node.on(cc.Node.EventType.TOUCH_END,function(t){if(0!=e.gameStartTime){var n=t.getLocation();e.clickProcessor(n)}}),this.initEventListener()},getPersistantData:function(){return cc.find("GameData").getComponent("GameData").getData()},setUser:function(e){var t=cc.find("GameData").getComponent("GameData"),n=this.node.parent.getChildByName("banner").getChildByName("title"),o=this.node.parent.getChildByName("banner").getChildByName("level").getChildByName("levelword").getComponent("cc.Label"),i=n.getChildByName("name").getComponent("cc.Label"),r=n.getChildByName("score").getComponent("cc.Label");i.string=t.getNick(),o.string=e.level,r.string=e.myscore},setConnFailInfo:function(){this.netErrDisp=!0;var e=this.node.getChildByName("putWait").getChildByName("msg").getComponent("cc.Label");this.node.getChildByName("putWait").getChildByName("retBut").active=!0,e.string="\u7f51\u7edc\u8fde\u63a5\u65ad\u5f00!"},setBuffDisp:function(e){var t=this.node.parent;this.buffType=e,"heal"==e?t.getChildByName("buffHeal").active=!0:"thunder"==e&&(t.getChildByName("buffThunder").active=!0)},setParam:function(e,t){console.log("----param----"),console.log(e),console.log(t);var n=(new Date).getTime();console.log("duration:"+(n-t)),this.setMyCards(e),this.dispCharSele()},setMyCards:function(e){for(var t,n,o,i,r,s=e,a=this.node.parent,l=0;l<s.length;l++)(o=cc.instantiate(this.playerPrefab[21]))._name="sel"+(l+1),i=o.getComponent("SelCard"),s[l]&&i.setRole(s[l].seleRole,s[l].magicCost,s[l].roleLevel),t=l%6*105-230,n=-590,r=cc.v2(t,n),o.setPosition(r),a.addChild(o);for(l=s.length;l<6;l++)t=l%6*105-230,n=-590,o=cc.instantiate(this.playerPrefab[22]),r=cc.v2(t,n),o.setPosition(r),a.addChild(o)},dispCharSele:function(){var e=this.node.parent.getChildByName("charSele");e.zIndex=9999,e.active=!1,console.log(e)},gameOverProcessor:function(e,t){1==e?1==t.win?(console.log("my win11"),this.killBases("up")):0==t.win&&(console.log("my lose11"),this.killBases("down")):2==e&&(1==t.win?(console.log("my lose11"),this.killBases("down")):0==t.win&&(console.log("my win11"),this.killBases("up")))},clickProcessor:function(e){var t,n=this.canvasNode.getPosition(),o=this.node.getPosition(),i=e,r={},s=this.clickSele.magicCost,a=this.clickSele.level,l=this.clickSele.role;if(void 0!==l&&""!=l){var c,u=this.clickSele.params.target,f=this.clickSele.node,h=f.parent.getPosition();if(c=1==this.mainPlayer?-20:40,r.x=o.x+i.x-h.x-10,r.y=o.y+i.y-h.y-(n.y+o.y),i.x=i.x/this.node.scaleX-(n.x+o.x),i.y=i.y/this.node.scaleY-(n.y+o.y)+c,this.ifNotMaskRole(l)||this.showMask(this.maskType,1),!this.isValidPutPoint(i)&&!this.ifNotMaskRole(l))return console.log("invalid postion."),void this.putErrorMsg();t=this.putClickItem(u,f,r),this.sendSodier(s,l,i,t,a)}},isValidPutPoint:function(e){var t={};return t.x=e.x,t.y=e.y,2==this.mainPlayer&&(t.y=e.y-40),"seleMask1"==this.maskType?t.x>=30&&t.x<=570&&t.y>0&&t.y<650:"seleMask12"==this.maskType?t.x>=30&&t.x<=570&&t.y>0&&t.y<420||t.x>=285&&t.x<=570&&t.y>420&&t.y<650:"seleMask13"==this.maskType?t.x>=30&&t.x<=570&&t.y>0&&t.y<420||t.x>=30&&t.x<=285&&t.y>420&&t.y<650:"seleMask3"==this.maskType&&t.x>=30&&t.x<=570&&t.y>0&&t.y<420},ifNotMaskRole:function(e){return"bomb"==e||"thunder"==e||"heal"==e},initEventListener:function(){this.node.on("event_effect",this.onEventEffect.bind(this))},onEventEffect:function(){console.log("listening effect loaded....")},setCountDown:function(e){var t=parseInt(e/60),n=e%60;n<10&&(n="0"+n),this.canvasNode.getChildByName("banner").getChildByName("time").getChildByName("countDown").getComponent("cc.Label").string=t+":"+n},doubleMagicDisp:function(){this.node.getChildByName("doubleMagic").active=!0},setTimeCounter:function(e){this.gameNowTime=e,this.setCountDown(e),60==e&&(console.log("magic charge speed up"),this.doubleMagicDisp(),this.addJuice=20),this.setMagicBar();var t=this.gameCycleTime-e;t<0?this.gameOver=!0:parseInt(t/10)},startTraceTimer:function(){this.interval=30;var e=Date.now(),t=this,n=(this.gameCycleTime,Date.now(),0);this.traceTimer||(this.traceTimer=function(){var o=Date.now(),i=o-e,r=o-t.gameStartTime;!t.gameOver&&r>1e3*n&&(n++,Math.abs(n-t.gameNowTime)>5&&this.syncTimeout()),i>t.interval&&(e=o-i%t.interval,t.mainGameCycle())}.bind(this)),this.schedule(this.traceTimer,0)},mainGameCycle:function(){var e,t,n,o,i,r,s,a;this.gameTraceStack.length>this.bufferLen&&(this.gameTraceStack.shift(),t=(e=this.gameTraceStack[0]).agents,s=this.gameTraceStack[29].agents,a=this.gameTraceStack[29].forts,n=e.bullets,o=e.bases,i=e.forts,r=e.rollLogs,this.playBullets(n),this.playLogs(r),this.playAgents(t,s),this.playBases(o),this.playForts(i),this.bulletProcess(n),this.logProcess(r),this.agentProcess(t),this.fortProcess(i,a),this.baseProcess(o))},syncTimeout:function(){this.gameOver=!0,this.stopTraceTimer(),MY_SOCKET.disconnect(),console.log("\u7f51\u7edc\u65ad\u5f00")},stopTraceTimer:function(){this.traceTimer&&this.unschedule(this.traceTimer)},playSnd:function(e){"base"==e?cc.audioEngine.play(this.audios[0],!1,1):"fireSend"==e?cc.audioEngine.play(this.audios[1],!1,1):"bomb"==e?cc.audioEngine.play(this.audios[2],!1,1):"ske"==e?cc.audioEngine.play(this.audios[3],!1,1):"hr"==e?cc.audioEngine.play(this.audios[4],!1,1):"lr"==e?cc.audioEngine.play(this.audios[5],!1,1):"gi"==e?cc.audioEngine.play(this.audios[6],!1,1):"put1"==e?cc.audioEngine.play(this.audios[7],!1,1):"wizfire"==e?cc.audioEngine.play(this.audios[2],!1,1):"lm"==e?cc.audioEngine.play(this.audios[8],!1,1):"gun"==e?cc.audioEngine.play(this.audios[9],!1,1):"thunder"==e?cc.audioEngine.play(this.audios[10],!1,1):"heal"==e?cc.audioEngine.play(this.audios[11],!1,1):"log"==e&&cc.audioEngine.play(this.audios[12],!1,1)},playEffect:function(e,t,n){var o;"hr"==e&&((o=cc.instantiate(this.playerPrefab[13])).x=t,o.y=n+20,this.node.addChild(o)),"lm"==e?(this.playSnd("lm"),(o=cc.instantiate(this.playerPrefab[15])).x=t,o.y=n-40,this.node.addChild(o)):"base"==e?(this.playSnd("base"),(o=cc.instantiate(this.playerPrefab[10])).x=t,o.y=n,this.node.addChild(o)):"fa"==e?((o=cc.instantiate(this.playerPrefab[10])).x=t,o.y=n,this.node.addChild(o)):"log"==e?((o=cc.instantiate(this.playerPrefab[10])).scaleX=.8,o.scaleY=.8,o.x=t+10,o.y=n,this.node.addChild(o)):"bomb"==e?(this.playSnd("bomb"),this.startSceneJitter(),(o=cc.instantiate(this.playerPrefab[6])).active=!0,o.x=t,o.y=n,this.node.addChild(o)):"wizfire"==e&&(this.playSnd("wizfire"),(o=cc.instantiate(this.playerPrefab[19])).active=!0,o.x=t,o.y=n,this.node.addChild(o))}}),cc._RF.pop()},{Common:"Common",Dictionary:"Dictionary",GameProvider:"GameProvider"}],GiantSprite:[function(e,t){"use strict";cc._RF.push(t,"06cfaN7txBFkqJqizTWDtk1","GiantSprite");var n=e("MySprite");cc.Class({extends:n,properties:{role:"gi"},start:function(){this.shadow.scaleX=1.2,this.shadow.scaleY=1.2},getAttackDistance:function(e){return.75*(e.size+e.esize)},remove:function(){this._animation.play("dieoff1"),this.shadow.destroy(),this.blood.destroy()},dieStart:function(){},dieEnd:function(){this._animation.play("footprint")},footStart:function(){this.node.zIndex=-1},footEnd:function(){this.node.destroy()},playAni:function(e,t,n){this.playAngleAnimationNear(e,t,n)},frame1Evt:function(){this.dispShadow(1),this.shadow.zIndex=-1},frame2Evt:function(){this.dispShadow(2)},frame3Evt:function(){this.dispShadow(3)},frame4Evt:function(){this.dispShadow(4)},frame5Evt:function(){this.dispShadow(5)},frame6Evt:function(){this.dispShadow(6)},frame7Evt:function(){this.dispShadow(7)},aFrame1Evt:function(){this.dispShadow(2),this.layoutOp.playSnd("gi")},aFrame2Evt:function(){},aFrame3Evt:function(){this.dispShadow(4)},aFrame4Evt:function(){},aFrame5Evt:function(){},aFrame6Evt:function(){this.dispShadow(7)}}),cc._RF.pop()},{MySprite:"MySprite"}],GunSprite:[function(e,t){"use strict";cc._RF.push(t,"2fe15M3k5hEtLqG347kT1t6","GunSprite");var n=e("Common");cc.Class({extends:cc.Component,properties:{role:"gun"},start:function(){this._animation=this.getComponent(cc.Animation),this._animation.WrapMode=cc.WrapMode.Loop},isEnemyBase:function(e){return 1==e||2==e||3==e},playBaseWarriorAnimationDefault:function(e,t,n){var o;if(o=this.isEnemyBase(n)?"ar_s_walk":"ar_n_walk","move"!=e||this.lastAct!=o){var i=Math.ceil(125*Math.random())/100;this._animation.play(o,i),this.lastAct=o}},playBaseWarriorAnimation:function(e,t,o){n.attackTargetYOffset;var i,r,s,a,l,c,u=e.mypos.x,f=e.mypos.y;1==e.objectId?f=e.mypos.y+1:4==e.objectId&&(f=e.mypos.y-0);var h,p=Math.ceil(125*Math.random())/100,d="";if(i=e.enemypos.x,r=e.enemypos.y,a=cc.v2(30*u,30*f),l=cc.v2(30*i,30*r),0!=(c=a.sub(l)).x||0!=c.y){if(0!=c.x&&0!=c.y){var y=180/Math.PI*Math.atan(c.x/c.y);s=y,c.y>=0&&c.x<0?s=y+180:c.y>=0&&c.x>=0&&(s=y-180)}this._animation&&(console.log(s),d=(h=this.getActnameByAngle(s,o)).actName,this.node.scaleX=h.scaleX,this.lastAct==d&&"sa"!=o||("sa"==o?(this._animation.stop(),this._animation.play(d)):this._animation.play(d,p),this.angle=s,this.lastAct=d,this.lastScaleX=h.scaleX))}},getActnameByAngle:function(e,t){var n="",o=1,i={};return e>=0&&e<=7.5?"move"==t?n="n_walk":"sa"==t&&(n="n_attack"):e>7.5&&e<=22.5?"move"==t?n="en5_walk":"sa"==t&&(n="en5_attack"):e>22.5&&e<=37.5?"move"==t?n="en4_walk":"sa"==t&&(n="en4_attack"):e>37.5&&e<=52.5?"move"==t?n="en3_walk":"sa"==t&&(n="en3_attack"):e>52.5&&e<=67.5?"move"==t?n="en2_walk":"sa"==t&&(n="en2_attack"):e>67.5&&e<=82.5?"move"==t?n="en1_walk":"sa"==t&&(n="en1_attack"):e>82.5&&e<=97.5?"move"==t?n="e_walk":"sa"==t&&(n="e_attack"):e>97.5&&e<=112.5?"move"==t?n="se1_walk":"sa"==t&&(n="se1_attack"):e>112.5&&e<=127.5?"move"==t?n="se2_walk":"sa"==t&&(n="se2_attack"):e>127.5&&e<=142.5?"move"==t?n="se3_walk":"sa"==t&&(n="se3_attack"):e>142.5&&e<=157.5?"move"==t?n="se4_walk":"sa"==t&&(n="se4_attack"):e>157.5&&e<=172.5?"move"==t?n="se5_walk":"sa"==t&&(n="se5_attack"):e>157.5&&e<=172.5?"move"==t?n="s_walk":"sa"==t&&(n="s_attack"):e<0&&e>=-7.5?("move"==t?n="n_walk":"sa"==t&&(n="n_attack"),o=-1):e<-7.5&&e>=-22.5?("move"==t?n="en5_walk":"sa"==t&&(n="en5_attack"),o=-1):e<-22.5&&e>=-37.5?("move"==t?n="en4_walk":"sa"==t&&(n="en4_attack"),o=-1):e<-37.5&&e>=-52.5?("move"==t?n="en3_walk":"sa"==t&&(n="en3_attack"),o=-1):e<-52.5&&e>=-67.5?("move"==t?n="en2_walk":"sa"==t&&(n="en2_attack"),o=-1):e<-67.5&&e>=-82.5?("move"==t?n="en1_walk":"sa"==t&&(n="en1_attack"),o=-1):e<-82.5&&e>=-97.5?("move"==t?n="e_walk":"sa"==t&&(n="e_attack"),o=-1):e<-97.5&&e>=-112.5?("move"==t?n="se1_walk":"sa"==t&&(n="se1_attack"),o=-1):e<-112.5&&e>=-127.5?("move"==t?n="se2_walk":"sa"==t&&(n="se2_attack"),o=-1):e<-127.5&&e>=-142.5?("move"==t?n="se3_walk":"sa"==t&&(n="se3_attack"),o=-1):e<-142.5&&e>=-157.5?("move"==t?n="se4_walk":"sa"==t&&(n="se4_attack"),o=-1):e<-157.5&&e>=-172.5?("move"==t?n="se5_walk":"sa"==t&&(n="se5_attack"),o=-1):e<-172.5?("move"==t?n="s_walk":"sa"==t&&(n="s_attack"),o=-1):console.log("------:"+e),n=this.role+"_"+n,i.actName=n,i.scaleX=o,i}}),cc._RF.pop()},{Common:"Common"}],HeroSprite:[function(e,t){"use strict";cc._RF.push(t,"f1d7dQFNudAhLCXA3TwPg0h","HeroSprite");var n=e("MySprite");cc.Class({extends:n,properties:{role:"hr"},start:function(){this.layoutOp=this.node.parent.getComponent("Game")},shootArrow:function(){},getAttackDistance:function(e){return.6*(e.size+e.esize)},playAni:function(e,t,n){this.playAngleAnimationNear(e,t,n)},remove:function(){this._animation.play("dieoff1"),this.shadow.destroy(),this.blood.destroy()},playEffect:function(){this.layoutOp.playEffect("hr",this.node.x,this.node.y)},removeEffect:function(){},dieStart:function(){},dieEnd:function(){this._animation.play("footprint")},footStart:function(){this.node.zIndex=-1,this.node.scaleX=1,this.node.scaleY=1},footEnd:function(){this.node.destroy()},beforeKill:function(){},afterKill:function(){this.node.destroy()},frame1Evt:function(){this.dispShadow(1)},frame2Evt:function(){this.dispShadow(2)},frame3Evt:function(){this.dispShadow(3)},frame4Evt:function(){this.dispShadow(4)},frame5Evt:function(){this.dispShadow(5)},frame6Evt:function(){this.dispShadow(6)},frame7Evt:function(){this.dispShadow(7)},aFrame1Evt:function(){this.attacking=!0,this.dispShadow(2),this.layoutOp.playSnd("hr")},aFrame2Evt:function(){},aFrame3Evt:function(){this.dispShadow(4)},aFrame4Evt:function(){},aFrame5Evt:function(){},aFrame6Evt:function(){this.dispShadow(7),this.attacking=!1},aFrame11Evt:function(){this.attacking=!0,this.dispShadow(2),this.playEffect()},aFrame12Evt:function(){},aFrame13Evt:function(){this.dispShadow(4)},aFrame14Evt:function(){},aFrame15Evt:function(){},aFrame16Evt:function(){this.dispShadow(7),this.attacking=!1}}),cc._RF.pop()},{MySprite:"MySprite"}],KingSprite:[function(e,t){"use strict";cc._RF.push(t,"4e1e7ijAIxKo4R8otf0WmYm","KingSprite"),e("Common"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.node.zIndex=2999}}),cc._RF.pop()},{Common:"Common"}],LightmanSprite:[function(e,t){"use strict";cc._RF.push(t,"8ba670SxMdMZZPZ9uRjICLu","LightmanSprite");var n=e("MySprite");cc.Class({extends:n,properties:{role:"lm"},start:function(){this.layoutOp=this.node.parent.getComponent("Game")},getAttackDistance:function(e){return this.attactDistance=.6*(e.size+e.esize),this.attactDistance},playAni:function(e,t,n){this.tkx=30*e.enemypos.x,this.tky=30*e.enemypos.y,this.playAngleAnimationNear(e,t,n)},remove:function(){this._animation.play("dieoff1"),this.shadow.destroy(),this.blood.destroy()},playEffect:function(){var e=cc.v2(this.node.x,this.node.y),t=cc.v2(this.tkx,this.tky);e.sub(t).mag()<60*this.attactDistance&&this.layoutOp.playEffect("lm",this.tkx,this.tky)},dieStart:function(){},dieEnd:function(){this._animation.play("footprint")},footStart:function(){this.node.zIndex=-1,this.node.scaleX=1,this.node.scaleY=1},footEnd:function(){this.node.destroy()},beforeKill:function(){},afterKill:function(){this.node.destroy()},frame1Evt:function(){this.dispShadow(1)},frame2Evt:function(){this.dispShadow(2)},frame3Evt:function(){this.dispShadow(3)},frame4Evt:function(){this.dispShadow(4)},frame5Evt:function(){this.dispShadow(5)},frame6Evt:function(){this.dispShadow(6)},frame7Evt:function(){this.dispShadow(7)},aFrame1Evt:function(){this.attacking=!0,this.dispShadow(2)},aFrame2Evt:function(){},aFrame3Evt:function(){this.dispShadow(4)},aFrame4Evt:function(){},aFrame5Evt:function(){},aFrame6Evt:function(){this.dispShadow(7),this.playEffect(),this.attacking=!1}}),cc._RF.pop()},{MySprite:"MySprite"}],LogSprite:[function(e,t){"use strict";cc._RF.push(t,"0189eXSyXxOPI5EXmXLbFek","LogSprite"),cc.Class({extends:cc.Component,properties:{role:"log"},start:function(){this._animation=this.getComponent(cc.Animation),this._animation.WrapMode=cc.WrapMode.Default},setId:function(e){this.aid=e},setShadow:function(e){this.shadow=e,this.shadow.active=!0},frame1Evt:function(){this.dispShadow()},frame2Evt:function(){this.dispShadow();var e=this.shadow.getPosition(),t=cc.v2(e.x,e.y-20);this.shadow.setPosition(t)},frame3Evt:function(){this.dispShadow();var e=this.shadow.getPosition(),t=cc.v2(e.x,e.y-20);this.shadow.setPosition(t)},frame4Evt:function(){this.dispShadow();var e=this.shadow.getPosition(),t=cc.v2(e.x,e.y-5);this.shadow.setPosition(t)},frame5Evt:function(){this.dispShadow();var e=this.shadow.getPosition(),t=cc.v2(e.x,e.y-5);this.shadow.setPosition(t)},frame6Evt:function(){this.dispShadow();var e=this.shadow.getPosition(),t=cc.v2(e.x,e.y-5);this.shadow.setPosition(t)},frame7Evt:function(){this.dispShadow();var e=this.shadow.getPosition(),t=cc.v2(e.x,e.y-10);this.shadow.setPosition(t)},frame8Evt:function(){this.dispShadow();var e=this.shadow.getPosition(),t=cc.v2(e.x,e.y-10);this.shadow.setPosition(t)},frame9Evt:function(){this.dispShadow();var e=this.shadow.getPosition(),t=cc.v2(e.x,e.y-10);this.shadow.setPosition(t),this.play()},frame11Evt:function(){this.dispShadow(),this.shadow.angle=2},frame12Evt:function(){this.dispShadow(),this.shadow.angle=3},frame13Evt:function(){this.dispShadow(),this.shadow.angle=3},frame14Evt:function(){this.dispShadow(),this.shadow.angle=-2},frame15Evt:function(){this.dispShadow(),this.shadow.angle=3},frame16Evt:function(){this.dispShadow(),this.shadow.angle=-2},move:function(e){var t,n,o;t=30*e.x,n=30*e.y,o=cc.v2(t,n),this.node.zIndex=2001,this.node.setPosition(o),this.updateShadow(e)},updateShadow:function(e){var t,n,o;t=30*e.x+20,n=30*e.y,o=cc.v2(t,n),this.shadow&&this.shadow.setPosition(o)},remove:function(){this.shadow.destroy(),this.node.destroy()},play:function(){this._animation.play("rollingLog")},shadowForAgent:function(){var e=cc.instantiate(this.playerPrefab[2]);return e.active=!1,this.node.addChild(e),e},dispShadow:function(){if(this.shadow){var e=this.shadow;this.shadow.active=!0,cc.loader.loadRes("log_shadow/logShadow",cc.SpriteFrame,function(t,n){if(e)try{""!=e._name&&(e.getComponent(cc.Sprite).spriteFrame=n)}catch(o){console.log(e),console.log(o)}})}}}),cc._RF.pop()},{}],MenuScript:[function(e,t){"use strict";cc._RF.push(t,"e35c8uvDYNJtZPrAAvt2uLh","MenuScript"),cc.Class({extends:cc.Component,properties:{loading:cc.ProgressBar,loadLabel:cc.Label},onLoad:function(){},start:function(){},onProgress:function(e,t){this.loading.progress=e/t,this.loadLabel.string=Math.floor(e/t*100)+"%"},goRelay:function(e,t){this.isShared=!0,this.shareTag=t,this.closeTime=(new Date).getTime(),CC_WECHATGAME&&wx.shareAppMessage({title:"\u4e2d\u53e4\u6218\u7eaa",imageUrl:"https://www.asobee.mobi/fftower/res/acLogo2.jpg"})},play:function(e,t){var n=this,o=t;if(!CC_WECHATGAME||"heal"!=o&&"thunder"!=o)this.goGame(o);else{var i=wx.createRewardedVideoAd({adUnitId:"adunit-ebd5d981ced848c7"});i.show().catch(function(){i.load().then(function(){return i.show()}).catch(function(){console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a\u5931\u8d25")})}),i.onError(function(){console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"),n.goGame(o)}),i.onClose(function(e){(e&&e.isEnded||void 0===e)&&n.goGame(o)})}},goGame:function(e){var t=this.getSelLayoutNode().getComponent("SelLayout").getNowAgents(),n=(new Date).getTime();cc.director.loadScene("game",function(){console.log(t);var o=cc.director.getScene().getChildByName("Canvas").getChildByName("layout").getComponent("Game");o.setBuffDisp(e),o.setParam(t,n)})},getSelLayoutNode:function(){return this.node.getChildByName("SelScrollView").getChildByName("view").getChildByName("content").getChildByName("SelLayout")}}),cc._RF.pop()},{}],MySprite:[function(e,t){"use strict";cc._RF.push(t,"cd79aqd9HxCZLHw2ASr//Gc","MySprite"),e("Common");var n=e("AgentObj");cc.Class({extends:n,properties:{sprAtlas:cc.SpriteAtlas,wrapMode:cc.WrapMode.Loop,routes:[],lastAct:"",lastAngle:-1,life:-1,eid:-1},onLoad:function(){this.layoutOp=this.node.parent.getComponent("Game")},start:function(){},ctor:function(){},init:function(){this.posX=0,this.posY=0,this.now=Date.now(),this.angle=-999,this.groupKill=!1,this.attacking=!1,this._animation=this.getComponent(cc.Animation),this._animation.WrapMode=cc.WrapMode.Loop},setInitPos:function(e,t){this.posX=e,this.posY=t;var n=cc.v2(this.posX,this.posY);this.routes.push(n)},updatePos:function(e,t){var n,o,i=cc.v2(e,t),r=this.node.getAnchorPoint(),s=this.node.getContentSize();n=(.5-r.x)*s.width+e,o=t,cc.v2(n,o),this.node.setPosition(i),this.shadow&&this.shadow.setPosition(i)},dispShadow:function(e){if(this.shadow){var t=this.shadow,n="ske_shadow/e/ske_walk_e"+e;if(this.lastAct){var o=this.lastAct.split("_"),i=o[1];o[2],this.lastScaleX,"en1"==i||"en2"==i||"en3"==i?n="ske_shadow/en/ske_walk_en"+e:"se1"==i||"se2"==i||"se3"==i?n="ske_shadow/se/ske_walk_se"+e:"s"==i?n="ske_shadow/s/ske_walk_s"+e:"n"==i?n="ske_shadow/n/ske_walk_n"+e:"e"==i&&(n="ske_shadow/e/ske_walk_e"+e),this.shadow.active=!0,cc.loader.loadRes(n,cc.SpriteFrame,function(e,n){if(t)try{""!=t._name&&(t.getComponent(cc.Sprite).spriteFrame=n)}catch(o){console.log(t),console.log(o)}})}}},getActnameByAngle:function(e,t){var n,o="",i=1,r={};return e>-22.5&&e<=22.5?"move"==t?o="n_walk":"sa"==t&&(o="n_attack"):e>22.5&&e<=67.5?"move"==t?o="en2_walk":"sa"==t&&(o="en2_attack"):e>67.5&&e<=112.5?"move"==t?o="e_walk":"sa"==t&&(o="e_attack"):e>112.5&&e<=157.5?"move"==t?o="se2_walk":"sa"==t&&(o="se2_attack"):e>157.5||e<-202.5?"move"==t?o="s_walk":"sa"==t&&(o="s_attack"):e<-22.5&&e>=-67.5?("move"==t?o="en2_walk":"sa"==t&&(o="en2_attack"),i=-1):e<-67.5&&e>=-112.5?("move"==t?o="e_walk":"sa"==t&&(o="e_attack"),i=-1):e<-112.5&&e>=-157.5?("move"==t?o="se2_walk":"sa"==t&&(o="se2_attack"),i=-1):e<-157.5?("move"==t?o="s_walk":"sa"==t&&(o="s_attack"),i=-1):console.log("----error angle--------------:"+e),o=this.role+"_"+o,(n=this.specialAct(t))&&(o=n),r.actName=o,r.scaleX=i,r},specialAct:function(e){return!!this.groupKill&&"sa"==e&&"hr"==this.role&&"hr_all_kill"},setId:function(e){this.aid=e},hide:function(){this.node.active=!1},setShadow:function(e){this.shadow=e,this.shadow.active=!0},getAgentAngle:function(e,t,n){var o,i,r,s,a;return o=t.x,i=t.y,r=e.x,s=e.y,o-r>0&&i-s>0?a=n:o-r>0&&i-s<0?a=180-n:o-r<0&&i-s<0?a=180+n:o-r<0&&i-s>0?a=0-n:o-r==0&&i-s>0?a=0:o-r==0&&i-s<0?a=180:i-s==0&&o-r>0?a=90:i-s==0&&o-r<0?a=-90:console.log("wrong angle in Func MySprite->getAgentAngle()"),a},ifFlyAgent:function(e){return"bee"==e},playAngleAnimationNear:function(e,t){if(!this.attacking){var n,o,i,r,s,a=cc.v2(e.mypos.x,e.mypos.y),l=cc.v2(e.enemypos.x,e.enemypos.y),c=1e3+parseInt(32-e.mypos.y),u=Math.ceil(125*Math.random())/100,f="",h=(e.actType,0),p=e.mypos.x,d=e.mypos.y,y=e.enemypos.x,m=e.enemypos.y,g=a.sub(l).mag();this.ifFlyAgent(e.role)||(this.node.zIndex=c),this.node.scaleX=1,this._animation&&(g<=(s=this.getAttackDistance(e))?(a=cc.v2(p,d),0==(i=cc.v2(y,m).sub(a)).x&&(i.x=.1),0==i.y&&(i.y=.1),0!=i.x&&0!=i.y&&(h=180/Math.PI*Math.atan(Math.abs(i.x/i.y))),(h=this.getAgentAngle(e.mypos,{x:y,y:m},h))>180&&(h-=360),f=(r=this.getActnameByAngle(h,"sa")).actName,this.node.scaleX=r.scaleX):(t?(n=t.enemypos.x,o=t.enemypos.y):(n=e.enemypos.x,o=e.enemypos.y),a=cc.v2(p,d),0==(i=cc.v2(n,o).sub(a)).x&&(i.x=.1),0==i.y&&(i.y=.1),0!=i.x&&0!=i.y&&(h=180/Math.PI*Math.atan(Math.abs(i.x/i.y))),(h=this.getAgentAngle(e.mypos,{x:n,y:o},h))>180&&(h-=360),f=(r=this.getActnameByAngle(h,"move")).actName,this.node.scaleX=r.scaleX),this.blood.scaleX=this.node.scaleX,this.lastAct!=f&&(g<=s?this._animation.play(f):this.attacking||this._animation.play(f,u),this.lastAct=f,this.lastScaleX=r.scaleX))}},playAngleAnimationRemote:function(e,t){var n,o,i,r,s,a,l=0,c=e.mypos.x,u=e.mypos.y,f=e.enemypos.x,h=e.enemypos.y,p=1e3+parseInt(32-u),d=Math.ceil(125*Math.random())/100,y="";"ia"!=(i=e.actType)&&"ea"!=i&&(l=e.rot,this.node.zIndex=p,this.node.scaleX=1,"sa"==i&&(r=cc.v2(30*c,30*u),0==(s=cc.v2(30*f,30*h).sub(r)).x&&(s.x=.1),0==s.y&&(s.y=.1),0!=s.x&&0!=s.y&&(l=180/Math.PI*Math.atan(Math.abs(s.x/s.y)),l=this.getAgentAngle(e.mypos,{x:f,y:h},l))),"move"==i&&(t?(n=t.enemypos.x,o=t.enemypos.y,t&&"ia"!=t.actType&&(i=t.actType)):(n=e.enemypos.x,o=e.enemypos.y,t&&"ia"!=t.actType&&(i=t.actType)),r=cc.v2(30*c,30*u),0==(s=cc.v2(30*n,30*o).sub(r)).x&&(s.x=.1),0==s.y&&(s.y=.1),0!=s.x&&0!=s.y&&(l=180/Math.PI*Math.atan(Math.abs(s.x/s.y)),l=this.getAgentAngle(e.mypos,{x:n,y:o},l))),this._animation&&(y=(a=this.getActnameByAngle(l,i)).actName,this.node.scaleX=a.scaleX,this.blood.scaleX=this.node.scaleX,this.lastAct==y&&"sa"!=i||("sa"==i?(this._animation.stop(),this._animation.play(y)):this._animation.play(y,d),this.lastAct=y,this.lastScaleX=a.scaleX)),this.lastActType=i)}}),cc._RF.pop()},{AgentObj:"AgentObj",Common:"Common"}],Order1Sprite:[function(e,t){"use strict";cc._RF.push(t,"c42359qXZlHhp4BGz7DTZfc","Order1Sprite"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.node.zIndex=1},start:function(){}}),cc._RF.pop()},{}],Order2Sprite:[function(e,t){"use strict";cc._RF.push(t,"756d3bGzU9JqLNy2riXSzoU","Order2Sprite"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){console.log("sssssssssssss"),parseInt(104)},start:function(){}}),cc._RF.pop()},{}],Order9Sprite:[function(e,t){"use strict";cc._RF.push(t,"15fca01GsZO7rsB5Rucz1/r","Order9Sprite"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.node.zIndex=9},start:function(){}}),cc._RF.pop()},{}],Result:[function(e,t){"use strict";cc._RF.push(t,"ccd3eaVj6tLpIqIJfTIex3m","Result"),cc.Class({extends:cc.Component,properties:{win:0,flagNum:2,score:0,boxType:1},start:function(){this.node.zIndex=9999},show:function(){this.node.active=!0,this.setTitle(),this.setScore()},setResultValue:function(e,t){var n=this.getPersistantNode(),o=n.getData().basescore;1==e?1==t.win?(console.log("my win"),this.win=1,this.flagNum=t.upk):0==t.win?(console.log("my lose"),this.win=0,this.flagNum=t.upk):2==t.win&&(console.log("even"),this.win=2,this.flagNum=t.upk):2==e&&(1==t.win?(console.log("my lose"),this.win=0,this.flagNum=t.dnk):0==t.win?(console.log("my win"),this.win=1,this.flagNum=t.dnk):2==t.win&&(console.log("even"),this.win=2,this.flagNum=t.dnk)),1==this.win||2==this.win?(this.score=this.flagNum*o,n.winScore(this.score)):n.setUpgrade(!1)},getPersistantNode:function(){return cc.find("GameData").getComponent("GameData")},setTitle:function(){var e=this.node.getChildByName("winnerTxt").getComponent("cc.Label");1==this.win?e.string="\u80dc\u5229\uff01":0==this.win?e.string="\u5931\u8d25\uff01":2==this.win&&(e.string="\u5e73\u5c40\uff01")},setFlag:function(){for(var e,t,n=1;n<=3;n++)e="flag"+n,(t=this.node.getChildByName("killed").getChildByName(e)).active=!1,n<=this.flagNum&&(t.active=!0)},setScore:function(){this.node.getChildByName("goldStar").getChildByName("goldTxt").getComponent("cc.Label").string="+"+this.score},setBox:function(){var e=this.node.getChildByName("boxFrame").getChildByName("boxInfo").getComponent("cc.Label");1==this.boxType?e.string="\u666e\u901a\u5b9d\u7bb1":2==this.boxType?e.string="\u9ad8\u7ea7\u5b9d\u7bb1":3==this.boxType&&(e.string="\u8d85\u7ea7\u5b9d\u7bb1")},test:function(){console.log("clicked..."),this.node.active=!1,cc.director.loadScene("menu")}}),cc._RF.pop()},{}],SelCard:[function(e,t){"use strict";cc._RF.push(t,"a9c88Il+79JlLW7EwlscaCD","SelCard"),cc.Class({extends:cc.Component,properties:{seleRole:"ske",magicCost:1,roleLevel:1},onLoad:function(){this.ox=this.node.x,this.oy=this.node.y},start:function(){this.isMoving=!1,this.dragTo=null,this.seleInnerId="";var e=this.getLayoutNode(),t=this;if(e){var n=e.getComponent("Game"),o=this.node.parent.getChildByName("charSele");this.node.on(cc.Node.EventType.TOUCH_START,function(e){0!=n.gameStartTime&&(t.node.getChildByName("dragTo").active=!0,n.showDragMask(t.seleRole),t.seleInnerId=n.setDragItem(e,t.node.getChildByName("dragTo")))}),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(e){var o=e.touch.getDelta();t.isMove=!0,n.moveDragItem(e.target._name,o)}),this.node.on(cc.Node.EventType.TOUCH_END,function(e){var i=t.node.getPosition(),r={role:t.seleRole,level:t.roleLevel,magicCost:t.magicCost,params:e,node:t.node.getChildByName("dragTo")};""!=t.seleInnerId&&(n.unsetDragItem(t.seleInnerId),t.seleInnerId=""),t.isMove=!1,o.active=!0,o.setPosition(i),n.setClickItem(r)}),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(e){var o={role:t.seleRole,level:t.roleLevel,magicCost:t.magicCost};n.clearDragItem(e,o)})}else this.node.on(cc.Node.EventType.TOUCH_END,function(){t.processChoose()});this.setInitImgByRole(),this.setRoleCost()},processChoose:function(){var e=this.node.parent.parent.getComponent("SelLayout"),t=e.choosenCard;if(!CC_WECHATGAME||e.ifWxValidRelay()){if(t&&t.role){var n;this.setRole(t.role,t.cost,t.level),this.setInitImgByRole(),this.setRoleCost(),n=this.getNowAgents(),e.setCardsStatus(n)}}else e.dispWxRelayWarn(!0)},getNowAgents:function(){for(var e=this.node.parent._children,t=[],n=0;n<e.length;n++)"SelCard"==e[n]._name&&t.push(e[n].getComponent("SelCard").seleRole);return t},setRole:function(e,t,n){this.seleRole=e,this.magicCost=t,this.roleLevel=n},getLayoutNode:function(){return this.node.parent.getChildByName("layout")},stopCardJitter:function(){this.node.stopAllActions(),this.node.x=this.ox,this.node.y=this.oy},startCardJitter:function(){this.node.stopAllActions();var e=this,t=this.node,n=0,o=this.node,i=cc.delayTime(1/30),r=cc.callFunc(function(){n++;var o=Math.floor(4*Math.random())+-2,i=Math.floor(4*Math.random())+-2;t.x+=o,t.y+=i,n%3==0&&(t.x=e.ox,t.y=e.oy)}),s=cc.sequence(i,r);o.runAction(cc.repeatForever(s))},setRoleCost:function(){0!=this.magicCost&&(this.node.getChildByName("ringMark").getChildByName("cost").getComponent("cc.Label").string=this.magicCost)},setSelImg:function(e){var t=this.node.getChildByName("dragTo"),n=this.node.getChildByName("icon");cc.loader.loadRes(e,cc.SpriteFrame,function(e,o){t.width=100,t.height=120,t.active=!1,t.getComponent(cc.Sprite).spriteFrame=o,n.width=100,n.height=120,n.active=!0,n.getComponent(cc.Sprite).spriteFrame=o})},setInitImgByRole:function(){"ske"==this.seleRole?this.setSelImg("sel_cards/ske"):"lr"==this.seleRole?this.setSelImg("sel_cards/lieren"):"gi"==this.seleRole?this.setSelImg("sel_cards/rockman"):"log"==this.seleRole?this.setSelImg("sel_cards/log"):"bomb"==this.seleRole?this.setSelImg("sel_cards/bomb"):"bee"==this.seleRole?this.setSelImg("sel_cards/bee"):"wiz"==this.seleRole?this.setSelImg("sel_cards/wiz"):"hr"==this.seleRole?this.setSelImg("sel_cards/hero"):"lm"==this.seleRole?this.setSelImg("sel_cards/lightman"):"fa"==this.seleRole?this.setSelImg("sel_cards/fortA"):"ir"==this.seleRole?this.setSelImg("sel_cards/ironman"):"thunder"==this.seleRole?this.setSelImg("sel_cards/thunder"):"heal"==this.seleRole&&this.setSelImg("sel_cards/heal")}}),cc._RF.pop()},{}],SelLayout:[function(e,t){"use strict";cc._RF.push(t,"82e7bMCmi1Ex52PP3o8kNpv","SelLayout"),String.prototype.inArray=function(e){e||console.log("ERR(in_array):Input is not an array");for(var t=0,n=e.length;t<n;t++)if(this==e[t])return!0;return!1},cc.Class({extends:cc.Component,properties:{playerPrefab:{default:[],type:cc.Prefab},startBut1:cc.Button,startBut2:cc.Button,startBut3:cc.Button},onLoad:function(){var e=this;this.startBut1.getComponent(cc.Button).interactable=!1,this.startBut2.getComponent(cc.Button).interactable=!1,this.startBut3.getComponent(cc.Button).interactable=!1,this.allCardNodes=[],this.myCardNodes=[],this.agentsDef=this.getPersistantData(),this.node.on(cc.Node.EventType.TOUCH_END,function(){e.unselect()});var t,n=cc.find("GameData").getComponent("GameData");this.username=n.getName(),this.baseRoles=["bee","ske","ir","lr","log","lm","hr"],this.wxRelayTime,n.httpPost(this.username,"").then(function(o){console.log("------------GameData------------------"),console.log(o),t=JSON.parse(o),e.agentsDef=t,n.setData(t),e.setMyCards(),e.setAllCards(),e.setScore(),e.setUser(),setTimeout(function(){e.startBut1.getComponent(cc.Button).interactable=!0,e.startBut2.getComponent(cc.Button).interactable=!0,e.startBut3.getComponent(cc.Button).interactable=!0},2e3)},function(){e.setMyCards(),e.setAllCards(),e.setScore(),e.setUser(),e.startBut1.getComponent(cc.Button).interactable=!0,e.startBut2.getComponent(cc.Button).interactable=!0,e.startBut3.getComponent(cc.Button).interactable=!0})},start:function(){var e=cc.find("GameData").getComponent("GameData");console.log("upgraded:"+e.isUpgrade)},getRandomCharName:function(){for(var e=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t="",n=0;n<6;n++)t+=e[Math.floor(Math.random()*e.length)];return t},setScore:function(){var e=this.agentsDef.myscore,t=this.agentsDef.nextscore,n=this.node.getChildByName("clanWall"),o=n.getChildByName("wordbg").getChildByName("myScore").getComponent("cc.Label"),i=n.getChildByName("wordbg").getChildByName("nextScore").getComponent("cc.Label");o.string=e,i.string="/"+t},setUser:function(){var e=this.node.getChildByName("wobanner"),t=e.getChildByName("username").getComponent("cc.Label"),n=e.getChildByName("userlevel").getComponent("cc.Label");t.string=this.agentsDef.name,n.string=this.agentsDef.level},setMyCards:function(){for(var e,t,n,o,i,r,s=this.agentsDef.myList,a=this.node.getChildByName("clanWall"),l=0;l<6;l++)n=(t=cc.instantiate(this.playerPrefab[1])).getComponent("SelCard"),s[l]&&(o=this.agentsDef[s[l]].cost,i=this.agentsDef.level,n.setRole(s[l],o,i)),this.myCardNodes.push(n),e=l%6*124-295,r=cc.v2(e,24),t.setPosition(r),a.addChild(t)},setRelayUI:function(e){CC_WECHATGAME&&!e.inArray(this.baseRoles)&&(wx.shareAppMessage({title:"\u4e2d\u53e4\u6218\u7eaa",imageUrl:"https://www.asobee.mobi/fftower/res/acLogo2.jpg"}),this.wxRelayTime=(new Date).getTime())},ifWxValidRelay:function(){return!((new Date).getTime()-this.wxRelayTime<3e3)},seleOneCard:function(e){for(var t,n=0;n<this.allCardNodes.length;n++)(t=this.allCardNodes[n]).seleRole!==e&&(this.choosenCard=this.agentsDef[e],this.choosenCard.role=e,t.grey(!0));this.shakeMyCards(!0),this.setRelayUI(e),this.dispWxRelayWarn(!1)},dispWxRelayWarn:function(e){this.node.getChildByName("wxRelayWarn").active=e},getNowAgents:function(){for(var e,t,n,o=this.node.getChildByName("clanWall")._children,i=[],r=[],s={},a=0;a<o.length;a++)"SelCard"==o[a]._name&&(e=o[a].getComponent("SelCard").seleRole,t=o[a].getComponent("SelCard").magicCost,n=o[a].getComponent("SelCard").roleLevel,t>0&&(s={seleRole:e,magicCost:t,roleLevel:n},r.push(e),i.push(s)));return cc.find("GameData").getComponent("GameData").setMyList(r),i},getPersistantData:function(){return cc.find("GameData").getComponent("GameData").getData()},setCardsStatus:function(e){for(var t,n=0,o=0,i=0,r=this.node.getChildByName("clanWall"),s=r.getChildByName("wordboardbg").getChildByName("averageCos").getComponent("cc.Label"),a=r.getChildByName("wordbg").getChildByName("cardBut").getChildByName("myCardNum").getComponent("cc.Label"),l=r.getChildByName("wordbg").getChildByName("cardBut").getChildByName("allCardNum").getComponent("cc.Label"),c=0;c<this.allCardNodes.length;c++)(t=this.allCardNodes[c]).setCardStatus(t.seleRole.inArray(e));for(c=0;c<this.myCardNodes.length;c++)0!=this.myCardNodes[c].magicCost&&(n++,o+=this.myCardNodes[c].magicCost);i=o/n,s.string=i.toFixed(2),a.string=n,l.string="/"+this.allCardNodes.length},shakeMyCards:function(e){for(var t,n=0;n<this.myCardNodes.length;n++)t=this.myCardNodes[n],e?t.startCardJitter():t.stopCardJitter()},unselect:function(){this.choosenCard={};for(var e=0;e<this.allCardNodes.length;e++)this.allCardNodes[e].grey(!1);this.shakeMyCards(!1)},setAllCards:function(){for(var e,t,n,o,i,r,s,a,l=this.agentsDef.allList,c=0;c<l.length;c++)i=this.agentsDef[l[c]].cost,r=this.agentsDef[l[c]].disp,t=-400-200*Math.floor(c/4),e=c%4*170-200,(o=(n=cc.instantiate(this.playerPrefab[0])).getComponent("AllCard")).setRole(l[c],i,r),CC_WECHATGAME&&!l[c].inArray(this.baseRoles)&&((s=cc.instantiate(this.playerPrefab[3])).setPosition(cc.v2(38,68)),s.scaleX=.6,s.scaleY=.6,n.addChild(s)),a=cc.v2(e,t),n.setPosition(a),this.allCardNodes.push(o),this.node.addChild(n);this.setCardsStatus(this.agentsDef.myList)}}),cc._RF.pop()},{}],SkeSprite:[function(e,t){"use strict";cc._RF.push(t,"7d74bHhVUFHDLwoV20mklSC","SkeSprite");var n=e("MySprite");cc.Class({extends:n,properties:{role:""},start:function(){},shootArrow:function(){},getAttackDistance:function(e){return.6*(e.size+e.esize)},playAni:function(e,t,n){this.playAngleAnimationNear(e,t,n)},remove:function(){this._animation.play("dieoff2"),this.shadow.destroy(),this.blood.destroy()},dieStart:function(){},dieEnd:function(){this._animation.play("footprint")},footStart:function(){this.node.zIndex=-1,this.node.scaleX=1,this.node.scaleY=1},footEnd:function(){this.node.destroy()},beforeKill:function(){},afterKill:function(){this.node.destroy()},aFrame1Evt:function(){this.layoutOp.playSnd("ske")},frame1Evt:function(){this.dispShadow(1)},frame2Evt:function(){this.dispShadow(2)},frame3Evt:function(){this.dispShadow(3)},frame4Evt:function(){this.dispShadow(4)},frame5Evt:function(){this.dispShadow(5)},frame6Evt:function(){this.dispShadow(6)},frame7Evt:function(){this.dispShadow(7)}}),cc._RF.pop()},{MySprite:"MySprite"}],SocketProvider:[function(e,t){"use strict";cc._RF.push(t,"04045eoOP5HZaxEvt4Slsa0","SocketProvider");var n=e("acdata1").AcWar;cc.Class({extends:cc.Component,properties:{},getRandomCharName:function(){for(var e=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t="",n=0;n<6;n++)t+=e[Math.floor(Math.random()*e.length)];return t},setGameStart:function(e){this.roomId=e,console.log("my room:"+this.roomId),this.node.getChildByName("putWait").active=!1,this.node.getChildByName("word3").active=!0},setGameStartTime:function(){this.gameStartTime=Date.now()},socketHandle:function(e){var t=this;this.gameTraceStack=[],MY_SOCKET=window.io.connect("ws://13.112.214.196:10088"),MY_SOCKET.on("connect_error",function(){console.log("Connection Failed"),t.netErrDisp||(t.syncTimeout(),t.setConnFailInfo(),t.node.getChildByName("putWait").active=!0)}),MY_SOCKET.on("connected",function(){MY_SOCKET.heartbeatTimeout=5e3,MY_SOCKET.json.emit("init",{name:e,nick:e,img:"",roomId:""})}),MY_SOCKET.on("disconnect",function(){console.log("disconnect to server"),t.syncTimeout(),t.setConnFailInfo(),t.node.getChildByName("putWait").active=!0}),MY_SOCKET.on("otherlogin",function(e){-1==t.mainPlayer&&(t.mainPlayer=e.userData.length),2==e.userData.length&&t.setGameStart(e.roomId)}),MY_SOCKET.on("heart",function(e){var n=parseInt(e.counter);t.setTimeCounter(n)}),MY_SOCKET.on("buff",function(e){console.log("----buff data----"),console.log(e);var n=e;2==t.mainPlayer&&(n=t.mirrorBuffData(e)),t.createBuff(n)}),MY_SOCKET.on("end",function(e){console.log(e),console.log(t.mainPlayer),t.gameOverProcessor(t.mainPlayer,e),t.resultOp.setResultValue(t.mainPlayer,e),t.resultOp.show()}),MY_SOCKET.on("proto",function(e){for(var o=new Uint8Array(e),i=n.Info.decode(o),r=(i.base,0);r<i.base.length;r++)i.base[r].mypos={},i.base[r].enemypos={},i.base[r].targetpos={},i.base[r].mypos.x=i.base[r].mpx,i.base[r].mypos.y=i.base[r].mpy,i.base[r].enemypos.x=i.base[r].epx,i.base[r].enemypos.y=i.base[r].epy,i.base[r].targetpos.x=i.base[r].tpx,i.base[r].targetpos.y=i.base[r].tpy;for(r=0;r<i.fort.length;r++)i.fort[r].mypos={},i.fort[r].enemypos={},i.fort[r].targetpos={},i.fort[r].mypos.x=i.fort[r].mpx,i.fort[r].mypos.y=i.fort[r].mpy,i.fort[r].enemypos.x=i.fort[r].epx,i.fort[r].enemypos.y=i.fort[r].epy,i.fort[r].targetpos.x=i.fort[r].tpx,i.fort[r].targetpos.y=i.fort[r].tpy;for(r=0;r<i.agent.length;r++)i.agent[r].mypos={},i.agent[r].enemypos={},i.agent[r].targetpos={},i.agent[r].mypos.x=i.agent[r].mpx,i.agent[r].mypos.y=i.agent[r].mpy,i.agent[r].enemypos.x=i.agent[r].epx,i.agent[r].enemypos.y=i.agent[r].epy,i.agent[r].targetpos.x=i.agent[r].tpx,i.agent[r].targetpos.y=i.agent[r].tpy;for(r=0;r<i.bullet.length;r++)i.bullet[r].mypos={},i.bullet[r].enemypos={},i.bullet[r].targetpos={},i.bullet[r].mypos.x=i.bullet[r].mpx,i.bullet[r].mypos.y=i.bullet[r].mpy,i.bullet[r].enemypos.x=i.bullet[r].epx,i.bullet[r].enemypos.y=i.bullet[r].epy,i.bullet[r].targetpos.x=i.bullet[r].tpx,i.bullet[r].targetpos.y=i.bullet[r].tpy;for(r=0;r<i.rollLog.length;r++)i.rollLog[r].mypos={},i.rollLog[r].enemypos={},i.rollLog[r].targetpos={},i.rollLog[r].mypos.x=i.rollLog[r].mpx,i.rollLog[r].mypos.y=i.rollLog[r].mpy,i.rollLog[r].enemypos.x=i.rollLog[r].epx,i.rollLog[r].enemypos.y=i.rollLog[r].epy,i.rollLog[r].targetpos.x=i.rollLog[r].tpx,i.rollLog[r].targetpos.y=i.rollLog[r].tpy;var s={},a=i.agent,l=i.base,c=i.fort,u=i.bullet,f=i.rollLog;2==t.mainPlayer&&(a=t.mirrorAgentsData(a),u=t.mirrorAgentsData(u),l=t.mirrorBasesData(l),c=t.mirrorAgentsData(c),f=t.mirrorAgentsData(f)),s.agents=a,s.bullets=u,s.bases=l,s.forts=c,s.rollLogs=f,t.gameTraceStack.push(s),t.gameTraceStack.length>t.bufferLen&&(e=t.gameTraceStack[0],t.createAgents(e.agents),t.createBullets(e.bullets),t.createBases(e.bases),t.createForts(e.forts),t.createLogs(e.rollLogs))}),MY_SOCKET.on("agent",function(e){var n={},o=e.agents,i=e.bases,r=e.forts,s=e.bullets,a=e.rollLogs;2==t.mainPlayer&&(o=t.mirrorAgentsData(o),s=t.mirrorAgentsData(s),i=t.mirrorBasesData(i),r=t.mirrorAgentsData(r),a=t.mirrorAgentsData(a)),n.agents=o,n.bullets=s,n.bases=i,n.forts=r,n.rollLogs=a,t.gameTraceStack.push(n),t.gameTraceStack.length>t.bufferLen&&(e=t.gameTraceStack[0],t.createAgents(e.agents),t.createBullets(e.bullets),t.createBases(e.bases),t.createForts(e.forts),t.createLogs(e.rollLogs))}),this.startTraceTimer()},mirrorAgentsData:function(e){for(var t=this.node.width/30,n=this.node.height/30,o=e.length-1;o>=0;o--)e[o].mypos.x=t-e[o].mypos.x,e[o].mypos.y=n-e[o].mypos.y,e[o].enemypos&&(e[o].enemypos.x=t-e[o].enemypos.x,e[o].enemypos.y=n-e[o].enemypos.y),e[o].targetpos&&(e[o].targetpos.x=t-e[o].targetpos.x,e[o].targetpos.y=n-e[o].targetpos.y);return e},mirrorBuffData:function(e){var t=this.node.width/30,n=this.node.height/30;return e.mypos.x=t-e.mypos.x,e.mypos.y=n-e.mypos.y,e},mirrorBasesData:function(e){for(var t=this.node.width/30,n=this.node.height/30,o=e.length-1;o>=0;o--)1==e[o].objectId?e[o].objectId=4:2==e[o].objectId?e[o].objectId=6:3==e[o].objectId?e[o].objectId=5:4==e[o].objectId?e[o].objectId=1:6==e[o].objectId?e[o].objectId=2:5==e[o].objectId&&(e[o].objectId=3),e[o].mypos.x=t-e[o].mypos.x-1,e[o].mypos.y=n-e[o].mypos.y,e[o].enemypos&&(e[o].enemypos.x=t-e[o].enemypos.x-1,e[o].enemypos.y=n-e[o].enemypos.y),e[o].targetpos&&(e[o].targetpos.x=t-e[o].targetpos.x-1,e[o].targetpos.y=n-e[o].targetpos.y);return e},disconnectServer:function(){MY_SOCKET.disconnect()}}),cc._RF.pop()},{acdata1:"acdata1"}],SpriteIndex:[function(e,t){"use strict";cc._RF.push(t,"f6dd5p1dgBF87MB1jc9G2P1","SpriteIndex"),cc.Class({extends:cc.Component,editor:!1,properties:{spriteFrames:[cc.SpriteFrame],_index:0,index:{type:cc.Integer,get:function(){return this._index},set:function(e){e<0||(this._index=e%this.spriteFrames.length,this.node.getComponent(cc.Sprite).spriteFrame=this.spriteFrames[this._index])}}},next:function(){this.index++}}),cc._RF.pop()},{}],Welcome:[function(e,t){"use strict";cc._RF.push(t,"2a91cx8Yg9CyIhlOix85UiP","Welcome"),cc.Class({extends:cc.Component,properties:{loading:cc.ProgressBar,loadLabel:cc.Label,startBut:cc.Button},onLoad:function(){var e=this;this.startBut.getComponent(cc.Button).interactable=!1,cc.loader.downloader.loadSubpackage("resources",function(t){t?(console.log(t),e.goH5Load()):cc.loader.loadResDir("resources",function(){console.log("you can go now!!!!!!!!!"),cc.director.preloadScene("menu",e.onProgress.bind(e),function(){cc.director.preloadScene("game",e.onProgress.bind(e),function(){e.startBut.getComponent(cc.Button).interactable=!0})})})})},wxlogin:function(){var e=cc.find("GameData").getComponent("GameData"),t=this,n={},o=window.wx.getSystemInfoSync(),i=o.screenWidth,r=o.screenHeight;window.wx.getSetting({success:function(o){if(console.log(o.authSetting),o.authSetting["scope.userInfo"])console.log("\u7528\u6237\u5df2\u6388\u6743"),window.wx.getUserInfo({success:function(o){console.log(o),n.userInfo=o.userInfo,e.setWxUser(o.userInfo),t.play()}});else{console.log("\u7528\u6237\u672a\u6388\u6743"),t.startBut.getComponent(cc.Button).interactable=!0;var s=window.wx.createUserInfoButton({type:"text",text:"",style:{left:0,top:0,width:i,height:r,backgroundColor:"#00000000",color:"#ffffff",fontSize:20,textAlign:"center",lineHeight:r}});s.onTap(function(o){o.userInfo?(console.log("\u7528\u6237\u6388\u6743:",o),n.userInfo=o.userInfo,e.setWxUser(o.userInfo),t.play(),s.destroy()):console.log("\u7528\u6237\u62d2\u7edd\u6388\u6743:",o)})}}})},goH5Load:function(){var e=this;cc.director.preloadScene("menu",this.onProgress.bind(this),function(){cc.director.preloadScene("game",e.onProgress.bind(e),function(){e.startBut.getComponent(cc.Button).interactable=!0})})},start:function(){},loadProtobuf:function(){protobuf.load("acdata.proto",function(e,t){if(e)throw e;var n=t.lookupType("AcWar.AcwarMessage");console.log(n)})},testProtobuf:function(){cc.sys.isNative&&(cc.log("jsb.fileUtils="+jsb.fileUtils),jsb.fileUtils.addSearchPath("res/raw-assets/resources",!0)),protobuf.load("acdata.proto",function(e){if(e)throw console.log("load proto err:"+e),e;cc.log("\u52a0\u8f7dprotobuf\u5b8c\u6bd5\uff0c\u5f00\u59cb\u6d4b\u8bd5protobuf...")})},play:function(){cc.director.loadScene("menu")},onProgress:function(e,t){this.loading.progress=e/t,this.loadLabel.string=Math.floor(e/t*100)+"%"}}),cc._RF.pop()},{}],WizSprite:[function(e,t){"use strict";cc._RF.push(t,"65407smWQ1HBIUtleJMXxyA","WizSprite");var n=e("MySprite"),o=e("Common");cc.Class({extends:n,properties:{role:"wiz"},start:function(){this._animation=this.getComponent(cc.Animation),this._animation.WrapMode=cc.WrapMode.Loop},remove:function(){this._animation.play("dieoff2"),this.shadow.destroy(),this.blood.destroy()},dieStart:function(){console.log("die start")},dieEnd:function(){console.log("die end"),this._animation.play("footprint")},footStart:function(){console.log("foot start")},footEnd:function(){console.log("foot end"),this.node.destroy()},footPrint:function(){this.node.zIndex=-1,this.node.scaleX=1,this.node.scaleY=1},beforeKill:function(){},afterKill:function(){console.log("--remove archer node--"),this.node.destroy()},frame1Evt:function(){this.dispShadow(1)},frame2Evt:function(){this.dispShadow(2)},frame3Evt:function(){this.dispShadow(3)},frame4Evt:function(){this.dispShadow(4)},frame5Evt:function(){this.dispShadow(5)},frame6Evt:function(){this.dispShadow(6)},frame7Evt:function(){this.dispShadow(7)},aFrame1Evt:function(){this.dispShadow(1)},aFrame2Evt:function(){this.dispShadow(3)},aFrame3Evt:function(){this.dispShadow(5)},aFrame4Evt:function(){},aFrame5Evt:function(){this.dispShadow(7)},playAni:function(e,t,n){this.playAngleAnimationRemote(e,t,n)},isEnemyBase:function(e){return 1==e||2==e||3==e},isEnemyFort:function(e,t){return!(!e||2!=t)||!e&&1==t},playBaseWarriorAnimationDefault:function(e,t){var n;if(n=this.isEnemyBase(t)?"lr_s_walk":"lr_n_walk","move"!=e||this.lastAct!=n){var o=Math.ceil(125*Math.random())/100;this._animation.play(n,o),this.lastAct=n}},playFortWarriorAnimationDefault:function(e,t,n){var o;if(o=this.isEnemyFort(t,n)?"lr_s_walk":"lr_n_walk","move"!=e||this.lastAct!=o){var i=Math.ceil(125*Math.random())/100;this._animation.play(o,i),this.lastAct=o}},playBaseWarriorAnimation:function(e,t,n){var i,r,s,a,l,c,u,f=o.attackTargetYOffset,h=e.mypos.x,p=e.mypos.y,d=Math.ceil(125*Math.random())/100,y="",m=1;if(1==t?m=1:2==t&&(m=-1),i=e.enemypos.x,r=e.enemypos.y,a=cc.v2(30*h,30*p),l=cc.v2(30*i,30*r+f*m),0!=(c=a.sub(l)).x||0!=c.y){if(0==c.x&&(c.x=.1),0==c.y&&(c.y=.1),0!=c.x&&0!=c.y){var g=180/Math.PI*Math.atan(c.x/c.y);s=g,c.y>=0&&(s=g+180)}this._animation&&(y=(u=this.getActnameByAngle(s,n)).actName,this.node.scaleX=u.scaleX,this.lastAct==y&&"sa"!=n||("sa"==n?(this._animation.stop(),this._animation.play(y)):this._animation.play(y,d),this.angle=s,this.lastAct=y,this.lastScaleX=u.scaleX))}}}),cc._RF.pop()},{Common:"Common",MySprite:"MySprite"}],Word3Sprite:[function(e,t){"use strict";cc._RF.push(t,"3de4fjEQ25MUY1HJMfSTEZQ","Word3Sprite"),cc.Class({extends:cc.Component,properties:{},start:function(){this.node.active=!0},endCounter:function(){this.node.active=!1,this.getLayoutOp().setGameStartTime()},getLayoutOp:function(){return this.node.parent.getComponent("Game")}}),cc._RF.pop()},{}],acdata1:[function(e,t){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}cc._RF.push(t,"059c9En5zlCdYDuYpxXoxZF","acdata1");var o,i=e("./protobuf.js"),r=i.Reader,s=i.Writer,a=i.util,l=i.roots.default||(i.roots.default={});l.AcWar=((o={}).Agent=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.agentType="",e.prototype.mpx=0,e.prototype.mpy=0,e.prototype.life=0,e.prototype.groupKill=!1,e.prototype.isHero=!1,e.prototype.rot=0,e.prototype.attackDura=0,e.prototype.aid="",e.prototype.innerId="",e.prototype.role="",e.prototype.objectId=0,e.prototype.actType="",e.prototype.size=0,e.prototype.level=0,e.prototype.epx=0,e.prototype.epy=0,e.prototype.eid="",e.prototype.esize=0,e.prototype.tpx=0,e.prototype.tpy=0,e.prototype.updown="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),t.uint32(10).string(e.agentType),t.uint32(21).float(e.mpx),t.uint32(29).float(e.mpy),t.uint32(32).int32(e.life),t.uint32(40).bool(e.groupKill),t.uint32(48).bool(e.isHero),t.uint32(61).float(e.rot),t.uint32(69).float(e.attackDura),t.uint32(74).string(e.aid),t.uint32(82).string(e.innerId),t.uint32(90).string(e.role),t.uint32(96).int32(e.objectId),t.uint32(106).string(e.actType),t.uint32(117).float(e.size),t.uint32(120).int32(e.level),null!=e.epx&&Object.hasOwnProperty.call(e,"epx")&&t.uint32(133).float(e.epx),null!=e.epy&&Object.hasOwnProperty.call(e,"epy")&&t.uint32(141).float(e.epy),null!=e.eid&&Object.hasOwnProperty.call(e,"eid")&&t.uint32(146).string(e.eid),null!=e.esize&&Object.hasOwnProperty.call(e,"esize")&&t.uint32(157).float(e.esize),null!=e.tpx&&Object.hasOwnProperty.call(e,"tpx")&&t.uint32(165).float(e.tpx),null!=e.tpy&&Object.hasOwnProperty.call(e,"tpy")&&t.uint32(173).float(e.tpy),null!=e.updown&&Object.hasOwnProperty.call(e,"updown")&&t.uint32(178).string(e.updown),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new l.AcWar.Agent;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:o.agentType=e.string();break;case 2:o.mpx=e.float();break;case 3:o.mpy=e.float();break;case 4:o.life=e.int32();break;case 5:o.groupKill=e.bool();break;case 6:o.isHero=e.bool();break;case 7:o.rot=e.float();break;case 8:o.attackDura=e.float();break;case 9:o.aid=e.string();break;case 10:o.innerId=e.string();break;case 11:o.role=e.string();break;case 12:o.objectId=e.int32();break;case 13:o.actType=e.string();break;case 14:o.size=e.float();break;case 15:o.level=e.int32();break;case 16:o.epx=e.float();break;case 17:o.epy=e.float();break;case 18:o.eid=e.string();break;case 19:o.esize=e.float();break;case 20:o.tpx=e.float();break;case 21:o.tpy=e.float();break;case 22:o.updown=e.string();break;default:e.skipType(7&i)}}if(!o.hasOwnProperty("agentType"))throw a.ProtocolError("missing required 'agentType'",{instance:o});if(!o.hasOwnProperty("mpx"))throw a.ProtocolError("missing required 'mpx'",{instance:o});if(!o.hasOwnProperty("mpy"))throw a.ProtocolError("missing required 'mpy'",{instance:o});if(!o.hasOwnProperty("life"))throw a.ProtocolError("missing required 'life'",{instance:o});if(!o.hasOwnProperty("groupKill"))throw a.ProtocolError("missing required 'groupKill'",{instance:o});if(!o.hasOwnProperty("isHero"))throw a.ProtocolError("missing required 'isHero'",{instance:o});if(!o.hasOwnProperty("rot"))throw a.ProtocolError("missing required 'rot'",{instance:o});if(!o.hasOwnProperty("attackDura"))throw a.ProtocolError("missing required 'attackDura'",{instance:o});if(!o.hasOwnProperty("aid"))throw a.ProtocolError("missing required 'aid'",{instance:o});if(!o.hasOwnProperty("innerId"))throw a.ProtocolError("missing required 'innerId'",{instance:o});if(!o.hasOwnProperty("role"))throw a.ProtocolError("missing required 'role'",{instance:o});if(!o.hasOwnProperty("objectId"))throw a.ProtocolError("missing required 'objectId'",{instance:o});if(!o.hasOwnProperty("actType"))throw a.ProtocolError("missing required 'actType'",{instance:o});if(!o.hasOwnProperty("size"))throw a.ProtocolError("missing required 'size'",{instance:o});if(!o.hasOwnProperty("level"))throw a.ProtocolError("missing required 'level'",{instance:o});return o},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==n(e)||null===e?"object expected":a.isString(e.agentType)?"number"!=typeof e.mpx?"mpx: number expected":"number"!=typeof e.mpy?"mpy: number expected":a.isInteger(e.life)?"boolean"!=typeof e.groupKill?"groupKill: boolean expected":"boolean"!=typeof e.isHero?"isHero: boolean expected":"number"!=typeof e.rot?"rot: number expected":"number"!=typeof e.attackDura?"attackDura: number expected":a.isString(e.aid)?a.isString(e.innerId)?a.isString(e.role)?a.isInteger(e.objectId)?a.isString(e.actType)?"number"!=typeof e.size?"size: number expected":a.isInteger(e.level)?null!=e.epx&&e.hasOwnProperty("epx")&&"number"!=typeof e.epx?"epx: number expected":null!=e.epy&&e.hasOwnProperty("epy")&&"number"!=typeof e.epy?"epy: number expected":null!=e.eid&&e.hasOwnProperty("eid")&&!a.isString(e.eid)?"eid: string expected":null!=e.esize&&e.hasOwnProperty("esize")&&"number"!=typeof e.esize?"esize: number expected":null!=e.tpx&&e.hasOwnProperty("tpx")&&"number"!=typeof e.tpx?"tpx: number expected":null!=e.tpy&&e.hasOwnProperty("tpy")&&"number"!=typeof e.tpy?"tpy: number expected":null!=e.updown&&e.hasOwnProperty("updown")&&!a.isString(e.updown)?"updown: string expected":null:"level: integer expected":"actType: string expected":"objectId: integer expected":"role: string expected":"innerId: string expected":"aid: string expected":"life: integer expected":"agentType: string expected"},e.fromObject=function(e){if(e instanceof l.AcWar.Agent)return e;var t=new l.AcWar.Agent;return null!=e.agentType&&(t.agentType=String(e.agentType)),null!=e.mpx&&(t.mpx=Number(e.mpx)),null!=e.mpy&&(t.mpy=Number(e.mpy)),null!=e.life&&(t.life=0|e.life),null!=e.groupKill&&(t.groupKill=Boolean(e.groupKill)),null!=e.isHero&&(t.isHero=Boolean(e.isHero)),null!=e.rot&&(t.rot=Number(e.rot)),null!=e.attackDura&&(t.attackDura=Number(e.attackDura)),null!=e.aid&&(t.aid=String(e.aid)),null!=e.innerId&&(t.innerId=String(e.innerId)),null!=e.role&&(t.role=String(e.role)),null!=e.objectId&&(t.objectId=0|e.objectId),null!=e.actType&&(t.actType=String(e.actType)),null!=e.size&&(t.size=Number(e.size)),null!=e.level&&(t.level=0|e.level),null!=e.epx&&(t.epx=Number(e.epx)),null!=e.epy&&(t.epy=Number(e.epy)),null!=e.eid&&(t.eid=String(e.eid)),null!=e.esize&&(t.esize=Number(e.esize)),null!=e.tpx&&(t.tpx=Number(e.tpx)),null!=e.tpy&&(t.tpy=Number(e.tpy)),null!=e.updown&&(t.updown=String(e.updown)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.agentType="",n.mpx=0,n.mpy=0,n.life=0,n.groupKill=!1,n.isHero=!1,n.rot=0,n.attackDura=0,n.aid="",n.innerId="",n.role="",n.objectId=0,n.actType="",n.size=0,n.level=0,n.epx=0,n.epy=0,n.eid="",n.esize=0,n.tpx=0,n.tpy=0,n.updown=""),null!=e.agentType&&e.hasOwnProperty("agentType")&&(n.agentType=e.agentType),null!=e.mpx&&e.hasOwnProperty("mpx")&&(n.mpx=t.json&&!isFinite(e.mpx)?String(e.mpx):e.mpx),null!=e.mpy&&e.hasOwnProperty("mpy")&&(n.mpy=t.json&&!isFinite(e.mpy)?String(e.mpy):e.mpy),null!=e.life&&e.hasOwnProperty("life")&&(n.life=e.life),null!=e.groupKill&&e.hasOwnProperty("groupKill")&&(n.groupKill=e.groupKill),null!=e.isHero&&e.hasOwnProperty("isHero")&&(n.isHero=e.isHero),null!=e.rot&&e.hasOwnProperty("rot")&&(n.rot=t.json&&!isFinite(e.rot)?String(e.rot):e.rot),null!=e.attackDura&&e.hasOwnProperty("attackDura")&&(n.attackDura=t.json&&!isFinite(e.attackDura)?String(e.attackDura):e.attackDura),null!=e.aid&&e.hasOwnProperty("aid")&&(n.aid=e.aid),null!=e.innerId&&e.hasOwnProperty("innerId")&&(n.innerId=e.innerId),null!=e.role&&e.hasOwnProperty("role")&&(n.role=e.role),null!=e.objectId&&e.hasOwnProperty("objectId")&&(n.objectId=e.objectId),null!=e.actType&&e.hasOwnProperty("actType")&&(n.actType=e.actType),null!=e.size&&e.hasOwnProperty("size")&&(n.size=t.json&&!isFinite(e.size)?String(e.size):e.size),null!=e.level&&e.hasOwnProperty("level")&&(n.level=e.level),null!=e.epx&&e.hasOwnProperty("epx")&&(n.epx=t.json&&!isFinite(e.epx)?String(e.epx):e.epx),null!=e.epy&&e.hasOwnProperty("epy")&&(n.epy=t.json&&!isFinite(e.epy)?String(e.epy):e.epy),null!=e.eid&&e.hasOwnProperty("eid")&&(n.eid=e.eid),null!=e.esize&&e.hasOwnProperty("esize")&&(n.esize=t.json&&!isFinite(e.esize)?String(e.esize):e.esize),null!=e.tpx&&e.hasOwnProperty("tpx")&&(n.tpx=t.json&&!isFinite(e.tpx)?String(e.tpx):e.tpx),null!=e.tpy&&e.hasOwnProperty("tpy")&&(n.tpy=t.json&&!isFinite(e.tpy)?String(e.tpy):e.tpy),null!=e.updown&&e.hasOwnProperty("updown")&&(n.updown=e.updown),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),o.Info=function(){function e(e){if(this.base=[],this.fort=[],this.agent=[],this.bullet=[],this.rollLog=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.base=a.emptyArray,e.prototype.fort=a.emptyArray,e.prototype.agent=a.emptyArray,e.prototype.bullet=a.emptyArray,e.prototype.rollLog=a.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=s.create()),null!=e.base&&e.base.length)for(var n=0;n<e.base.length;++n)l.AcWar.Agent.encode(e.base[n],t.uint32(10).fork()).ldelim();if(null!=e.fort&&e.fort.length)for(n=0;n<e.fort.length;++n)l.AcWar.Agent.encode(e.fort[n],t.uint32(18).fork()).ldelim();if(null!=e.agent&&e.agent.length)for(n=0;n<e.agent.length;++n)l.AcWar.Agent.encode(e.agent[n],t.uint32(26).fork()).ldelim();if(null!=e.bullet&&e.bullet.length)for(n=0;n<e.bullet.length;++n)l.AcWar.Agent.encode(e.bullet[n],t.uint32(34).fork()).ldelim();if(null!=e.rollLog&&e.rollLog.length)for(n=0;n<e.rollLog.length;++n)l.AcWar.Agent.encode(e.rollLog[n],t.uint32(42).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new l.AcWar.Info;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:o.base&&o.base.length||(o.base=[]),o.base.push(l.AcWar.Agent.decode(e,e.uint32()));break;case 2:o.fort&&o.fort.length||(o.fort=[]),o.fort.push(l.AcWar.Agent.decode(e,e.uint32()));break;case 3:o.agent&&o.agent.length||(o.agent=[]),o.agent.push(l.AcWar.Agent.decode(e,e.uint32()));break;case 4:o.bullet&&o.bullet.length||(o.bullet=[]),o.bullet.push(l.AcWar.Agent.decode(e,e.uint32()));break;case 5:o.rollLog&&o.rollLog.length||(o.rollLog=[]),o.rollLog.push(l.AcWar.Agent.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return o},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==n(e)||null===e)return"object expected";if(null!=e.base&&e.hasOwnProperty("base")){if(!Array.isArray(e.base))return"base: array expected";for(var t=0;t<e.base.length;++t)if(o=l.AcWar.Agent.verify(e.base[t]))return"base."+o}if(null!=e.fort&&e.hasOwnProperty("fort")){if(!Array.isArray(e.fort))return"fort: array expected";for(t=0;t<e.fort.length;++t)if(o=l.AcWar.Agent.verify(e.fort[t]))return"fort."+o}if(null!=e.agent&&e.hasOwnProperty("agent")){if(!Array.isArray(e.agent))return"agent: array expected";for(t=0;t<e.agent.length;++t)if(o=l.AcWar.Agent.verify(e.agent[t]))return"agent."+o}if(null!=e.bullet&&e.hasOwnProperty("bullet")){if(!Array.isArray(e.bullet))return"bullet: array expected";for(t=0;t<e.bullet.length;++t)if(o=l.AcWar.Agent.verify(e.bullet[t]))return"bullet."+o}if(null!=e.rollLog&&e.hasOwnProperty("rollLog")){if(!Array.isArray(e.rollLog))return"rollLog: array expected";for(t=0;t<e.rollLog.length;++t){var o;if(o=l.AcWar.Agent.verify(e.rollLog[t]))return"rollLog."+o}}return null},e.fromObject=function(e){if(e instanceof l.AcWar.Info)return e;var t=new l.AcWar.Info;if(e.base){if(!Array.isArray(e.base))throw TypeError(".AcWar.Info.base: array expected");t.base=[];for(var o=0;o<e.base.length;++o){if("object"!==n(e.base[o]))throw TypeError(".AcWar.Info.base: object expected");t.base[o]=l.AcWar.Agent.fromObject(e.base[o])}}if(e.fort){if(!Array.isArray(e.fort))throw TypeError(".AcWar.Info.fort: array expected");for(t.fort=[],o=0;o<e.fort.length;++o){if("object"!==n(e.fort[o]))throw TypeError(".AcWar.Info.fort: object expected");t.fort[o]=l.AcWar.Agent.fromObject(e.fort[o])}}if(e.agent){if(!Array.isArray(e.agent))throw TypeError(".AcWar.Info.agent: array expected");for(t.agent=[],o=0;o<e.agent.length;++o){if("object"!==n(e.agent[o]))throw TypeError(".AcWar.Info.agent: object expected");t.agent[o]=l.AcWar.Agent.fromObject(e.agent[o])}}if(e.bullet){if(!Array.isArray(e.bullet))throw TypeError(".AcWar.Info.bullet: array expected");for(t.bullet=[],o=0;o<e.bullet.length;++o){if("object"!==n(e.bullet[o]))throw TypeError(".AcWar.Info.bullet: object expected");t.bullet[o]=l.AcWar.Agent.fromObject(e.bullet[o])}}if(e.rollLog){if(!Array.isArray(e.rollLog))throw TypeError(".AcWar.Info.rollLog: array expected");for(t.rollLog=[],o=0;o<e.rollLog.length;++o){if("object"!==n(e.rollLog[o]))throw TypeError(".AcWar.Info.rollLog: object expected");t.rollLog[o]=l.AcWar.Agent.fromObject(e.rollLog[o])}}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.base=[],n.fort=[],n.agent=[],n.bullet=[],n.rollLog=[]),e.base&&e.base.length){n.base=[];for(var o=0;o<e.base.length;++o)n.base[o]=l.AcWar.Agent.toObject(e.base[o],t)}if(e.fort&&e.fort.length)for(n.fort=[],o=0;o<e.fort.length;++o)n.fort[o]=l.AcWar.Agent.toObject(e.fort[o],t);if(e.agent&&e.agent.length)for(n.agent=[],o=0;o<e.agent.length;++o)n.agent[o]=l.AcWar.Agent.toObject(e.agent[o],t);if(e.bullet&&e.bullet.length)for(n.bullet=[],o=0;o<e.bullet.length;++o)n.bullet[o]=l.AcWar.Agent.toObject(e.bullet[o],t);if(e.rollLog&&e.rollLog.length)for(n.rollLog=[],o=0;o<e.rollLog.length;++o)n.rollLog[o]=l.AcWar.Agent.toObject(e.rollLog[o],t);return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),o),t.exports=l,cc._RF.pop()},{"./protobuf.js":"protobuf"}],aniComponent:[function(e,t){"use strict";cc._RF.push(t,"86f1aoqPclID4CwDWRy9QKi","aniComponent"),cc.Class({extends:cc.Component,properties:{sprAtlas:cc.SpriteAtlas,wrapMode:cc.WrapMode.default},onLoad:function(){this._animation=this.getComponent(cc.Animation),this.setAnimation()},start:function(){this.playAnimation()},setAnimation:function(){if(this.sprAtlas){var e=this.sprAtlas.getSpriteFrames(),t=cc.AnimationClip.createWithSpriteFrames(e,e.length);t.name="anim_001",t.speed=.1,t.sample=60,t.wrapMode=this.wrapMode,this._animation.addClip(t)}},playAnimation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cc.WrapMode.Default,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:60;if(this._animation){var o=this._animation.getAnimationState("anim_001");o.clip.wrapMode=e,o.clip.speed=t,o.clip.sample=n,this._animation.play("anim_001")}}}),cc._RF.pop()},{}],protobuf:[function(require,module,exports){"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}cc._RF.push(module,"f28ba3pGVlLR6xnGfV2Gugq","protobuf"),function(global,undefined){(function(e,t){var n=global.protobuf=function n(o){var i=t[o];return i||e[o][0].call(i=t[o]={exports:{}},n,i,i.exports),i.exports}(19);"function"==typeof define&&define.amd&&define(["long"],function(e){return e&&e.isLong&&(n.util.Long=e,n.configure()),n}),"object"===(void 0===module?"undefined":_typeof(module))&&module&&module.exports&&(module.exports=n)})({1:[function(e,t){t.exports=function(e,t){for(var n=new Array(arguments.length-1),o=0,i=2,r=!0;i<arguments.length;)n[o++]=arguments[i++];return new Promise(function(i,s){n[o]=function(e){if(r)if(r=!1,e)s(e);else{for(var t=new Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];i.apply(null,t)}};try{e.apply(t||null,n)}catch(a){r&&(r=!1,s(a))}})}},{}],2:[function(e,t,n){var o=n;o.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};for(var i=new Array(64),r=new Array(123),s=0;s<64;)r[i[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;o.encode=function(e,t,n){for(var o,r=null,s=[],a=0,l=0;t<n;){var c=e[t++];switch(l){case 0:s[a++]=i[c>>2],o=(3&c)<<4,l=1;break;case 1:s[a++]=i[o|c>>4],o=(15&c)<<2,l=2;break;case 2:s[a++]=i[o|c>>6],s[a++]=i[63&c],l=0}a>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,s)),a=0)}return l&&(s[a++]=i[o],s[a++]=61,1===l&&(s[a++]=61)),r?(a&&r.push(String.fromCharCode.apply(String,s.slice(0,a))),r.join("")):String.fromCharCode.apply(String,s.slice(0,a))},o.decode=function(e,t,n){for(var o,i=n,s=0,a=0;a<e.length;){var l=e.charCodeAt(a++);if(61===l&&s>1)break;if((l=r[l])===undefined)throw Error("invalid encoding");switch(s){case 0:o=l,s=1;break;case 1:t[n++]=o<<2|(48&l)>>4,o=l,s=2;break;case 2:t[n++]=(15&o)<<4|(60&l)>>2,o=l,s=3;break;case 3:t[n++]=(3&o)<<6|l,s=0}}if(1===s)throw Error("invalid encoding");return n-i},o.test=function(e){return/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(e)}},{}],3:[function(e,t){function n(e,t){"string"==typeof e&&(t=e,e=undefined);var o=[];function i(e){if("string"!=typeof e){var t=r();if(n.verbose&&console.log("codegen: "+t),t="return "+t,e){for(var s=Object.keys(e),a=new Array(s.length+1),l=new Array(s.length),c=0;c<s.length;)a[c]=s[c],l[c]=e[s[c++]];return a[c]=t,Function.apply(null,a).apply(null,l)}return Function(t)()}for(var u=new Array(arguments.length-1),f=0;f<u.length;)u[f]=arguments[++f];if(f=0,e=e.replace(/%([%dfijs])/g,function(e,t){var n=u[f++];switch(t){case"d":case"f":return String(Number(n));case"i":return String(Math.floor(n));case"j":return JSON.stringify(n);case"s":return String(n)}return"%"}),f!==u.length)throw Error("parameter count mismatch");return o.push(e),i}function r(n){return"function "+(n||t||"")+"("+(e&&e.join(",")||"")+"){\n  "+o.join("\n  ")+"\n}"}return i.toString=r,i}t.exports=n,n.verbose=!1},{}],4:[function(e,t){function n(){this._listeners={}}t.exports=n,n.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},n.prototype.off=function(e,t){if(e===undefined)this._listeners={};else if(t===undefined)this._listeners[e]=[];else for(var n=this._listeners[e],o=0;o<n.length;)n[o].fn===t?n.splice(o,1):++o;return this},n.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],o=1;o<arguments.length;)n.push(arguments[o++]);for(o=0;o<t.length;)t[o].fn.apply(t[o++].ctx,n)}return this}},{}],5:[function(e,t){t.exports=i;var n=e(1),o=e(7)("fs");function i(e,t,r){return"function"==typeof t?(r=t,t={}):t||(t={}),r?!t.xhr&&o&&o.readFile?o.readFile(e,function(n,o){return n&&"undefined"!=typeof XMLHttpRequest?i.xhr(e,t,r):n?r(n):r(null,t.binary?o:o.toString("utf8"))}):i.xhr(e,t,r):n(i,this,e,t)}i.xhr=function(e,t,n){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(4!==o.readyState)return undefined;if(0!==o.status&&200!==o.status)return n(Error("status "+o.status));if(t.binary){var e=o.response;if(!e){e=[];for(var i=0;i<o.responseText.length;++i)e.push(255&o.responseText.charCodeAt(i))}return n(null,"undefined"!=typeof Uint8Array?new Uint8Array(e):e)}return n(null,o.responseText)},t.binary&&("overrideMimeType"in o&&o.overrideMimeType("text/plain; charset=x-user-defined"),o.responseType="arraybuffer"),o.open("GET",e),o.send()}},{1:1,7:7}],6:[function(e,t){function n(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),n=new Uint8Array(t.buffer),o=128===n[3];function i(e,o,i){t[0]=e,o[i]=n[0],o[i+1]=n[1],o[i+2]=n[2],o[i+3]=n[3]}function r(e,o,i){t[0]=e,o[i]=n[3],o[i+1]=n[2],o[i+2]=n[1],o[i+3]=n[0]}function s(e,o){return n[0]=e[o],n[1]=e[o+1],n[2]=e[o+2],n[3]=e[o+3],t[0]}function a(e,o){return n[3]=e[o],n[2]=e[o+1],n[1]=e[o+2],n[0]=e[o+3],t[0]}e.writeFloatLE=o?i:r,e.writeFloatBE=o?r:i,e.readFloatLE=o?s:a,e.readFloatBE=o?a:s}():function(){function t(e,t,n,o){var i=t<0?1:0;if(i&&(t=-t),0===t)e(1/t>0?0:2147483648,n,o);else if(isNaN(t))e(2143289344,n,o);else if(t>34028234663852886e22)e((i<<31|2139095040)>>>0,n,o);else if(t<11754943508222875e-54)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,n,o);else{var r=Math.floor(Math.log(t)/Math.LN2);e((i<<31|r+127<<23|8388607&Math.round(t*Math.pow(2,-r)*8388608))>>>0,n,o)}}function n(e,t,n){var o=e(t,n),i=2*(o>>31)+1,r=o>>>23&255,s=8388607&o;return 255===r?s?NaN:i*(1/0):0===r?1401298464324817e-60*i*s:i*Math.pow(2,r-150)*(s+8388608)}e.writeFloatLE=t.bind(null,o),e.writeFloatBE=t.bind(null,i),e.readFloatLE=n.bind(null,r),e.readFloatBE=n.bind(null,s)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),n=new Uint8Array(t.buffer),o=128===n[7];function i(e,o,i){t[0]=e,o[i]=n[0],o[i+1]=n[1],o[i+2]=n[2],o[i+3]=n[3],o[i+4]=n[4],o[i+5]=n[5],o[i+6]=n[6],o[i+7]=n[7]}function r(e,o,i){t[0]=e,o[i]=n[7],o[i+1]=n[6],o[i+2]=n[5],o[i+3]=n[4],o[i+4]=n[3],o[i+5]=n[2],o[i+6]=n[1],o[i+7]=n[0]}function s(e,o){return n[0]=e[o],n[1]=e[o+1],n[2]=e[o+2],n[3]=e[o+3],n[4]=e[o+4],n[5]=e[o+5],n[6]=e[o+6],n[7]=e[o+7],t[0]}function a(e,o){return n[7]=e[o],n[6]=e[o+1],n[5]=e[o+2],n[4]=e[o+3],n[3]=e[o+4],n[2]=e[o+5],n[1]=e[o+6],n[0]=e[o+7],t[0]}e.writeDoubleLE=o?i:r,e.writeDoubleBE=o?r:i,e.readDoubleLE=o?s:a,e.readDoubleBE=o?a:s}():function(){function t(e,t,n,o,i,r){var s=o<0?1:0;if(s&&(o=-o),0===o)e(0,i,r+t),e(1/o>0?0:2147483648,i,r+n);else if(isNaN(o))e(0,i,r+t),e(2146959360,i,r+n);else if(o>17976931348623157e292)e(0,i,r+t),e((s<<31|2146435072)>>>0,i,r+n);else{var a;if(o<22250738585072014e-324)e((a=o/5e-324)>>>0,i,r+t),e((s<<31|a/4294967296)>>>0,i,r+n);else{var l=Math.floor(Math.log(o)/Math.LN2);1024===l&&(l=1023),e(4503599627370496*(a=o*Math.pow(2,-l))>>>0,i,r+t),e((s<<31|l+1023<<20|1048576*a&1048575)>>>0,i,r+n)}}}function n(e,t,n,o,i){var r=e(o,i+t),s=e(o,i+n),a=2*(s>>31)+1,l=s>>>20&2047,c=4294967296*(1048575&s)+r;return 2047===l?c?NaN:a*(1/0):0===l?5e-324*a*c:a*Math.pow(2,l-1075)*(c+4503599627370496)}e.writeDoubleLE=t.bind(null,o,0,4),e.writeDoubleBE=t.bind(null,i,4,0),e.readDoubleLE=n.bind(null,r,0,4),e.readDoubleBE=n.bind(null,s,4,0)}(),e}function o(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function i(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function r(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function s(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}t.exports=n(n)},{}],7:[function(require,module,exports){function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},{}],8:[function(e,t,n){var o=n,i=o.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},r=o.normalize=function(e){var t=(e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),n=i(e),o="";n&&(o=t.shift()+"/");for(var r=0;r<t.length;)".."===t[r]?r>0&&".."!==t[r-1]?t.splice(--r,2):n?t.splice(r,1):++r:"."===t[r]?t.splice(r,1):++r;return o+t.join("/")};o.resolve=function(e,t,n){return n||(t=r(t)),i(t)?t:(n||(e=r(e)),(e=e.replace(/(?:\/|^)[^\/]+$/,"")).length?r(e+"/"+t):t)}},{}],9:[function(e,t){t.exports=function(e,t,n){var o=n||8192,i=o>>>1,r=null,s=o;return function(n){if(n<1||n>i)return e(n);s+n>o&&(r=e(o),s=0);var a=t.call(r,s,s+=n);return 7&s&&(s=1+(7|s)),a}}},{}],10:[function(e,t,n){var o=n;o.length=function(e){for(var t=0,n=0,o=0;o<e.length;++o)(n=e.charCodeAt(o))<128?t+=1:n<2048?t+=2:55296==(64512&n)&&56320==(64512&e.charCodeAt(o+1))?(++o,t+=4):t+=3;return t},o.read=function(e,t,n){if(n-t<1)return"";for(var o,i=null,r=[],s=0;t<n;)(o=e[t++])<128?r[s++]=o:o>191&&o<224?r[s++]=(31&o)<<6|63&e[t++]:o>239&&o<365?(o=((7&o)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,r[s++]=55296+(o>>10),r[s++]=56320+(1023&o)):r[s++]=(15&o)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,r)),s=0);return i?(s&&i.push(String.fromCharCode.apply(String,r.slice(0,s))),i.join("")):String.fromCharCode.apply(String,r.slice(0,s))},o.write=function(e,t,n){for(var o,i,r=n,s=0;s<e.length;++s)(o=e.charCodeAt(s))<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=63&o|128):55296==(64512&o)&&56320==(64512&(i=e.charCodeAt(s+1)))?(o=65536+((1023&o)<<10)+(1023&i),++s,t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=63&o|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=63&o|128);return n-r}},{}],11:[function(e,t){t.exports=i;var n,o=/\/|\./;function i(e,t){o.test(e)||(e="google/protobuf/"+e+".proto",t={nested:{google:{nested:{protobuf:{nested:t}}}}}),i[e]=t}i("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}}),i("duration",{Duration:n={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),i("timestamp",{Timestamp:n}),i("empty",{Empty:{fields:{}}}),i("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),i("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),i("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}}),i.get=function(e){return i[e]||null}},{}],12:[function(e,t,n){var o=n,i=e(15),r=e(37);function s(e,t,n,o){if(t.resolvedType)if(t.resolvedType instanceof i){e("switch(d%s){",o);for(var r=t.resolvedType.values,s=Object.keys(r),a=0;a<s.length;++a)t.repeated&&r[s[a]]===t.typeDefault&&e("default:"),e("case%j:",s[a])("case %i:",r[s[a]])("m%s=%j",o,r[s[a]])("break");e("}")}else e('if(typeof d%s!=="object")',o)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",o,n,o);else{var l=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",o,o);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",o,o);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",o,o);break;case"uint64":l=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",o,o,l)('else if(typeof d%s==="string")',o)("m%s=parseInt(d%s,10)",o,o)('else if(typeof d%s==="number")',o)("m%s=d%s",o,o)('else if(typeof d%s==="object")',o)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",o,o,o,l?"true":"");break;case"bytes":e('if(typeof d%s==="string")',o)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",o,o,o)("else if(d%s.length)",o)("m%s=d%s",o,o);break;case"string":e("m%s=String(d%s)",o,o);break;case"bool":e("m%s=Boolean(d%s)",o,o)}}return e}function a(e,t,n,o){if(t.resolvedType)t.resolvedType instanceof i?e("d%s=o.enums===String?types[%i].values[m%s]:m%s",o,n,o,o):e("d%s=types[%i].toObject(m%s,o)",o,n,o);else{var r=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",o,o,o,o);break;case"uint64":r=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',o)("d%s=o.longs===String?String(m%s):m%s",o,o,o)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",o,o,o,o,r?"true":"",o);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",o,o,o,o,o);break;default:e("d%s=m%s",o,o)}}return e}o.fromObject=function(e){var t=e.fieldsArray,n=r.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return n("return new this.ctor");n("var m=new this.ctor");for(var o=0;o<t.length;++o){var a=t[o].resolve(),l=r.safeProp(a.name);a.map?(n("if(d%s){",l)('if(typeof d%s!=="object")',l)("throw TypeError(%j)",a.fullName+": object expected")("m%s={}",l)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",l),s(n,a,o,l+"[ks[i]]")("}")("}")):a.repeated?(n("if(d%s){",l)("if(!Array.isArray(d%s))",l)("throw TypeError(%j)",a.fullName+": array expected")("m%s=[]",l)("for(var i=0;i<d%s.length;++i){",l),s(n,a,o,l+"[i]")("}")("}")):(a.resolvedType instanceof i||n("if(d%s!=null){",l),s(n,a,o,l),a.resolvedType instanceof i||n("}"))}return n("return m")},o.toObject=function(e){var t=e.fieldsArray.slice().sort(r.compareFieldsById);if(!t.length)return r.codegen()("return {}");for(var n=r.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),o=[],s=[],l=[],c=0;c<t.length;++c)t[c].partOf||(t[c].resolve().repeated?o:t[c].map?s:l).push(t[c]);if(o.length){for(n("if(o.arrays||o.defaults){"),c=0;c<o.length;++c)n("d%s=[]",r.safeProp(o[c].name));n("}")}if(s.length){for(n("if(o.objects||o.defaults){"),c=0;c<s.length;++c)n("d%s={}",r.safeProp(s[c].name));n("}")}if(l.length){for(n("if(o.defaults){"),c=0;c<l.length;++c){var u=l[c],f=r.safeProp(u.name);u.resolvedType instanceof i?n("d%s=o.enums===String?%j:%j",f,u.resolvedType.valuesById[u.typeDefault],u.typeDefault):u.long?n("if(util.Long){")("var n=new util.Long(%i,%i,%j)",u.typeDefault.low,u.typeDefault.high,u.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",f)("}else")("d%s=o.longs===String?%j:%i",f,u.typeDefault.toString(),u.typeDefault.toNumber()):u.bytes?n("d%s=o.bytes===String?%j:%s",f,String.fromCharCode.apply(String,u.typeDefault),"["+Array.prototype.slice.call(u.typeDefault).join(",")+"]"):n("d%s=%j",f,u.typeDefault)}n("}")}var h=!1;for(c=0;c<t.length;++c){u=t[c];var p=e._fieldsArray.indexOf(u);f=r.safeProp(u.name),u.map?(h||(h=!0,n("var ks2")),n("if(m%s&&(ks2=Object.keys(m%s)).length){",f,f)("d%s={}",f)("for(var j=0;j<ks2.length;++j){"),a(n,u,p,f+"[ks2[j]]")("}")):u.repeated?(n("if(m%s&&m%s.length){",f,f)("d%s=[]",f)("for(var j=0;j<m%s.length;++j){",f),a(n,u,p,f+"[j]")("}")):(n("if(m%s!=null&&m.hasOwnProperty(%j)){",f,u.name),a(n,u,p,f),u.partOf&&n("if(o.oneofs)")("d%s=%j",r.safeProp(u.partOf.name),u.name)),n("}")}return n("return d")}},{15:15,37:37}],13:[function(e,t){t.exports=function(e){var t=i.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter(function(e){return e.map}).length?",k":""))("while(r.pos<c){")("var t=r.uint32()");e.group&&t("if((t&7)===4)")("break"),t("switch(t>>>3){");for(var s=0;s<e.fieldsArray.length;++s){var a=e._fieldsArray[s].resolve(),l=a.resolvedType instanceof n?"int32":a.type,c="m"+i.safeProp(a.name);t("case %i:",a.id),a.map?(t("r.skip().pos++")("if(%s===util.emptyObject)",c)("%s={}",c)("k=r.%s()",a.keyType)("r.pos++"),o.long[a.keyType]!==undefined?o.basic[l]===undefined?t('%s[typeof k==="object"?util.longToHash(k):k]=types[%i].decode(r,r.uint32())',c,s):t('%s[typeof k==="object"?util.longToHash(k):k]=r.%s()',c,l):o.basic[l]===undefined?t("%s[k]=types[%i].decode(r,r.uint32())",c,s):t("%s[k]=r.%s()",c,l)):a.repeated?(t("if(!(%s&&%s.length))",c,c)("%s=[]",c),o.packed[l]!==undefined&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",c,l)("}else"),o.basic[l]===undefined?t(a.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",c,s):t("%s.push(r.%s())",c,l)):o.basic[l]===undefined?t(a.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",c,s):t("%s=r.%s()",c,l),t("break")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),s=0;s<e._fieldsArray.length;++s){var u=e._fieldsArray[s];u.required&&t("if(!m.hasOwnProperty(%j))",u.name)("throw util.ProtocolError(%j,{instance:m})",r(u))}return t("return m")};var n=e(15),o=e(36),i=e(37);function r(e){return"missing required '"+e.name+"'"}},{15:15,36:36,37:37}],14:[function(e,t){t.exports=function(e){for(var t,s=i.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),a=e.fieldsArray.slice().sort(i.compareFieldsById),l=0;l<a.length;++l){var c=a[l].resolve(),u=e._fieldsArray.indexOf(c),f=c.resolvedType instanceof n?"int32":c.type,h=o.basic[f];t="m"+i.safeProp(c.name),c.map?(s("if(%s!=null&&m.hasOwnProperty(%j)){",t,c.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",t)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(c.id<<3|2)>>>0,8|o.mapKey[c.keyType],c.keyType),h===undefined?s("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",u,t):s(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|h,f,t),s("}")("}")):c.repeated?(s("if(%s!=null&&%s.length){",t,t),c.packed&&o.packed[f]!==undefined?s("w.uint32(%i).fork()",(c.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",t)("w.%s(%s[i])",f,t)("w.ldelim()"):(s("for(var i=0;i<%s.length;++i)",t),h===undefined?r(s,c,u,t+"[i]"):s("w.uint32(%i).%s(%s[i])",(c.id<<3|h)>>>0,f,t)),s("}")):(c.optional&&s("if(%s!=null&&m.hasOwnProperty(%j))",t,c.name),h===undefined?r(s,c,u,t):s("w.uint32(%i).%s(%s)",(c.id<<3|h)>>>0,f,t))}return s("return w")};var n=e(15),o=e(36),i=e(37);function r(e,t,n,o){return t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",n,o,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",n,o,(t.id<<3|2)>>>0)}},{15:15,36:36,37:37}],15:[function(e,t){t.exports=r;var n=e(24);((r.prototype=Object.create(n.prototype)).constructor=r).className="Enum";var o=e(23),i=e(37);function r(e,t,o,i,r){if(n.call(this,e,o),t&&"object"!==_typeof(t))throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=i,this.comments=r||{},this.reserved=undefined,t)for(var s=Object.keys(t),a=0;a<s.length;++a)"number"==typeof t[s[a]]&&(this.valuesById[this.values[s[a]]=t[s[a]]]=s[a])}r.fromJSON=function(e,t){var n=new r(e,t.values,t.options,t.comment,t.comments);return n.reserved=t.reserved,n},r.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return i.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:undefined,"comment",t?this.comment:undefined,"comments",t?this.comments:undefined])},r.prototype.add=function(e,t,n){if(!i.isString(e))throw TypeError("name must be a string");if(!i.isInteger(t))throw TypeError("id must be an integer");if(this.values[e]!==undefined)throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(this.valuesById[t]!==undefined){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return this.comments[e]=n||null,this},r.prototype.remove=function(e){if(!i.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this},r.prototype.isReservedId=function(e){return o.isReservedId(this.reserved,e)},r.prototype.isReservedName=function(e){return o.isReservedName(this.reserved,e)}},{23:23,24:24,37:37}],16:[function(e,t){t.exports=l;var n=e(24);((l.prototype=Object.create(n.prototype)).constructor=l).className="Field";var o,i=e(15),r=e(36),s=e(37),a=/^required|optional|repeated$/;function l(e,t,o,i,l,c,u){if(s.isObject(i)?(u=l,c=i,i=l=undefined):s.isObject(l)&&(u=c,c=l,l=undefined),n.call(this,e,c),!s.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!s.isString(o))throw TypeError("type must be a string");if(i!==undefined&&!a.test(i=i.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(l!==undefined&&!s.isString(l))throw TypeError("extend must be a string");this.rule=i&&"optional"!==i?i:undefined,this.type=o,this.id=t,this.extend=l||undefined,this.required="required"===i,this.optional=!this.required,this.repeated="repeated"===i,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!s.Long&&r.long[o]!==undefined,this.bytes="bytes"===o,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=u}l.fromJSON=function(e,t){return new l(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)},Object.defineProperty(l.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),l.prototype.setOption=function(e,t,o){return"packed"===e&&(this._packed=null),n.prototype.setOption.call(this,e,t,o)},l.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return s.toObject(["rule","optional"!==this.rule&&this.rule||undefined,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:undefined])},l.prototype.resolve=function(){if(this.resolved)return this;if((this.typeDefault=r.defaults[this.type])===undefined&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof o?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof i&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(this.options.packed===undefined||!this.resolvedType||this.resolvedType instanceof i)||delete this.options.packed,Object.keys(this.options).length||(this.options=undefined)),this.long)this.typeDefault=s.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var e;s.base64.test(this.typeDefault)?s.base64.decode(this.typeDefault,e=s.newBuffer(s.base64.length(this.typeDefault)),0):s.utf8.write(this.typeDefault,e=s.newBuffer(s.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=s.emptyObject:this.repeated?this.defaultValue=s.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof o&&(this.parent.ctor.prototype[this.name]=this.defaultValue),n.prototype.resolve.call(this)},l.d=function(e,t,n,o){return"function"==typeof t?t=s.decorateType(t).name:t&&"object"===_typeof(t)&&(t=s.decorateEnum(t).name),function(i,r){s.decorateType(i.constructor).add(new l(r,e,t,n,{default:o}))}},l._configure=function(e){o=e}},{15:15,24:24,36:36,37:37}],17:[function(e,t){var n=t.exports=e(18);n.build="light",n.load=function(e,t,o){return"function"==typeof t?(o=t,t=new n.Root):t||(t=new n.Root),t.load(e,o)},n.loadSync=function(e,t){return t||(t=new n.Root),t.loadSync(e)},n.encoder=e(14),n.decoder=e(13),n.verifier=e(40),n.converter=e(12),n.ReflectionObject=e(24),n.Namespace=e(23),n.Root=e(29),n.Enum=e(15),n.Type=e(35),n.Field=e(16),n.OneOf=e(25),n.MapField=e(20),n.Service=e(33),n.Method=e(22),n.Message=e(21),n.wrappers=e(41),n.types=e(36),n.util=e(37),n.ReflectionObject._configure(n.Root),n.Namespace._configure(n.Type,n.Service),n.Root._configure(n.Type),n.Field._configure(n.Type)},{12:12,13:13,14:14,15:15,16:16,18:18,20:20,21:21,22:22,23:23,24:24,25:25,29:29,33:33,35:35,36:36,37:37,40:40,41:41}],18:[function(e,t,n){var o=n;function i(){o.Reader._configure(o.BufferReader),o.util._configure()}o.build="minimal",o.Writer=e(42),o.BufferWriter=e(43),o.Reader=e(27),o.BufferReader=e(28),o.util=e(39),o.rpc=e(31),o.roots=e(30),o.configure=i,o.Writer._configure(o.BufferWriter),i()},{27:27,28:28,30:30,31:31,39:39,42:42,43:43}],19:[function(e,t){var n=t.exports=e(17);n.build="full",n.tokenize=e(34),n.parse=e(26),n.common=e(11),n.Root._configure(n.Type,n.parse,n.common)},{11:11,17:17,26:26,34:34}],20:[function(e,t){t.exports=r;var n=e(16);((r.prototype=Object.create(n.prototype)).constructor=r).className="MapField";var o=e(36),i=e(37);function r(e,t,o,r,s,a){if(n.call(this,e,t,r,undefined,undefined,s,a),!i.isString(o))throw TypeError("keyType must be a string");this.keyType=o,this.resolvedKeyType=null,this.map=!0}r.fromJSON=function(e,t){return new r(e,t.id,t.keyType,t.type,t.options,t.comment)},r.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return i.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:undefined])},r.prototype.resolve=function(){if(this.resolved)return this;if(o.mapKey[this.keyType]===undefined)throw Error("invalid key type: "+this.keyType);return n.prototype.resolve.call(this)},r.d=function(e,t,n){return"function"==typeof n?n=i.decorateType(n).name:n&&"object"===_typeof(n)&&(n=i.decorateEnum(n).name),function(o,s){i.decorateType(o.constructor).add(new r(s,e,t,n))}}},{16:16,36:36,37:37}],21:[function(e,t){t.exports=o;var n=e(39);function o(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)this[t[n]]=e[t[n]]}o.create=function(e){return this.$type.create(e)},o.encode=function(e,t){return this.$type.encode(e,t)},o.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},o.decode=function(e){return this.$type.decode(e)},o.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},o.verify=function(e){return this.$type.verify(e)},o.fromObject=function(e){return this.$type.fromObject(e)},o.toObject=function(e,t){return this.$type.toObject(e,t)},o.prototype.toJSON=function(){return this.$type.toObject(this,n.toJSONOptions)}},{39:39}],22:[function(e,t){t.exports=i;var n=e(24);((i.prototype=Object.create(n.prototype)).constructor=i).className="Method";var o=e(37);function i(e,t,i,r,s,a,l,c){if(o.isObject(s)?(l=s,s=a=undefined):o.isObject(a)&&(l=a,a=undefined),t!==undefined&&!o.isString(t))throw TypeError("type must be a string");if(!o.isString(i))throw TypeError("requestType must be a string");if(!o.isString(r))throw TypeError("responseType must be a string");n.call(this,e,l),this.type=t||"rpc",this.requestType=i,this.requestStream=!!s||undefined,this.responseType=r,this.responseStream=!!a||undefined,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=c}i.fromJSON=function(e,t){return new i(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment)},i.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return o.toObject(["type","rpc"!==this.type&&this.type||undefined,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:undefined])},i.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),n.prototype.resolve.call(this))}},{24:24,37:37}],23:[function(e,t){t.exports=c;var n=e(24);((c.prototype=Object.create(n.prototype)).constructor=c).className="Namespace";var o,i,r=e(15),s=e(16),a=e(37);function l(e,t){if(!e||!e.length)return undefined;for(var n={},o=0;o<e.length;++o)n[e[o].name]=e[o].toJSON(t);return n}function c(e,t){n.call(this,e,t),this.nested=undefined,this._nestedArray=null}function u(e){return e._nestedArray=null,e}c.fromJSON=function(e,t){return new c(e,t.options).addJSON(t.nested)},c.arrayToJSON=l,c.isReservedId=function(e,t){if(e)for(var n=0;n<e.length;++n)if("string"!=typeof e[n]&&e[n][0]<=t&&e[n][1]>=t)return!0;return!1},c.isReservedName=function(e,t){if(e)for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1},Object.defineProperty(c.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=a.toArray(this.nested))}}),c.prototype.toJSON=function(e){return a.toObject(["options",this.options,"nested",l(this.nestedArray,e)])},c.prototype.addJSON=function(e){if(e)for(var t,n=Object.keys(e),a=0;a<n.length;++a)t=e[n[a]],this.add((t.fields!==undefined?o.fromJSON:t.values!==undefined?r.fromJSON:t.methods!==undefined?i.fromJSON:t.id!==undefined?s.fromJSON:c.fromJSON)(n[a],t));return this},c.prototype.get=function(e){return this.nested&&this.nested[e]||null},c.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof r)return this.nested[e].values;throw Error("no such enum: "+e)},c.prototype.add=function(e){if(!(e instanceof s&&e.extend!==undefined||e instanceof o||e instanceof r||e instanceof i||e instanceof c))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t){if(!(t instanceof c&&e instanceof c)||t instanceof o||t instanceof i)throw Error("duplicate name '"+e.name+"' in "+this);for(var n=t.nestedArray,a=0;a<n.length;++a)e.add(n[a]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}}else this.nested={};return this.nested[e.name]=e,e.onAdd(this),u(this)},c.prototype.remove=function(e){if(!(e instanceof n))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=undefined),e.onRemove(this),u(this)},c.prototype.define=function(e,t){if(a.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var n=this;e.length>0;){var o=e.shift();if(n.nested&&n.nested[o]){if(!((n=n.nested[o])instanceof c))throw Error("path conflicts with non-namespace objects")}else n.add(n=new c(o))}return t&&n.addJSON(t),n},c.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof c?e[t++].resolveAll():e[t++].resolve();return this.resolve()},c.prototype.lookup=function(e,t,n){if("boolean"==typeof t?(n=t,t=undefined):t&&!Array.isArray(t)&&(t=[t]),a.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;if(""===e[0])return this.root.lookup(e.slice(1),t);var o=this.get(e[0]);if(o){if(1===e.length){if(!t||t.indexOf(o.constructor)>-1)return o}else if(o instanceof c&&(o=o.lookup(e.slice(1),t,!0)))return o}else for(var i=0;i<this.nestedArray.length;++i)if(this._nestedArray[i]instanceof c&&(o=this._nestedArray[i].lookup(e,t,!0)))return o;return null===this.parent||n?null:this.parent.lookup(e,t)},c.prototype.lookupType=function(e){var t=this.lookup(e,[o]);if(!t)throw Error("no such type: "+e);return t},c.prototype.lookupEnum=function(e){var t=this.lookup(e,[r]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t},c.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[o,r]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t},c.prototype.lookupService=function(e){var t=this.lookup(e,[i]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t},c._configure=function(e,t){o=e,i=t}},{15:15,16:16,24:24,37:37}],24:[function(e,t){t.exports=i,i.className="ReflectionObject";var n,o=e(37);function i(e,t){if(!o.isString(e))throw TypeError("name must be a string");if(t&&!o.isObject(t))throw TypeError("options must be an object");this.options=t,this.name=e,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(i.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),i.prototype.toJSON=function(){throw Error()},i.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof n&&t._handleAdd(this)},i.prototype.onRemove=function(e){var t=e.root;t instanceof n&&t._handleRemove(this),this.parent=null,this.resolved=!1},i.prototype.resolve=function(){return this.resolved?this:(this.root instanceof n&&(this.resolved=!0),this)},i.prototype.getOption=function(e){return this.options?this.options[e]:undefined},i.prototype.setOption=function(e,t,n){return n&&this.options&&this.options[e]!==undefined||((this.options||(this.options={}))[e]=t),this},i.prototype.setOptions=function(e,t){if(e)for(var n=Object.keys(e),o=0;o<n.length;++o)this.setOption(n[o],e[n[o]],t);return this},i.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},i._configure=function(e){n=e}},{37:37}],25:[function(e,t){t.exports=r;var n=e(24);((r.prototype=Object.create(n.prototype)).constructor=r).className="OneOf";var o=e(16),i=e(37);function r(e,t,o,i){if(Array.isArray(t)||(o=t,t=undefined),n.call(this,e,o),t!==undefined&&!Array.isArray(t))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=i}function s(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}r.fromJSON=function(e,t){return new r(e,t.oneof,t.options,t.comment)},r.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return i.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:undefined])},r.prototype.add=function(e){if(!(e instanceof o))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,s(this),this},r.prototype.remove=function(e){if(!(e instanceof o))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),(t=this.oneof.indexOf(e.name))>-1&&this.oneof.splice(t,1),e.partOf=null,this},r.prototype.onAdd=function(e){n.prototype.onAdd.call(this,e);for(var t=0;t<this.oneof.length;++t){var o=e.get(this.oneof[t]);o&&!o.partOf&&(o.partOf=this,this.fieldsArray.push(o))}s(this)},r.prototype.onRemove=function(e){for(var t,o=0;o<this.fieldsArray.length;++o)(t=this.fieldsArray[o]).parent&&t.parent.remove(t);n.prototype.onRemove.call(this,e)},r.d=function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(t,n){i.decorateType(t.constructor).add(new r(n,e)),Object.defineProperty(t,n,{get:i.oneOfGetter(e),set:i.oneOfSetter(e)})}}},{16:16,24:24,37:37}],26:[function(e,t){t.exports=C,C.filename=null,C.defaults={keepCase:!1};var n=e(34),o=e(29),i=e(35),r=e(16),s=e(20),a=e(25),l=e(15),c=e(33),u=e(22),f=e(36),h=e(37),p=/^[1-9][0-9]*$/,d=/^-?[1-9][0-9]*$/,y=/^0[x][0-9a-fA-F]+$/,m=/^-?0[x][0-9a-fA-F]+$/,g=/^0[0-7]+$/,v=/^-?0[0-7]+$/,b=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,w=/^[a-zA-Z_][a-zA-Z_0-9]*$/,S=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,x=/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/;function C(e,t,k){t instanceof o||(k=t,t=new o),k||(k=C.defaults);var _,A,O,B,E,I=n(e,k.alternateCommentMode||!1),N=I.next,j=I.push,T=I.peek,P=I.skip,R=I.cmnt,F=!0,L=!1,M=t,D=k.keepCase?function(e){return e}:h.camelCase;function z(e,t,n){var o=C.filename;return n||(C.filename=null),Error("illegal "+(t||"token")+" '"+e+"' ("+(o?o+", ":"")+"line "+I.line+")")}function W(){var e,t=[];do{if('"'!==(e=N())&&"'"!==e)throw z(e);t.push(N()),P(e),e=T()}while('"'===e||"'"===e);return t.join("")}function K(e){var t=N();switch(t){case"'":case'"':return j(t),W();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return G(t,!0)}catch(n){if(e&&S.test(t))return t;throw z(t,"value")}}function q(e,t){var n,o;do{!t||'"'!==(n=T())&&"'"!==n?e.push([o=J(N()),P("to",!0)?J(N()):o]):e.push(W())}while(P(",",!0));P(";")}function G(e,t){var n=1;switch("-"===e.charAt(0)&&(n=-1,e=e.substring(1)),e){case"inf":case"INF":case"Inf":return n*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(p.test(e))return n*parseInt(e,10);if(y.test(e))return n*parseInt(e,16);if(g.test(e))return n*parseInt(e,8);if(b.test(e))return n*parseFloat(e);throw z(e,"number",t)}function J(e,t){switch(e){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!t&&"-"===e.charAt(0))throw z(e,"id");if(d.test(e))return parseInt(e,10);if(m.test(e))return parseInt(e,16);if(v.test(e))return parseInt(e,8);throw z(e,"id")}function H(){if(_!==undefined)throw z("package");if(_=N(),!S.test(_))throw z(_,"name");M=M.define(_),P(";")}function U(){var e,t=T();switch(t){case"weak":e=O||(O=[]),N();break;case"public":N();default:e=A||(A=[])}t=W(),P(";"),e.push(t)}function X(){if(P("="),B=W(),!(L="proto3"===B)&&"proto2"!==B)throw z(B,"syntax");P(";")}function V(e,t){switch(t){case"option":return ie(e,t),P(";"),!0;case"message":return Y(e,t),!0;case"enum":return ne(e,t),!0;case"service":return le(e,t),!0;case"extend":return ue(e,t),!0}return!1}function $(e,t,n){var o=I.line;if(e&&(e.comment=R(),e.filename=C.filename),P("{",!0)){for(var i;"}"!==(i=N());)t(i);P(";",!0)}else n&&n(),P(";"),e&&"string"!=typeof e.comment&&(e.comment=R(o))}function Y(e,t){if(!w.test(t=N()))throw z(t,"type name");var n=new i(t);$(n,function(e){if(!V(n,e))switch(e){case"map":ee(n);break;case"required":case"optional":case"repeated":Z(n,e);break;case"oneof":te(n,e);break;case"extensions":q(n.extensions||(n.extensions=[]));break;case"reserved":q(n.reserved||(n.reserved=[]),!0);break;default:if(!L||!S.test(e))throw z(e);j(e),Z(n,"optional")}}),e.add(n)}function Z(e,t,n){var o=N();if("group"!==o){if(!S.test(o))throw z(o,"type");var i=N();if(!w.test(i))throw z(i,"name");i=D(i),P("=");var s=new r(i,J(N()),o,t,n);$(s,function(e){if("option"!==e)throw z(e);ie(s,e),P(";")},function(){ae(s)}),e.add(s),L||!s.repeated||f.packed[o]===undefined&&f.basic[o]!==undefined||s.setOption("packed",!1,!0)}else Q(e,t)}function Q(e,t){var n=N();if(!w.test(n))throw z(n,"name");var o=h.lcFirst(n);n===o&&(n=h.ucFirst(n)),P("=");var s=J(N()),a=new i(n);a.group=!0;var l=new r(o,s,n,t);l.filename=C.filename,$(a,function(e){switch(e){case"option":ie(a,e),P(";");break;case"required":case"optional":case"repeated":Z(a,e);break;default:throw z(e)}}),e.add(a).add(l)}function ee(e){P("<");var t=N();if(f.mapKey[t]===undefined)throw z(t,"type");P(",");var n=N();if(!S.test(n))throw z(n,"type");P(">");var o=N();if(!w.test(o))throw z(o,"name");P("=");var i=new s(D(o),J(N()),t,n);$(i,function(e){if("option"!==e)throw z(e);ie(i,e),P(";")},function(){ae(i)}),e.add(i)}function te(e,t){if(!w.test(t=N()))throw z(t,"name");var n=new a(D(t));$(n,function(e){"option"===e?(ie(n,e),P(";")):(j(e),Z(n,"optional"))}),e.add(n)}function ne(e,t){if(!w.test(t=N()))throw z(t,"name");var n=new l(t);$(n,function(e){switch(e){case"option":ie(n,e),P(";");break;case"reserved":q(n.reserved||(n.reserved=[]),!0);break;default:oe(n,e)}}),e.add(n)}function oe(e,t){if(!w.test(t))throw z(t,"name");P("=");var n=J(N(),!0),o={};$(o,function(e){if("option"!==e)throw z(e);ie(o,e),P(";")},function(){ae(o)}),e.add(t,n,o.comment)}function ie(e,t){var n=P("(",!0);if(!S.test(t=N()))throw z(t,"name");var o=t;n&&(P(")"),o="("+o+")",t=T(),x.test(t)&&(o+=t,N())),P("="),re(e,o)}function re(e,t){if(P("{",!0))do{if(!w.test(E=N()))throw z(E,"name");"{"===T()?re(e,t+"."+E):(P(":"),"{"===T()?re(e,t+"."+E):se(e,t+"."+E,K(!0)))}while(!P("}",!0));else se(e,t,K(!0))}function se(e,t,n){e.setOption&&e.setOption(t,n)}function ae(e){if(P("[",!0)){do{ie(e,"option")}while(P(",",!0));P("]")}return e}function le(e,t){if(!w.test(t=N()))throw z(t,"service name");var n=new c(t);$(n,function(e){if(!V(n,e)){if("rpc"!==e)throw z(e);ce(n,e)}}),e.add(n)}function ce(e,t){var n=t;if(!w.test(t=N()))throw z(t,"name");var o,i,r,s,a=t;if(P("("),P("stream",!0)&&(i=!0),!S.test(t=N()))throw z(t);if(o=t,P(")"),P("returns"),P("("),P("stream",!0)&&(s=!0),!S.test(t=N()))throw z(t);r=t,P(")");var l=new u(a,n,o,r,i,s);$(l,function(e){if("option"!==e)throw z(e);ie(l,e),P(";")}),e.add(l)}function ue(e,t){if(!S.test(t=N()))throw z(t,"reference");var n=t;$(null,function(t){switch(t){case"required":case"repeated":case"optional":Z(e,t,n);break;default:if(!L||!S.test(t))throw z(t);j(t),Z(e,"optional",n)}})}for(;null!==(E=N());)switch(E){case"package":if(!F)throw z(E);H();break;case"import":if(!F)throw z(E);U();break;case"syntax":if(!F)throw z(E);X();break;case"option":if(!F)throw z(E);ie(M,E),P(";");break;default:if(V(M,E)){F=!1;continue}throw z(E)}return C.filename=null,{package:_,imports:A,weakImports:O,syntax:B,root:t}}},{15:15,16:16,20:20,22:22,25:25,29:29,33:33,34:34,35:35,36:36,37:37}],27:[function(e,t){t.exports=a;var n,o=e(39),i=o.LongBits,r=o.utf8;function s(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function a(e){this.buf=e,this.pos=0,this.len=e.length}var l,c="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new a(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new a(e);throw Error("illegal buffer")};function u(){var e=new i(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw s(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw s(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function f(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function h(){if(this.pos+8>this.len)throw s(this,8);return new i(f(this.buf,this.pos+=4),f(this.buf,this.pos+=4))}a.create=o.Buffer?function(e){return(a.create=function(e){return o.Buffer.isBuffer(e)?new n(e):c(e)})(e)}:c,a.prototype._slice=o.Array.prototype.subarray||o.Array.prototype.slice,a.prototype.uint32=(l=4294967295,function(){if(l=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return l;if((this.pos+=5)>this.len)throw this.pos=this.len,s(this,10);return l}),a.prototype.int32=function(){return 0|this.uint32()},a.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},a.prototype.bool=function(){return 0!==this.uint32()},a.prototype.fixed32=function(){if(this.pos+4>this.len)throw s(this,4);return f(this.buf,this.pos+=4)},a.prototype.sfixed32=function(){if(this.pos+4>this.len)throw s(this,4);return 0|f(this.buf,this.pos+=4)},a.prototype.float=function(){if(this.pos+4>this.len)throw s(this,4);var e=o.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},a.prototype.double=function(){if(this.pos+8>this.len)throw s(this,4);var e=o.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},a.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw s(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},a.prototype.string=function(){var e=this.bytes();return r.read(e,0,e.length)},a.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw s(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw s(this)}while(128&this.buf[this.pos++]);return this},a.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},a._configure=function(e){n=e;var t=o.Long?"toLong":"toNumber";o.merge(a.prototype,{int64:function(){return u.call(this)[t](!1)},uint64:function(){return u.call(this)[t](!0)},sint64:function(){return u.call(this).zzDecode()[t](!1)},fixed64:function(){return h.call(this)[t](!0)},sfixed64:function(){return h.call(this)[t](!1)}})}},{39:39}],28:[function(e,t){t.exports=i;var n=e(27);(i.prototype=Object.create(n.prototype)).constructor=i;var o=e(39);function i(e){n.call(this,e)}o.Buffer&&(i.prototype._slice=o.Buffer.prototype.slice),i.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len))}},{27:27,39:39}],29:[function(e,t){t.exports=u;var n=e(23);((u.prototype=Object.create(n.prototype)).constructor=u).className="Root";var o,i,r,s=e(16),a=e(15),l=e(25),c=e(37);function u(e){n.call(this,"",e),this.deferred=[],this.files=[]}function f(){}u.fromJSON=function(e,t){return t||(t=new u),e.options&&t.setOptions(e.options),t.addJSON(e.nested)},u.prototype.resolvePath=c.path.resolve,u.prototype.load=function e(t,n,o){"function"==typeof n&&(o=n,n=undefined);var s=this;if(!o)return c.asPromise(e,s,t,n);var a=o===f;function l(e,t){if(o){var n=o;if(o=null,a)throw e;n(e,t)}}function u(e,t){try{if(c.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),c.isString(t)){i.filename=e;var o,r=i(t,s,n),u=0;if(r.imports)for(;u<r.imports.length;++u)(o=s.resolvePath(e,r.imports[u]))&&h(o);if(r.weakImports)for(u=0;u<r.weakImports.length;++u)(o=s.resolvePath(e,r.weakImports[u]))&&h(o,!0)}else s.setOptions(t.options).addJSON(t.nested)}catch(f){l(f)}a||p||l(null,s)}function h(e,t){var n=e.lastIndexOf("google/protobuf/");if(n>-1){var i=e.substring(n);i in r&&(e=i)}if(!(s.files.indexOf(e)>-1))if(s.files.push(e),e in r)a?u(e,r[e]):(++p,setTimeout(function(){--p,u(e,r[e])}));else if(a){var f;try{f=c.fs.readFileSync(e).toString("utf8")}catch(h){return void(t||l(h))}u(e,f)}else++p,c.fetch(e,function(n,i){--p,o&&(n?t?p||l(null,s):l(n):u(e,i))})}var p=0;c.isString(t)&&(t=[t]);for(var d,y=0;y<t.length;++y)(d=s.resolvePath("",t[y]))&&h(d);return a?s:(p||l(null,s),undefined)},u.prototype.loadSync=function(e,t){if(!c.isNode)throw Error("not supported");return this.load(e,t,f)},u.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(e){return"'extend "+e.extend+"' in "+e.parent.fullName}).join(", "));return n.prototype.resolveAll.call(this)};var h=/^[A-Z]/;function p(e,t){var n=t.parent.lookup(t.extend);if(n){var o=new s(t.fullName,t.id,t.type,t.rule,undefined,t.options);return o.declaringField=t,t.extensionField=o,n.add(o),!0}return!1}u.prototype._handleAdd=function(e){if(e instanceof s)e.extend===undefined||e.extensionField||p(0,e)||this.deferred.push(e);else if(e instanceof a)h.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof l)){if(e instanceof o)for(var t=0;t<this.deferred.length;)p(0,this.deferred[t])?this.deferred.splice(t,1):++t;for(var n=0;n<e.nestedArray.length;++n)this._handleAdd(e._nestedArray[n]);h.test(e.name)&&(e.parent[e.name]=e)}},u.prototype._handleRemove=function(e){if(e instanceof s){if(e.extend!==undefined)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);t>-1&&this.deferred.splice(t,1)}}else if(e instanceof a)h.test(e.name)&&delete e.parent[e.name];else if(e instanceof n){for(var o=0;o<e.nestedArray.length;++o)this._handleRemove(e._nestedArray[o]);h.test(e.name)&&delete e.parent[e.name]}},u._configure=function(e,t,n){o=e,i=t,r=n}},{15:15,16:16,23:23,25:25,37:37}],30:[function(e,t){t.exports={}},{}],31:[function(e,t,n){n.Service=e(32)},{32:32}],32:[function(e,t){t.exports=o;var n=e(39);function o(e,t,o){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(o)}(o.prototype=Object.create(n.EventEmitter.prototype)).constructor=o,o.prototype.rpcCall=function e(t,o,i,r,s){if(!r)throw TypeError("request must be specified");var a=this;if(!s)return n.asPromise(e,a,t,o,i,r);if(!a.rpcImpl)return setTimeout(function(){s(Error("already ended"))},0),undefined;try{return a.rpcImpl(t,o[a.requestDelimited?"encodeDelimited":"encode"](r).finish(),function(e,n){if(e)return a.emit("error",e,t),s(e);if(null===n)return a.end(!0),undefined;if(!(n instanceof i))try{n=i[a.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return a.emit("error",e,t),s(e)}return a.emit("data",n,t),s(null,n)})}catch(l){return a.emit("error",l,t),setTimeout(function(){s(l)},0),undefined}},o.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},{39:39}],33:[function(e,t){t.exports=s;var n=e(23);((s.prototype=Object.create(n.prototype)).constructor=s).className="Service";var o=e(22),i=e(37),r=e(31);function s(e,t){n.call(this,e,t),this.methods={},this._methodsArray=null}function a(e){return e._methodsArray=null,e}s.fromJSON=function(e,t){var n=new s(e,t.options);if(t.methods)for(var i=Object.keys(t.methods),r=0;r<i.length;++r)n.add(o.fromJSON(i[r],t.methods[i[r]]));return t.nested&&n.addJSON(t.nested),n.comment=t.comment,n},s.prototype.toJSON=function(e){var t=n.prototype.toJSON.call(this,e),o=!!e&&Boolean(e.keepComments);return i.toObject(["options",t&&t.options||undefined,"methods",n.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||undefined,"comment",o?this.comment:undefined])},Object.defineProperty(s.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=i.toArray(this.methods))}}),s.prototype.get=function(e){return this.methods[e]||n.prototype.get.call(this,e)},s.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return n.prototype.resolve.call(this)},s.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof o?(this.methods[e.name]=e,e.parent=this,a(this)):n.prototype.add.call(this,e)},s.prototype.remove=function(e){if(e instanceof o){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,a(this)}return n.prototype.remove.call(this,e)},s.prototype.create=function(e,t,n){for(var o,s=new r.Service(e,t,n),a=0;a<this.methodsArray.length;++a){var l=i.lcFirst((o=this._methodsArray[a]).resolve().name).replace(/[^$\w_]/g,"");s[l]=i.codegen(["r","c"],i.isReserved(l)?l+"_":l)("return this.rpcCall(m,q,s,r,c)")({m:o,q:o.resolvedRequestType.ctor,s:o.resolvedResponseType.ctor})}return s}},{22:22,23:23,31:31,37:37}],34:[function(e,t){t.exports=h;var n=/[\s{}=;:[\],'"()<>]/g,o=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,i=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,r=/^ *[*\/]+ */,s=/^\s*\*?\/*/,a=/\n/g,l=/\s/,c=/\\(.?)/g,u={0:"\0",r:"\r",n:"\n",t:"\t"};function f(e){return e.replace(c,function(e,t){switch(t){case"\\":case"":return t;default:return u[t]||""}})}function h(e,t){e=e.toString();var c=0,u=e.length,h=1,p=null,d=null,y=0,m=!1,g=[],v=null;function b(e){return Error("illegal "+e+" (line "+h+")")}function w(){var t="'"===v?i:o;t.lastIndex=c-1;var n=t.exec(e);if(!n)throw b("string");return c=t.lastIndex,A(v),v=null,f(n[1])}function S(t){return e.charAt(t)}function x(n,o){p=e.charAt(n++),y=h,m=!1;var i,l=n-(t?2:3);do{if(--l<0||"\n"===(i=e.charAt(l))){m=!0;break}}while(" "===i||"\t"===i);for(var c=e.substring(n,o).split(a),u=0;u<c.length;++u)c[u]=c[u].replace(t?s:r,"").trim();d=c.join("\n").trim()}function C(t){var n=k(t),o=e.substring(t,n);return/^\s*\/{1,2}/.test(o)}function k(e){for(var t=e;t<u&&"\n"!==S(t);)t++;return t}function _(){if(g.length>0)return g.shift();if(v)return w();var o,i,r,s,a;do{if(c===u)return null;for(o=!1;l.test(r=S(c));)if("\n"===r&&++h,++c===u)return null;if("/"===S(c)){if(++c===u)throw b("comment");if("/"===S(c))if(t){if(s=c,a=!1,C(c)){a=!0;do{if((c=k(c))===u)break;c++}while(C(c))}else c=Math.min(u,k(c)+1);a&&x(s,c),h++,o=!0}else{for(a="/"===S(s=c+1);"\n"!==S(++c);)if(c===u)return null;++c,a&&x(s,c-1),++h,o=!0}else{if("*"!==(r=S(c)))return"/";s=c+1,a=t||"*"===S(s);do{if("\n"===r&&++h,++c===u)throw b("comment");i=r,r=S(c)}while("*"!==i||"/"!==r);++c,a&&x(s,c-2),o=!0}}}while(o);var f=c;if(n.lastIndex=0,!n.test(S(f++)))for(;f<u&&!n.test(S(f));)++f;var p=e.substring(c,c=f);return'"'!==p&&"'"!==p||(v=p),p}function A(e){g.push(e)}function O(){if(!g.length){var e=_();if(null===e)return null;A(e)}return g[0]}return Object.defineProperty({next:_,peek:O,push:A,skip:function(e,t){var n=O();if(n===e)return _(),!0;if(!t)throw b("token '"+n+"', '"+e+"' expected");return!1},cmnt:function(e){var n=null;return e===undefined?y===h-1&&(t||"*"===p||m)&&(n=d):(y<e&&O(),y!==e||m||!t&&"/"!==p||(n=d)),n}},"line",{get:function(){return h}})}h.unescape=f},{}],35:[function(e,t){t.exports=g;var n=e(23);((g.prototype=Object.create(n.prototype)).constructor=g).className="Type";var o=e(15),i=e(25),r=e(16),s=e(20),a=e(33),l=e(21),c=e(27),u=e(42),f=e(37),h=e(14),p=e(13),d=e(40),y=e(12),m=e(41);function g(e,t){n.call(this,e,t),this.fields={},this.oneofs=undefined,this.extensions=undefined,this.reserved=undefined,this.group=undefined,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function v(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}Object.defineProperties(g.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var n=this.fields[e[t]],o=n.id;if(this._fieldsById[o])throw Error("duplicate id "+o+" in "+this);this._fieldsById[o]=n}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=f.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=f.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=g.generateConstructor(this)())},set:function(e){var t=e.prototype;t instanceof l||((e.prototype=new l).constructor=e,f.merge(e.prototype,t)),e.$type=e.prototype.$type=this,f.merge(e,l,!0),this._ctor=e;for(var n=0;n<this.fieldsArray.length;++n)this._fieldsArray[n].resolve();var o={};for(n=0;n<this.oneofsArray.length;++n)o[this._oneofsArray[n].resolve().name]={get:f.oneOfGetter(this._oneofsArray[n].oneof),set:f.oneOfSetter(this._oneofsArray[n].oneof)};n&&Object.defineProperties(e.prototype,o)}}}),g.generateConstructor=function(e){for(var t,n=f.codegen(["p"],e.name),o=0;o<e.fieldsArray.length;++o)(t=e._fieldsArray[o]).map?n("this%s={}",f.safeProp(t.name)):t.repeated&&n("this%s=[]",f.safeProp(t.name));return n("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},g.fromJSON=function(e,t){var l=new g(e,t.options);l.extensions=t.extensions,l.reserved=t.reserved;for(var c=Object.keys(t.fields),u=0;u<c.length;++u)l.add((void 0!==t.fields[c[u]].keyType?s.fromJSON:r.fromJSON)(c[u],t.fields[c[u]]));if(t.oneofs)for(c=Object.keys(t.oneofs),u=0;u<c.length;++u)l.add(i.fromJSON(c[u],t.oneofs[c[u]]));if(t.nested)for(c=Object.keys(t.nested),u=0;u<c.length;++u){var f=t.nested[c[u]];l.add((f.id!==undefined?r.fromJSON:f.fields!==undefined?g.fromJSON:f.values!==undefined?o.fromJSON:f.methods!==undefined?a.fromJSON:n.fromJSON)(c[u],f))}return t.extensions&&t.extensions.length&&(l.extensions=t.extensions),t.reserved&&t.reserved.length&&(l.reserved=t.reserved),t.group&&(l.group=!0),t.comment&&(l.comment=t.comment),l},g.prototype.toJSON=function(e){var t=n.prototype.toJSON.call(this,e),o=!!e&&Boolean(e.keepComments);return f.toObject(["options",t&&t.options||undefined,"oneofs",n.arrayToJSON(this.oneofsArray,e),"fields",n.arrayToJSON(this.fieldsArray.filter(function(e){return!e.declaringField}),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:undefined,"reserved",this.reserved&&this.reserved.length?this.reserved:undefined,"group",this.group||undefined,"nested",t&&t.nested||undefined,"comment",o?this.comment:undefined])},g.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();var o=this.oneofsArray;for(t=0;t<o.length;)o[t++].resolve();return n.prototype.resolveAll.call(this)},g.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},g.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof r&&e.extend===undefined){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),v(this)}return e instanceof i?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),v(this)):n.prototype.add.call(this,e)},g.prototype.remove=function(e){if(e instanceof r&&e.extend===undefined){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),v(this)}if(e instanceof i){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),v(this)}return n.prototype.remove.call(this,e)},g.prototype.isReservedId=function(e){return n.isReservedId(this.reserved,e)},g.prototype.isReservedName=function(e){return n.isReservedName(this.reserved,e)},g.prototype.create=function(e){return new this.ctor(e)},g.prototype.setup=function(){for(var e=this.fullName,t=[],n=0;n<this.fieldsArray.length;++n)t.push(this._fieldsArray[n].resolve().resolvedType);this.encode=h(this)({Writer:u,types:t,util:f}),this.decode=p(this)({Reader:c,types:t,util:f}),this.verify=d(this)({types:t,util:f}),this.fromObject=y.fromObject(this)({types:t,util:f}),this.toObject=y.toObject(this)({types:t,util:f});var o=m[e];if(o){var i=Object.create(this);i.fromObject=this.fromObject,this.fromObject=o.fromObject.bind(i),i.toObject=this.toObject,this.toObject=o.toObject.bind(i)}return this},g.prototype.encode=function(e,t){return this.setup().encode(e,t)},g.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},g.prototype.decode=function(e,t){return this.setup().decode(e,t)},g.prototype.decodeDelimited=function(e){return e instanceof c||(e=c.create(e)),this.decode(e,e.uint32())},g.prototype.verify=function(e){return this.setup().verify(e)},g.prototype.fromObject=function(e){return this.setup().fromObject(e)},g.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},g.d=function(e){return function(t){f.decorateType(t,e)}}},{12:12,13:13,14:14,15:15,16:16,20:20,21:21,23:23,25:25,27:27,33:33,37:37,40:40,41:41,42:42}],36:[function(e,t,n){var o=n,i=e(37),r=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function s(e,t){var n=0,o={};for(t|=0;n<e.length;)o[r[n+t]]=e[n++];return o}o.basic=s([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),o.defaults=s([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",i.emptyArray,null]),o.long=s([0,0,0,1,1],7),o.mapKey=s([0,0,0,5,5,0,0,0,1,1,0,2],2),o.packed=s([1,5,0,0,0,5,5,0,0,0,1,1,0])},{37:37}],37:[function(e,t){var n,o,i=t.exports=e(39),r=e(30);i.codegen=e(3),i.fetch=e(5),i.path=e(8),i.fs=i.inquire("fs"),i.toArray=function(e){if(e){for(var t=Object.keys(e),n=new Array(t.length),o=0;o<t.length;)n[o]=e[t[o++]];return n}return[]},i.toObject=function(e){for(var t={},n=0;n<e.length;){var o=e[n++],i=e[n++];i!==undefined&&(t[o]=i)}return t};var s=/\\/g,a=/"/g;i.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},i.safeProp=function(e){return!/^[$\w_]+$/.test(e)||i.isReserved(e)?'["'+e.replace(s,"\\\\").replace(a,'\\"')+'"]':"."+e},i.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var l=/_([a-z])/g;i.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(l,function(e,t){return t.toUpperCase()})},i.compareFieldsById=function(e,t){return e.id-t.id},i.decorateType=function(t,o){if(t.$type)return o&&t.$type.name!==o&&(i.decorateRoot.remove(t.$type),t.$type.name=o,i.decorateRoot.add(t.$type)),t.$type;n||(n=e(35));var r=new n(o||t.name);return i.decorateRoot.add(r),r.ctor=t,Object.defineProperty(t,"$type",{value:r,enumerable:!1}),Object.defineProperty(t.prototype,"$type",{value:r,enumerable:!1}),r};var c=0;i.decorateEnum=function(t){if(t.$type)return t.$type;o||(o=e(15));var n=new o("Enum"+c++,t);return i.decorateRoot.add(n),Object.defineProperty(t,"$type",{value:n,enumerable:!1}),n},Object.defineProperty(i,"decorateRoot",{get:function(){return r.decorated||(r.decorated=new(e(29)))}})},{15:15,29:29,3:3,30:30,35:35,39:39,5:5,8:8}],38:[function(e,t){t.exports=o;var n=e(39);function o(e,t){this.lo=e>>>0,this.hi=t>>>0}var i=o.zero=new o(0,0);i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1};var r=o.zeroHash="\0\0\0\0\0\0\0\0";o.fromNumber=function(e){if(0===e)return i;var t=e<0;t&&(e=-e);var n=e>>>0,r=(e-n)/4294967296>>>0;return t&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new o(n,r)},o.from=function(e){if("number"==typeof e)return o.fromNumber(e);if(n.isString(e)){if(!n.Long)return o.fromNumber(parseInt(e,10));e=n.Long.fromString(e)}return e.low||e.high?new o(e.low>>>0,e.high>>>0):i},o.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+4294967296*n)}return this.lo+4294967296*this.hi},o.prototype.toLong=function(e){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var s=String.prototype.charCodeAt;o.fromHash=function(e){return e===r?i:new o((s.call(e,0)|s.call(e,1)<<8|s.call(e,2)<<16|s.call(e,3)<<24)>>>0,(s.call(e,4)|s.call(e,5)<<8|s.call(e,6)<<16|s.call(e,7)<<24)>>>0)},o.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},o.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},o.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},o.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}},{39:39}],39:[function(e,t,n){var o=n;function i(e,t,n){for(var o=Object.keys(t),i=0;i<o.length;++i)e[o[i]]!==undefined&&n||(e[o[i]]=t[o[i]]);return e}function r(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&i(this,n)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}o.asPromise=e(1),o.base64=e(2),o.EventEmitter=e(4),o.float=e(6),o.inquire=e(7),o.utf8=e(10),o.pool=e(9),o.LongBits=e(38),o.emptyArray=Object.freeze?Object.freeze([]):[],o.emptyObject=Object.freeze?Object.freeze({}):{},o.isNode=Boolean(global.process&&global.process.versions&&global.process.versions.node),o.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},o.isString=function(e){return"string"==typeof e||e instanceof String},o.isObject=function(e){return e&&"object"===_typeof(e)},o.isset=o.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!==_typeof(n)||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},o.Buffer=function(){try{var e=o.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(t){return null}}(),o._Buffer_from=null,o._Buffer_allocUnsafe=null,o.newBuffer=function(e){return"number"==typeof e?o.Buffer?o._Buffer_allocUnsafe(e):new o.Array(e):o.Buffer?o._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},o.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,o.Long=global.dcodeIO&&global.dcodeIO.Long||o.inquire("long"),o.key2Re=/^true|false|0|1$/,o.key32Re=/^-?(?:0|[1-9][0-9]*)$/,o.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,o.longToHash=function(e){return e?o.LongBits.from(e).toHash():o.LongBits.zeroHash},o.longFromHash=function(e,t){var n=o.LongBits.fromHash(e);return o.Long?o.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))},o.merge=i,o.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},o.newError=r,o.ProtocolError=r("ProtocolError"),o.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;n>-1;--n)if(1===t[e[n]]&&this[e[n]]!==undefined&&null!==this[e[n]])return e[n]}},o.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},o.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},o._configure=function(){var e=o.Buffer;e?(o._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},o._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):o._Buffer_from=o._Buffer_allocUnsafe=null}},{1:1,10:10,2:2,38:38,4:4,6:6,7:7,9:9}],40:[function(e,t){t.exports=function(e){var t=o.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),n={};e.oneofsArray.length&&t("var p={}");for(var a=0;a<e.fieldsArray.length;++a){var l=e._fieldsArray[a].resolve(),c="m"+o.safeProp(l.name);if(l.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",c,l.name),l.map)t("if(!util.isObject(%s))",c)("return%j",i(l,"object"))("var k=Object.keys(%s)",c)("for(var i=0;i<k.length;++i){"),s(t,l,"k[i]"),r(t,l,a,c+"[k[i]]")("}");else if(l.repeated)t("if(!Array.isArray(%s))",c)("return%j",i(l,"array"))("for(var i=0;i<%s.length;++i){",c),r(t,l,a,c+"[i]")("}");else{if(l.partOf){var u=o.safeProp(l.partOf.name);1===n[l.partOf.name]&&t("if(p%s===1)",u)("return%j",l.partOf.name+": multiple values"),n[l.partOf.name]=1,t("p%s=1",u)}r(t,l,a,c)}l.optional&&t("}")}return t("return null")};var n=e(15),o=e(37);function i(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function r(e,t,o,r){if(t.resolvedType)if(t.resolvedType instanceof n){e("switch(%s){",r)("default:")("return%j",i(t,"enum value"));for(var s=Object.keys(t.resolvedType.values),a=0;a<s.length;++a)e("case %i:",t.resolvedType.values[s[a]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",o,r)("if(e)")("return%j+e",t.name+".")("}");else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",r)("return%j",i(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",r,r,r,r)("return%j",i(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',r)("return%j",i(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',r)("return%j",i(t,"boolean"));break;case"string":e("if(!util.isString(%s))",r)("return%j",i(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',r,r,r)("return%j",i(t,"buffer"))}return e}function s(e,t,n){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",n)("return%j",i(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",n)("return%j",i(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",n)("return%j",i(t,"boolean key"))}return e}},{15:15,37:37}],41:[function(e,t,n){var o=n,i=e(21);o[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=this.lookup(e["@type"]);if(t){var n="."===e["@type"].charAt(0)?e["@type"].substr(1):e["@type"];return this.create({type_url:"/"+n,value:t.encode(t.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){if(t&&t.json&&e.type_url&&e.value){var n=e.type_url.substring(e.type_url.lastIndexOf("/")+1),o=this.lookup(n);o&&(e=o.decode(e.value))}if(!(e instanceof this.ctor)&&e instanceof i){var r=e.$type.toObject(e,t);return r["@type"]=e.$type.fullName,r}return this.toObject(e,t)}}},{21:21}],42:[function(e,t){t.exports=u;var n,o=e(39),i=o.LongBits,r=o.base64,s=o.utf8;function a(e,t,n){this.fn=e,this.len=t,this.next=undefined,this.val=n}function l(){}function c(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function u(){this.len=0,this.head=new a(l,0,0),this.tail=this.head,this.states=null}function f(e,t,n){t[n]=255&e}function h(e,t){this.len=e,this.next=undefined,this.val=t}function p(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function d(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}u.create=o.Buffer?function(){return(u.create=function(){return new n})()}:function(){return new u},u.alloc=function(e){return new o.Array(e)},o.Array!==Array&&(u.alloc=o.pool(u.alloc,o.Array.prototype.subarray)),u.prototype._push=function(e,t,n){return this.tail=this.tail.next=new a(e,t,n),this.len+=t,this},h.prototype=Object.create(a.prototype),h.prototype.fn=function(e,t,n){for(;e>127;)t[n++]=127&e|128,e>>>=7;t[n]=e},u.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new h((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},u.prototype.int32=function(e){return e<0?this._push(p,10,i.fromNumber(e)):this.uint32(e)},u.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},u.prototype.uint64=function(e){var t=i.from(e);return this._push(p,t.length(),t)},u.prototype.int64=u.prototype.uint64,u.prototype.sint64=function(e){var t=i.from(e).zzEncode();return this._push(p,t.length(),t)},u.prototype.bool=function(e){return this._push(f,1,e?1:0)},u.prototype.fixed32=function(e){return this._push(d,4,e>>>0)},u.prototype.sfixed32=u.prototype.fixed32,u.prototype.fixed64=function(e){var t=i.from(e);return this._push(d,4,t.lo)._push(d,4,t.hi)},u.prototype.sfixed64=u.prototype.fixed64,u.prototype.float=function(e){return this._push(o.float.writeFloatLE,4,e)},u.prototype.double=function(e){return this._push(o.float.writeDoubleLE,8,e)};var y=o.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var o=0;o<e.length;++o)t[n+o]=e[o]};u.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(f,1,0);if(o.isString(e)){var n=u.alloc(t=r.length(e));r.decode(e,n,0),e=n}return this.uint32(t)._push(y,t,e)},u.prototype.string=function(e){var t=s.length(e);return t?this.uint32(t)._push(s.write,t,e):this._push(f,1,0)},u.prototype.fork=function(){return this.states=new c(this),this.head=this.tail=new a(l,0,0),this.len=0,this},u.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new a(l,0,0),this.len=0),this},u.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},u.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},u._configure=function(e){n=e}},{39:39}],43:[function(e,t){t.exports=r;var n=e(42);(r.prototype=Object.create(n.prototype)).constructor=r;var o=e(39),i=o.Buffer;function r(){n.call(this)}r.alloc=function(e){return(r.alloc=o._Buffer_allocUnsafe)(e)};var s=i&&i.prototype instanceof Uint8Array&&"set"===i.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var o=0;o<e.length;)t[n++]=e[o++]};function a(e,t,n){e.length<40?o.utf8.write(e,t,n):t.utf8Write(e,n)}r.prototype.bytes=function(e){o.isString(e)&&(e=o._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(s,t,e),this},r.prototype.string=function(e){var t=i.byteLength(e);return this.uint32(t),t&&this._push(a,t,e),this}},{39:39,42:42}]},{})}("object"===("undefined"==typeof window?"undefined":_typeof(window))&&window||"object"===("undefined"==typeof self?"undefined":_typeof(self))&&self||void 0),cc._RF.pop()},{1:void 0,10:void 0,11:void 0,12:void 0,13:void 0,14:void 0,15:void 0,16:void 0,17:void 0,18:void 0,2:void 0,20:void 0,21:void 0,22:void 0,23:void 0,24:void 0,25:void 0,26:void 0,27:void 0,28:void 0,29:void 0,3:void 0,30:void 0,31:void 0,32:void 0,33:void 0,34:void 0,35:void 0,36:void 0,37:void 0,38:void 0,39:void 0,4:void 0,40:void 0,41:void 0,42:void 0,43:void 0,5:void 0,6:void 0,7:void 0,8:void 0,9:void 0}],"use_v2.0.x_cc.Toggle_event":[function(e,t){"use strict";cc._RF.push(t,"22346HXLqNDd6dt7jODMK+Y","use_v2.0.x_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_check=!0),cc._RF.pop()},{}]},{},["use_v2.0.x_cc.Toggle_event","AgentObj","AllCard","ArcSprite","Arrow","BaseSprite","BeeSprite","BloodBar","Bomb","BombScript","BuffProcess","Common","Dictionary","EffectSprite","Game","GameData","GameProvider","GiantSprite","GunSprite","HeroSprite","KingSprite","LightmanSprite","LogSprite","MenuScript","MySprite","Order1Sprite","Order2Sprite","Order9Sprite","Result","SelCard","SelLayout","SkeSprite","SocketProvider","SpriteIndex","Welcome","WizSprite","Word3Sprite","acdata1","aniComponent","protobuf"]);