{"version":3,"sources":["assets/scripts/LogSprite.js"],"names":["cc","Class","Component","properties","role","start","_animation","getComponent","Animation","WrapMode","Default","setId","aid","setShadow","shadow","active","frame1Evt","dispShadow","frame2Evt","np","getPosition","moveTo","v2","x","y","setPosition","frame3Evt","frame4Evt","frame5Evt","frame6Evt","frame7Evt","frame8Evt","frame9Evt","play","frame11Evt","angle","frame12Evt","frame13Evt","frame14Evt","frame15Evt","frame16Evt","move","mypos","px","py","node","zIndex","updateShadow","remove","destroy","shadowForAgent","shadowObj","instantiate","playerPrefab","addChild","shadowNode","frameImg","loader","loadRes","SpriteFrame","err","spriteFrame","_name","Sprite","e","console","log"],"mappings":"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","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        role:\"log\",\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {},\n\n    start () {\n        this._animation = this.getComponent(cc.Animation);\n        this._animation.WrapMode = cc.WrapMode.Default;\n    },\n\n    setId: function(aid) {\n        this.aid = aid;\n    },\n\n    setShadow: function(shadow) {\n        this.shadow = shadow;\n        this.shadow.active = true;\n    },\n\n    frame1Evt: function() {\n        this.dispShadow();\n    },\n\n    frame2Evt: function() {\n        this.dispShadow();\n\n        var np = this.shadow.getPosition();\n        var moveTo = cc.v2(np.x, np.y-20);\n        this.shadow.setPosition(moveTo);\n    },\n\n    frame3Evt: function() {\n        this.dispShadow();\n\n        var np = this.shadow.getPosition();\n        var moveTo = cc.v2(np.x, np.y-20);\n        this.shadow.setPosition(moveTo);\n    },\n\n    frame4Evt: function() {\n        this.dispShadow();\n\n        var np = this.shadow.getPosition();\n        var moveTo = cc.v2(np.x, np.y-5);\n        this.shadow.setPosition(moveTo);\n    },\n\n    frame5Evt: function() {\n        this.dispShadow();\n\n        var np = this.shadow.getPosition();\n        var moveTo = cc.v2(np.x, np.y-5);\n        this.shadow.setPosition(moveTo);\n    },\n\n    frame6Evt: function() {\n        this.dispShadow();\n\n        var np = this.shadow.getPosition();\n        var moveTo = cc.v2(np.x, np.y-5);\n        this.shadow.setPosition(moveTo);\n    },\n\n    frame7Evt: function() {\n        this.dispShadow();\n\n        var np = this.shadow.getPosition();\n        var moveTo = cc.v2(np.x, np.y-10);\n        this.shadow.setPosition(moveTo);\n    },\n\n    frame8Evt: function() {\n        this.dispShadow();\n\n        var np = this.shadow.getPosition();\n        var moveTo = cc.v2(np.x, np.y-10);\n        this.shadow.setPosition(moveTo);\n    },\n\n    frame9Evt: function() {\n        this.dispShadow();\n\n        var np = this.shadow.getPosition();\n        var moveTo = cc.v2(np.x, np.y-10);\n        this.shadow.setPosition(moveTo);\n\n        this.play();\n    },\n\n    frame11Evt: function() {\n        this.dispShadow();\n\n        //since 2.1.1 setRotation is desperated.\n        this.shadow.angle = 2;\n        //this.shadow.setRotation(-2);\n    },\n\n    frame12Evt: function() {\n        this.dispShadow();\n        this.shadow.angle = 3;\n        //this.shadow.setRotation(3);\n    },\n\n    frame13Evt: function() {\n        this.dispShadow();\n        this.shadow.angle = 3;\n        //this.shadow.setRotation(-3);\n    },\n\n    frame14Evt: function() {\n        this.dispShadow();\n        this.shadow.angle = -2;\n        //this.shadow.setRotation(2);\n    },\n\n    frame15Evt: function() {\n        this.dispShadow();\n        this.shadow.angle = 3;\n        //this.shadow.setRotation(-3);\n    },\n\n    frame16Evt: function() {\n        this.dispShadow();\n        this.shadow.angle = -2;\n        //this.shadow.setRotation(2);\n    },\n\n    move: function(mypos) {\n        var px,py,moveTo;\n        px = (mypos.x)*30;\n        py = (mypos.y)*30;    \n\n        moveTo = cc.v2(px, py);\n\n        //1000:agent, 999:this bullet 998:forts;\n        //make bullet display under agent which is at same position.\n        //this.node.zIndex = 999+parseInt(32-mypos.y);\n\n        this.node.zIndex = 2001;\n\n        this.node.setPosition(moveTo);\n\n        this.updateShadow(mypos);\n    },\n\n    updateShadow: function(mypos) {\n        var px, py, moveTo;\n        px = (mypos.x)*30 + 20;\n        py = (mypos.y)*30;    \n\n        moveTo = cc.v2(px, py);\n        if(this.shadow) {\n            this.shadow.setPosition(moveTo);     \n        }\n        return;\n    },\n\n    remove: function() {\n        this.shadow.destroy();\n        this.node.destroy();\n    },\n\n    play: function() {\n        this._animation.play(\"rollingLog\");\n    },\n\n    shadowForAgent: function () {\n        var shadowObj = cc.instantiate(this.playerPrefab[2]);\n        // 将新增的节点添加到 Canvas 节点下面\n        shadowObj.active = false;\n        this.node.addChild(shadowObj);\n        return shadowObj;\n    },\n\n    dispShadow: function() {\n        //shadow object may not ready in init() when playing\n        if(!this.shadow) return;\n\n        var shadowNode = this.shadow;\n        var frameImg = \"log_shadow/logShadow\";\n\n        this.shadow.active = true;\n        cc.loader.loadRes(frameImg, cc.SpriteFrame, function (err, spriteFrame) {\n            if(shadowNode) {\n                try {\n                    if(shadowNode._name != \"\") {\n                        shadowNode.getComponent(cc.Sprite).spriteFrame = spriteFrame;\n                    }\n                } catch (e) {\n                    console.log(shadowNode);\n                    console.log(e);\n                }\n            }\n        });\n    },\n\n    // update (dt) {},\n});\n"]}