{"version":3,"sources":["assets/scripts/GunSprite.js"],"names":["common","require","cc","Class","Component","properties","role","start","_animation","getComponent","Animation","WrapMode","Loop","isEnemyBase","baseId","playBaseWarriorAnimationDefault","actType","isMainPlayer","actName","lastAct","randomTime","Math","ceil","random","play","playBaseWarriorAnimation","agent","fx","fy","targetYOffset","attackTargetYOffset","ex","ey","angle","x","mypos","y","objectId","startPos","targetPos","startEPos","targetEPos","vt","vtE","then","angleInfo","offsetDir","enemypos","v2","sub","ag","PI","atan","console","log","getActnameByAngle","node","scaleX","stop","lastScaleX","ret"],"mappings":"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","sourceRoot":"/","sourcesContent":["var common = require(\"Common\");\n\n// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        role:\"gun\",\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {},\n\n    start () {\n        this._animation = this.getComponent(cc.Animation);\n        this._animation.WrapMode = cc.WrapMode.Loop;\n    },\n\n    isEnemyBase: function(baseId) {\n        if(baseId == 1 || baseId == 2 || baseId == 3) {\n            return true;\n        } else {\n            return false;\n        }\n    },\n\n    playBaseWarriorAnimationDefault: function(actType, isMainPlayer, baseId) {\n        var actName;\n\n        if(this.isEnemyBase(baseId)) {\n            actName = \"ar_s_walk\";\n        } else {\n            actName = \"ar_n_walk\";\n        }\n\n        if(actType == \"move\" && this.lastAct == actName) {\n            return;\n        }\n        var randomTime = Math.ceil(Math.random()*125)/100;\n        this._animation.play(actName, randomTime);\n        this.lastAct = actName;\n    },\n\n    playBaseWarriorAnimation: function(agent, isMainPlayer, actType) {\n        var fx,fy;\n        var targetYOffset = common.attackTargetYOffset;\n        var ex, ey;\n        var angle;\n        var x = agent.mypos.x; \n        var y = agent.mypos.y;\n\n        //gun is located on the up&down inside base, \n        //but default attack point is in the central of the base, so angle may need to ajust.\n        if(agent.objectId == 1) {\n            y = agent.mypos.y+1; \n        }\n        else if(agent.objectId == 4) {\n            y = agent.mypos.y-0; \n        }\n\n        var startPos,targetPos,startEPos, targetEPos, vt, vtE;\n\n        var randomTime = Math.ceil(Math.random()*125)/100;\n        var actName = \"\";\n        var then;\n        var angleInfo;\n\n        // user to control the up and down user Y postion offset.\n        var offsetDir = 1;\n\n        if(isMainPlayer == 1) {\n            offsetDir = 1;\n        }\n        else if(isMainPlayer == 2) {\n            offsetDir = -1;\n        }\n\n        ex = agent.enemypos.x; \n        ey = agent.enemypos.y; \n\n        // dir according to enemy position\n        startPos  = cc.v2((x)*30, (y)*30);\n        //targetPos = cc.v2((ex)*30, (ey)*30+targetYOffset*offsetDir);\n        targetPos = cc.v2((ex)*30, (ey)*30);\n        vt = startPos.sub(targetPos);\n\n        if(vt.x == 0 && vt.y == 0) {\n            return;\n        }\n\n        //if postion not changed, do nothing, or the math.atan will do error.\n        if(vt.x != 0 && vt.y != 0) {\n            var ag = 180/Math.PI * Math.atan(vt.x/vt.y);\n            angle = ag;\n\n            //if base is up, left right angle should be ajusted.\n            if(vt.y >= 0 && vt.x < 0) {\n                angle = ag + 180;\n            } \n            else if(vt.y >= 0 && vt.x >= 0) {\n                angle = ag - 180;\n            } \n        }\n\n        if(this._animation) {\nconsole.log(angle);\n            angleInfo = this.getActnameByAngle(angle, actType);\n            actName = angleInfo.actName;\n\n            //used to mirror a sprite.\n            this.node.scaleX = angleInfo.scaleX;\n\n            //if already in attack mode, just skip the animation\n            if(this.lastAct != actName || actType == \"sa\") {\n                if(actType == \"sa\") {\n                    this._animation.stop();\n                    this._animation.play(actName);\n                } else {\n                    //walking action.\n                    this._animation.play(actName, randomTime);\n                }\n                this.angle = angle;\n                this.lastAct = actName;\n                this.lastScaleX = angleInfo.scaleX;\n            }\n        }\n    },\n\n    getActnameByAngle: function(angle, actType) {\n        var actName=\"\";\n        var scaleX = 1;\n        var ret = {};\n\n        if(angle>=0 && angle<=7.5*1) {\n            if(actType == \"move\") {\n                actName = \"n_walk\";\n            }\n            else if(actType == \"sa\") {\n                actName = \"n_attack\";\n            }\n        }\n        else if(angle>7.5*1 && angle<=7.5*3) {\n            if(actType == \"move\") {\n                actName = \"en5_walk\";\n            }\n            else if(actType == \"sa\") {\n                actName = \"en5_attack\";\n            }\n        }\n        else if(angle>7.5*3 && angle<=7.5*5) {\n            if(actType == \"move\") {\n                actName = \"en4_walk\";\n            }\n            else if(actType == \"sa\") {\n                actName = \"en4_attack\";\n            }\n        }\n        else if(angle>7.5*5 && angle<=7.5*7) {\n            if(actType == \"move\") {\n                actName = \"en3_walk\";\n            }\n            else if(actType == \"sa\") {\n                actName = \"en3_attack\";\n            }\n        }\n        else if(angle>7.5*7 && angle<=7.5*9) {\n            if(actType == \"move\") {\n                actName = \"en2_walk\";\n            }\n            else if(actType == \"sa\") {\n                actName = \"en2_attack\";\n            }\n        }\n        else if(angle>7.5*9 && angle<=7.5*11) {\n            if(actType == \"move\") {\n                actName = \"en1_walk\";\n            }\n            else if(actType == \"sa\") {\n                actName = \"en1_attack\";\n            }\n        }\n\n\n\n        else if(angle>7.5*11 && angle<=7.5*13) {\n            if(actType == \"move\") {\n                actName = \"e_walk\";\n            }\n            else if(actType == \"sa\") {\n                actName = \"e_attack\";\n            }\n        }\n        else if(angle>7.5*13 && angle<=7.5*15) {\n            if(actType == \"move\") {\n                actName = \"se1_walk\";\n            }\n            else if(actType == \"sa\") {\n                actName = \"se1_attack\";\n            }\n        }\n        else if(angle>7.5*15 && angle<=7.5*17) {\n            if(actType == \"move\") {\n                actName = \"se2_walk\";\n            }\n            else if(actType == \"sa\") {\n                actName = \"se2_attack\";\n            }\n        }\n        else if(angle>7.5*17 && angle<=7.5*19) {\n            if(actType == \"move\") {\n                actName = \"se3_walk\";\n            }\n            else if(actType == \"sa\") {\n                actName = \"se3_attack\";\n            }\n        }\n        else if(angle>7.5*19 && angle<=7.5*21) {\n            if(actType == \"move\") {\n                actName = \"se4_walk\";\n            }\n            else if(actType == \"sa\") {\n                actName = \"se4_attack\";\n            }\n        }\n        else if(angle>7.5*21 && angle<=7.5*23) {\n            if(actType == \"move\") {\n                actName = \"se5_walk\";\n            }\n            else if(actType == \"sa\") {\n                actName = \"se5_attack\";\n            }\n        }\n        else if(angle>7.5*21 && angle<=7.5*23) {\n            if(actType == \"move\") {\n                actName = \"s_walk\";\n            }\n            else if(actType == \"sa\") {\n                actName = \"s_attack\";\n            }\n        }\n\n        else if(angle<0 && angle>=7.5*-1) {\n            if(actType == \"move\") {\n                actName = \"n_walk\";\n            }\n            else if(actType == \"sa\") {\n                actName = \"n_attack\";\n            }\n            scaleX = -1;\n        }\n        else if(angle<7.5*-1 && angle>=7.5*-3) {\n            if(actType == \"move\") {\n                actName = \"en5_walk\";\n            }\n            else if(actType == \"sa\") {\n                actName = \"en5_attack\";\n            }\n            scaleX = -1;\n        }\n        else if(angle<7.5*-3 && angle>=7.5*-5) {\n            if(actType == \"move\") {\n                actName = \"en4_walk\";\n            }\n            else if(actType == \"sa\") {\n                actName = \"en4_attack\";\n            }\n            scaleX = -1;\n        }\n        else if(angle<7.5*-5 && angle>=7.5*-7) {\n            if(actType == \"move\") {\n                actName = \"en3_walk\";\n            }\n            else if(actType == \"sa\") {\n                actName = \"en3_attack\";\n            }\n            scaleX = -1;\n        }\n        else if(angle<7.5*-7 && angle>=7.5*-9) {\n            if(actType == \"move\") {\n                actName = \"en2_walk\";\n            }\n            else if(actType == \"sa\") {\n                actName = \"en2_attack\";\n            }\n            scaleX = -1;\n        }\n        else if(angle<7.5*-9 && angle>=7.5*-11) {\n            if(actType == \"move\") {\n                actName = \"en1_walk\";\n            }\n            else if(actType == \"sa\") {\n                actName = \"en1_attack\";\n            }\n            scaleX = -1;\n        }\n        else if(angle<7.5*-11 && angle>=7.5*-13) {\n            if(actType == \"move\") {\n                actName = \"e_walk\";\n            }\n            else if(actType == \"sa\") {\n                actName = \"e_attack\";\n            }\n            scaleX = -1;\n        }\n        else if(angle<7.5*-13 && angle>=7.5*-15) {\n            if(actType == \"move\") {\n                actName = \"se1_walk\";\n            }\n            else if(actType == \"sa\") {\n                actName = \"se1_attack\";\n            }\n\n            scaleX = -1;\n        }\n        else if(angle<7.5*-15 && angle>=7.5*-17) {\n            if(actType == \"move\") {\n                actName = \"se2_walk\";\n            }\n            else if(actType == \"sa\") {\n                actName = \"se2_attack\";\n            }\n            scaleX = -1;\n        }\n        else if(angle<7.5*-17 && angle>=7.5*-19) {\n            if(actType == \"move\") {\n                actName = \"se3_walk\";\n            }\n            else if(actType == \"sa\") {\n                actName = \"se3_attack\";\n            }\n            scaleX = -1;\n        } \n        else if(angle<7.5*-19 && angle>=7.5*-21) {\n            if(actType == \"move\") {\n                actName = \"se4_walk\";\n            }\n            else if(actType == \"sa\") {\n                actName = \"se4_attack\";\n            }\n            scaleX = -1;\n        } \n        else if(angle<7.5*-21 && angle>=7.5*-23) {\n            if(actType == \"move\") {\n                actName = \"se5_walk\";\n            }\n            else if(actType == \"sa\") {\n                actName = \"se5_attack\";\n            }\n            scaleX = -1;\n        } \n        else if(angle<7.5*-23) {\n            if(actType == \"move\") {\n                actName = \"s_walk\";\n            }\n            else if(actType == \"sa\") {\n                actName = \"s_attack\";\n            }\n            scaleX = -1;\n        }\n\n        else {\n            console.log(\"------:\"+angle);\n        }\n\n        actName = this.role +\"_\"+ actName;\n\n        ret.actName = actName;\n        ret.scaleX = scaleX;\n        return ret;\n    },\n\n    // update (dt) {},\n});\n"]}