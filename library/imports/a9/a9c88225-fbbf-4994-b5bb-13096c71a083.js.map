{"version":3,"sources":["assets/scripts/SelCard.js"],"names":["cc","Class","Component","properties","seleRole","magicCost","roleLevel","onLoad","ox","node","x","oy","y","start","isMoving","dragTo","seleInnerId","layoutNode","getLayoutNode","_self","innerId","dragItem","layoutOp","getComponent","canvasNode","parent","seleNode","getChildByName","on","Node","EventType","TOUCH_START","params","gameStartTime","active","showDragMask","setDragItem","TOUCH_MOVE","delta","touch","getDelta","isMove","moveDragItem","target","_name","TOUCH_END","pt","getPosition","seleInfo","unsetDragItem","setPosition","setClickItem","TOUCH_CANCEL","clearDragItem","processChoose","setInitImgByRole","setRoleCost","item","choosenCard","isValidWxRelay","CC_WECHATGAME","ifWxValidRelay","dispWxRelayWarn","role","currentAgents","setRole","cost","level","getNowAgents","setCardsStatus","cNodes","_children","tn","ret","i","length","push","stopCardJitter","stopAllActions","startCardJitter","sceneNode","cnt","lower","upper","callBack","randomX","Math","floor","random","randomY","del","delayTime","cal","callFunc","seq","sequence","runAction","repeatForever","mark","costLabel","string","setSelImg","frameImg","dragNode","iconNode","loader","loadRes","SpriteFrame","err","spriteFrame","width","height","Sprite"],"mappings":"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","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        seleRole: \"ske\",\n        magicCost: 1,\n        roleLevel:1,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        //save the origin postion, becoz it will restore from shake action\n        this.ox = this.node.x;\n        this.oy = this.node.y;            \n    },\n\n    start () {\n        this.isMoving = false;\n        this.dragTo = null;\n        this.seleInnerId = \"\";\n        var layoutNode = this.getLayoutNode();\n        var _self = this;\n\n        //if in game mode page\n        if(layoutNode) {\n            var innerId;\n            var dragItem = null;\n            var layoutOp = layoutNode.getComponent('Game');\n            var canvasNode = this.node.parent;\n            var seleNode = canvasNode.getChildByName(\"charSele\");\n\n            this.node.on(cc.Node.EventType.TOUCH_START, function (params) {\n                if(layoutOp.gameStartTime == 0) {\n                    return;\n                }\n                _self.node.getChildByName(\"dragTo\").active = true;\n                layoutOp.showDragMask(_self.seleRole);\n\n                _self.seleInnerId = layoutOp.setDragItem(params, _self.node.getChildByName(\"dragTo\"));\n            });\n\n            this.node.on(cc.Node.EventType.TOUCH_MOVE, function (params) {\n                var delta = params.touch.getDelta();\n                _self.isMove = true;\n\n                layoutOp.moveDragItem(params.target._name, delta);\n            });\n\n            this.node.on(cc.Node.EventType.TOUCH_END, function (params) {\n                var pt = _self.node.getPosition();\n                var seleInfo = {\"role\":_self.seleRole, \"level\":_self.roleLevel, \"magicCost\":_self.magicCost, \"params\":params, \"node\":_self.node.getChildByName(\"dragTo\")};\n\n                if(_self.seleInnerId != \"\") {\n                    layoutOp.unsetDragItem(_self.seleInnerId);\n                    _self.seleInnerId = \"\";\n                }\n\n                _self.isMove = false;\n                seleNode.active = true;\n                seleNode.setPosition(pt);\n\n                layoutOp.setClickItem(seleInfo);\n            });\n\n            this.node.on(cc.Node.EventType.TOUCH_CANCEL, function (params) {\n                var seleInfo = {\"role\":_self.seleRole, \"level\":_self.roleLevel, \"magicCost\":_self.magicCost};\n                layoutOp.clearDragItem(params, seleInfo);\n            });\n        } \n        // in select mode page\n        else {\n            this.node.on(cc.Node.EventType.TOUCH_END, function (params) {\n                _self.processChoose();\n            });\n        }\n\n        this.setInitImgByRole();\n        this.setRoleCost();\n    },\n\n    processChoose: function() {\n        var layoutOp = this.node.parent.parent.getComponent('SelLayout');\n        var item = layoutOp.choosenCard;\n        var isValidWxRelay;\n\n        //if not valid wx relay(less than 3 seconds), then do nothing.\n        if (CC_WECHATGAME) {\n            isValidWxRelay = layoutOp.ifWxValidRelay();\n            if(!isValidWxRelay) {\n                layoutOp.dispWxRelayWarn(true);\n                return;\n            }\n        }\n\n        if(!item  || !item.role) {\n            return;\n        }\n        var currentAgents = [];\n        this.setRole(item.role, item.cost, item.level);\n        this.setInitImgByRole();\n        this.setRoleCost();\n        currentAgents = this.getNowAgents();\n        layoutOp.setCardsStatus(currentAgents);\n    },\n\n    getNowAgents: function() {\n        var cNodes = this.node.parent._children;\n        var tn;\n        var ret = [];\n        for(var i=0;i<cNodes.length;i++) {\n            if(cNodes[i]._name == \"SelCard\") {\n                ret.push(cNodes[i].getComponent(\"SelCard\").seleRole);\n            }\n        }\n        return ret;\n    },\n\n    setRole: function(role, cost, level) {\n        this.seleRole = role;\n        this.magicCost = cost;\n        this.roleLevel = level;\n    },\n\n    getLayoutNode: function() {\n        return this.node.parent.getChildByName(\"layout\");\n    },\n\n    stopCardJitter: function(){\n        this.node.stopAllActions();\n        this.node.x = this.ox;\n        this.node.y = this.oy; \n    },\n\n    //shake the card node\n    startCardJitter: function(){\n        this.node.stopAllActions();\n\n        var _self = this;\n        var sceneNode = this.node;\n        var cnt = 0;\n\n        var lower = -2;\n        var upper = 2;\n        var callBack = function(){\n            cnt++;\n            var randomX = Math.floor(Math.random() * (upper - lower)) + lower;\n            var randomY = Math.floor(Math.random() * (upper - lower)) + lower;\n            \n            sceneNode.x += randomX;\n            sceneNode.y += randomY;\n            if(cnt%3 == 0) {\n                //sceneNode.stopAllActions();\n                sceneNode.x = _self.ox;\n                sceneNode.y = _self.oy;\n            }\n        }\n\n        var node = this.node;//场景常驻节点\n        var del = cc.delayTime(1/30);\n        var cal = cc.callFunc(callBack);\n        var seq = cc.sequence(del, cal);\n        node.runAction(cc.repeatForever(seq));\n    },\n\n    setRoleCost: function() {\n        if(this.magicCost == 0) {\n            return;\n        }\n        var mark = this.node.getChildByName(\"ringMark\");\n        var costLabel = mark.getChildByName(\"cost\").getComponent(\"cc.Label\");\n        costLabel.string = this.magicCost;\n    },\n\n    setSelImg: function(frameImg) {\n        var dragNode = this.node.getChildByName(\"dragTo\");\n        var iconNode = this.node.getChildByName(\"icon\");\n\n        cc.loader.loadRes(frameImg, cc.SpriteFrame, function (err, spriteFrame) {\n            dragNode.width = 100;\n            dragNode.height = 120;\n            dragNode.active = false;\n            dragNode.getComponent(cc.Sprite).spriteFrame = spriteFrame;\n\n            iconNode.width = 100;\n            iconNode.height = 120;\n            iconNode.active = true;\n            iconNode.getComponent(cc.Sprite).spriteFrame = spriteFrame;\n        });\n    },\n\n    setInitImgByRole: function() {\n        var frameImg = \"\";\n\n        if(this.seleRole == \"ske\") {\n            this.setSelImg(\"sel_cards/ske\");\n        }\n        //lieren\n        else if(this.seleRole == \"lr\") {\n            this.setSelImg(\"sel_cards/lieren\");\n        }\n        //rockman\n        else if(this.seleRole == \"gi\") {\n            this.setSelImg(\"sel_cards/rockman\");\n        }\n        else if(this.seleRole == \"log\") {\n            this.setSelImg(\"sel_cards/log\");\n        }\n        else if(this.seleRole == \"bomb\") {\n            this.setSelImg(\"sel_cards/bomb\");\n        }\n        else if(this.seleRole == \"bee\") {\n            this.setSelImg(\"sel_cards/bee\");\n        }\n        else if(this.seleRole == \"wiz\") {\n            this.setSelImg(\"sel_cards/wiz\");\n        }\n        //hero\n        else if(this.seleRole == \"hr\") {\n            this.setSelImg(\"sel_cards/hero\");\n        }\n        //light man\n        else if(this.seleRole == \"lm\") {\n            this.setSelImg(\"sel_cards/lightman\");\n        }\n        //hero\n        else if(this.seleRole == \"fa\") {\n            this.setSelImg(\"sel_cards/fortA\");\n        }\n        //hero\n        else if(this.seleRole == \"ir\") {\n            this.setSelImg(\"sel_cards/ironman\");\n        }\n        //buff thunder\n        else if(this.seleRole == \"thunder\") {\n            this.setSelImg(\"sel_cards/thunder\");\n        }\n        //buff heal\n        else if(this.seleRole == \"heal\") {\n            this.setSelImg(\"sel_cards/heal\");\n        }\n\n    }\n\n    // update (dt) {},\n});\n"]}