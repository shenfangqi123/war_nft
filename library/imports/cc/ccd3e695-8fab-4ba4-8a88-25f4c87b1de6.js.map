{"version":3,"sources":["assets/scripts/Result.js"],"names":["cc","Class","Component","properties","win","flagNum","score","boxType","start","node","zIndex","show","active","setTitle","setScore","setResultValue","mainPlayer","data","gameDataNode","getPersistantNode","agentsDef","getData","basescore","console","log","upk","dnk","winScore","setUpgrade","param","find","getComponent","titleNode","getChildByName","string","setFlag","header","flagName","flagNode","i","scoreNode","setBox","boxNode","test","event","customEventData","director","loadScene"],"mappings":"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","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        win:0,\n        flagNum:2,\n        score:0,\n        boxType:1,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {},\n\n    start () {\n        this.node.zIndex = 9999;\n    },\n\n    show: function() {\n        this.node.active = true;\n        this.setTitle();\n        //this.setFlag();\n        this.setScore();\n        //this.setBox();\n    },\n\n    setResultValue: function(mainPlayer, data) {\n        var gameDataNode = this.getPersistantNode();\n        var agentsDef = gameDataNode.getData();\n        var basescore = agentsDef.basescore;\n\n        if(mainPlayer == 1) {\n            if(data.win == 1) {\n                console.log(\"my win\");\n                this.win = 1;\n                this.flagNum = data.upk;\n            }\n            else if(data.win == 0) {\n                console.log(\"my lose\");\n                this.win = 0;\n                this.flagNum = data.upk;\n            }\n            else if(data.win == 2) {\n                console.log(\"even\");\n                this.win = 2;\n                this.flagNum = data.upk;\n            }\n        }\n        else if(mainPlayer == 2) {\n            if(data.win == 1) {\n                console.log(\"my lose\");\n                this.win = 0;\n                this.flagNum = data.dnk;\n            }\n            else if(data.win == 0) {\n                console.log(\"my win\");\n                this.win = 1;\n                this.flagNum = data.dnk;\n            }\n            else if(data.win == 2) {\n                console.log(\"even\");\n                this.win = 2;\n                this.flagNum = data.dnk;\n            }\n        }\n\n        if(this.win==1 || this.win==2) {\n            this.score = this.flagNum*basescore;\n            gameDataNode.winScore(this.score);\n        } else {\n            gameDataNode.setUpgrade(false);\n        }\n    },\n\n    getPersistantNode: function(param) {\n        var node = cc.find('GameData').getComponent('GameData');\n        return node;\n    },\n\n    setTitle: function() {\n        var titleNode = this.node.getChildByName(\"winnerTxt\").getComponent(\"cc.Label\");\n        if(this.win == 1) {\n            titleNode.string = \"胜利！\";\n        } \n        else if(this.win == 0){\n            titleNode.string = \"失败！\";\n        }\n        else if(this.win == 2){\n            titleNode.string = \"平局！\";\n        }\n    },\n\n    setFlag: function() {\n        var header = \"flag\";\n        var flagName, flagNode;\n\n        for(var i=1;i<=3;i++) {\n            flagName = header + i;\n            flagNode = this.node.getChildByName(\"killed\").getChildByName(flagName);\n            flagNode.active = false;\n\n            if(i <= this.flagNum) {\n                flagNode.active = true;\n            }\n        }\n    },\n\n    setScore: function() {\n        var scoreNode = this.node.getChildByName(\"goldStar\").getChildByName(\"goldTxt\").getComponent(\"cc.Label\");\n        scoreNode.string = \"+\" + this.score;\n    },\n\n    setBox: function() {\n        var boxNode = this.node.getChildByName(\"boxFrame\").getChildByName(\"boxInfo\").getComponent(\"cc.Label\");\n        if(this.boxType == 1) {\n            boxNode.string = \"普通宝箱\";\n        }\n        else if(this.boxType == 2) {\n            boxNode.string = \"高级宝箱\";\n        }\n        else if(this.boxType == 3) {\n            boxNode.string = \"超级宝箱\";\n        }\n    },\n\n    test: function (event, customEventData) {\n        console.log(\"clicked...\");\n        this.node.active = false;\n        cc.director.loadScene('menu');\n    }\n    // update (dt) {},\n});\n"]}